/*! dist/js/invodo.uncompressed.js 13-01-2016 0.2.0-160113-001U */

var Invodo=function(a){function b(){if(Invodo.Module.has("logger")){var a=Invodo.Env.browser,b=Invodo.Env.flash,c=Invodo.Env.html5Video,e=Invodo.Env.screen,f={cu:d.getSeoUrl(),pu:d.getPageUrl(),re:document.referrer,ti:document.title,be:a.engine,bv:a.version,pl:a.platform,fl:b.version,hv:c.supported,sw:e.screenWidth(),sh:e.screenHeight(),ww:e.viewportWidth(),wh:e.viewportHeight(),lc:window.navigator.language,ua:window.navigator.userAgent,mb:"onorientationchange"in window?!0:!1},g=Invodo.getPageName();g&&(f.pn=g);var h=Invodo.getPageType();h&&(f.pt=h);var i=Invodo.getParentPage();i&&(f.pp=i);var j=Invodo.getParentPageType();j&&(f.ppt=j),Invodo.Module.get("logger").log("Invodo","pageView",f)}}function c(a,b,c){for(var d in b){if(c&&d in a)break;a[d]=b[d]}return a}if(window.Invodo)return window.Invodo;var d={},e=a,f="000000",g=null,h="FFFFFF",i=document.title,j=null,k=null,l=null,m=null,n="8DCC00",o="0.6.2",p="//e.invodo.com/",q="//log.invodo.com/";return d.getCanonicalUrl=function(){var a=document.getElementsByTagName("link"),b="";for(var c in a){var d=a[c];"canonical"==d.rel&&(b=d.href)}return b},d.getLogDomain=function(){return q},d.getPageUrl=function(){return window.location.href},d.getSeoUrl=function(){var a=d.getCanonicalUrl(),b="";return a&&(a.indexOf("http")<0&&(a=window.location.href+a),b=a),b},d.getPodDomain=function(){return p},d.Src={Module:{},Widget:{}},d.Tool={},d.Console={dir:function(a){window.console&&window.console.dir&&window.console.dir(a)},log:function(a){window.console&&window.console.log&&window.console.log(a)},warn:function(a){window.console&&window.console.warn&&(window.console.warn(a),window.console.warn((new Error).stack))}},d.getAffiliate=function(){var a="";return e&&e.affiliate&&(a=e.affiliate),a},d.getAffiliateConfig=function(){return e.backcolor=e.backcolor?e.backcolor:f,e.frontcolor=e.frontcolor?e.frontcolor:h,e.secondarycolor=e.secondarycolor?e.secondarycolor:n,e},d.getPageName=function(){return i},d.init=function(a){return k=Invodo.Visitor.getPageViewId(),a?(g=a,"logDomain"in g&&(q=g.logDomain),"podDomain"in g&&(p=g.podDomain),Invodo.Pod.init(),g.affiliate&&(e=c(e,g.affiliate)),g.pageType&&(j=g.pageType),g.parentPage&&(l=g.parentPage),g.parentPageType&&(m=g.parentPageType),g.pageName&&g.pageName.length>0&&(i=g.pageName),Invodo.Module.has("logger")===!1?(Invodo.Module.add(Invodo.Src.Module.Logger,"logger"),g.affiliate&&g.affiliate.nooplogger&&"true"===g.affiliate.nooplogger&&(Invodo.Module.get("logger").log=function(a){}),g.debugLogger&&"false"!=g.debugLogger&&Invodo.Module.get("logger").setDebug(!0),b()):Invodo.Console.log("ERROR: logger module already loaded."),g.onload&&Invodo.Event.ready(g.onload),g.onpodload&&(Invodo.onpodload=g.onpodload),d):d},d.getPageType=function(){return j},d.getParentPage=function(){return l},d.getParentPageType=function(){return m},d.getPageViewId=function(){return k},d.notify=function(a){Invodo.onpodload&&Invodo.onpodload(a)},d.version=function(){return o},d.version.toString=function(){return o},d}({ "videoPlayerPreference":"Flash", "test":"false", "rtmpBase":"rtmp://aoaef.invodo.com/", "imageBase":"http://e.invodo.com/media/", "httpBase":"http://e.invodo.com/media/", "affiliate":"canon.com", "name":"", "playbuttoncolor":"black", "backcolor":"000000", "frontcolor":"FFFFFF", "secondarycolor":"8DCC00", "aspectratio":"FULLSCREEN", "bufferscreenbranding":"INVODO", "endofcontentbranding":"INVODO", "showcliptitles":"true", "ratingenabled":"true", "autoplaymultipleclips":"false", "share":"true", "og":"true", "seoStructData":"", "playlist":"true", "chromelessmode":"false", "bgcolor":"000000", "loadingviewcolor":"FFFFFF", "loadingview":"true", "watermark":"false" ,"height":"270" ,"width":"480" });(function(a){var b=this.Lang={},c=Object.prototype,d=c.toString,e=c.hasOwnProperty,f=Array.prototype,g=f.slice,h=f.filter,i=f.indexOf,j=f.map;String.prototype.trim;b.isEmptyObject=function(a){var c;if("object"!==b.type(a))return!1;for(c in a)return!1;return!0},b.hasOwn=function(a,b){return a&&e.call(a,b)},b.isFunction=function(a){return"function"===b.type(a)},b.isArray=function(a){return"array"===b.type(a)},b.isElement=function(a){return a&&void 0!==a.nodeType},b.isPlainObject=function(a){return a&&a.constructor===Object},b.isWindow=function(a){return a&&a==a.window},b.forEach=function(a,c){var d,e,f,g=0;if(b.isArray(a))for(f=a.length;f>g&&(e=a[g],c.call(e,g,e)!==!1);g++);else for(d in a)if(e=a[d],c.call(e,d,e)===!1)break;return a},b.type=function(a){var b;return a!==a?"nan":(b=d.call(a),b.toLowerCase().slice(8,b.length-1))},b.filter=h?function(a,b){return a.filter(b)}:function(a,b){for(var c,d=a.length,e=0,f=[];d>e;e++)c=a[e],b.call(a,c,e,a)&&f.push(c);return f},b.map=j?function(a,b){return a.map(b)}:function(b,c){for(var d=0,e=b.length,f=[];e>d;d++)d in b&&(f[d]=c.call(a,b[d],d,b));return f},b.indexOf=i?function(a,b){return a.indexOf(b)}:function(a,b){for(var c=0,d=a.length;d>c;c++)if(c in a&&a[c]===b)return c;return-1},b.trim=function(a){return a.replace(/^\s+/g,"").replace(/\s+$/g,"")},b.mix=function(a){var c,d,e,f,h=g.call(arguments,1),i=0,j=h.length;if(!a||!h.length)return a;for(;j>i;i++)if(c=h[i])for(d in c)e=c[d],f=a[d],b.isPlainObject(e)?a[d]=b.mix({},f,e):b.isArray(e)?a[d]=b.mix([],f,e):a[d]=e;return a},b.clone=function(a){var c=a instanceof Array?[]:{};for(var d in a)a[d]&&"object"==typeof a[d]?c[d]=b.clone(a[d]):c[d]=a[d];return c},b.normalizeUrl=function(a){return a.replace(/([^:]\/)\/+/g,"$1")}}).call(Invodo,this),function(a,b){function c(a){return j.lastIndex=0,j.test(a)?'"'+a.replace(j,function(a){var b=k[a];return"string"==typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function d(a,b){var e,i,j,k,l,m=f,n=b[a];switch(n&&"object"==typeof n&&"function"==typeof n.toJSON&&(n=n.toJSON(a)),"function"==typeof h&&(n=h.call(b,a,n)),typeof n){case"string":return c(n);case"number":return isFinite(n)?String(n):"null";case"boolean":case"null":return String(n);case"object":if(!n)return"null";if(f+=g,l=[],"[object Array]"===Object.prototype.toString.apply(n)){for(k=n.length,e=0;k>e;e+=1)l[e]=d(e,n)||"null";return j=0===l.length?"[]":f?"[\n"+f+l.join(",\n"+f)+"\n"+m+"]":"["+l.join(",")+"]",f=m,j}if(h&&"object"==typeof h)for(k=h.length,e=0;k>e;e+=1)"string"==typeof h[e]&&(i=h[e],j=d(i,n),j&&l.push(c(i)+(f?": ":":")+j));else for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(j=d(i,n),j&&l.push(c(i)+(f?": ":":")+j));return j=0===l.length?"{}":f?"{\n"+f+l.join(",\n"+f)+"\n"+m+"}":"{"+l.join(",")+"}",f=m,j}}var e=this.JSON={};if(a.JSON&&"json"===this.Lang.type(a.JSON))return e.stringify=function(b,c,d){return a.JSON.stringify(b,c,d)},void(e.parse=function(b,c){return a.JSON.parse(b,c)});var f,g,h,i=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,j=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,k={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};"function"!=typeof e.stringify&&(e.stringify=function(a,b,c){var e;if(f="",g="","number"==typeof c)for(e=0;c>e;e+=1)g+=" ";else"string"==typeof c&&(g=c);if(h=b,b&&"function"!=typeof b&&("object"!=typeof b||"number"!=typeof b.length))throw new Error("JSON.stringify");return d("",{"":a})}),"function"!=typeof e.parse&&(e.parse=function(a,c){function d(a,b){var e,f,g=a[b];if(g&&"object"==typeof g)for(e in g)Object.prototype.hasOwnProperty.call(g,e)&&(f=d(g,e),void 0!==f?g[e]=f:delete g[e]);return c.call(a,b,g)}var e;if(a=String(a),i.lastIndex=0,i.test(a)&&(a=a.replace(i,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return e=b("("+a+")"),"function"==typeof c?d({"":e},""):e;throw new SyntaxError("JSON.parse")})}.call(Invodo,this,eval),function(a){var b=this.Env={},c=this.Lang,d=a.document,e=d.documentElement,f=(document.body,a.navigator),g=f.userAgent.toLowerCase(),h=f.platform.toLowerCase(),i="Shockwave Flash",j="ShockwaveFlash.ShockwaveFlash",k="application/x-shockwave-flash",l=function(b){return a.parseInt(b,10)},m=function(){var a={platform:h},b=/(webkit)[ \/]([\w.]+)/,c=/(opera)(?:.*version)?[ \/]([\w.]+)/,d=/(trident)[ \/]([\w.]+)/,e=/(msie)/i,f=/(mozilla)(?:.*? rv:([\w.]+))?/,i=/chrome/,j=/safari/,k=/ipod|ipad|iphone/i,l=/phantom/i,m=l.test(g),n=b.exec(g)||c.exec(g)||d.exec(g)||e.exec(g)||g.indexOf("compatible")<0&&f.exec(g)||["unknown","unknown"];return a.userAgent=n[0],n[1]=n[1].toLowerCase(),"trident"===n[1]?a.engine="msie":a.engine=n[1],a.version=n[2],a.chrome=i.test(g),a.safari=j.test(g)&&!a.chrome&&!m,a.phantom=m,a.ios=a.safari&&k.test(h),"msie"===a.engine?a.ie=!0:a.ie=!1,a},n=function(){var a=d.createElement("video"),b="canPlayType",c=!1,e={supported:c,h262Base:!1,h264Extend:!1,h264Main:!1,h264High:!1,oggTheora:!1,webM:!1};try{c=a.canPlayType("video/mp4"),e.supported=c,e.h262Base=c&&a[b]('video/mp4; codecs="avc1.42E01E, mp4a.40.2"')||!1,e.h264Extend=c&&a[b]('video/mp4; codecs="avc1.58A01E, mp4a.40.2"')||!1,e.h264Main=c&&a[b]('video/mp4; codecs="avc1.4D401E, mp4a.40.2"')||!1,e.h264High=c&&a[b]('video/mp4; codecs="avc1.64001E, mp4a.40.2"')||!1,e.oggTheora=c&&a[b]('video/ogg; codecs="theora, vorbis"')||!1,e.webM=c&&a[b]('video/webm; codecs="vp8, vorbis"')||!1}catch(f){}return a=null,e},o=function(){var b,c,d={supported:!1,ActiveX:!1,version:[0,0,0]};if(f.plugins&&f.plugins[i])b=f.plugins[i].description,b&&f.mimeTypes&&f.mimeTypes[k]&&f.mimeTypes[k].enabledPlugin&&(d.supported=!0,b=b.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),d.version=[l(b.replace(/^(.*)\..*$/,"$1")),l(b.replace(/^.*\.(.*)\s.*$/,"$1")),/[a-zA-Z]/.test(b)?l(b.replace(/^.*[a-zA-Z]+(.*)$/,"$1")):0]);else if(a.ActiveXObject)try{c=new ActiveXObject(j),c&&(b=c.GetVariable("$version"),b&&(d.supported=!0,b=b.split(" ")[1].split(","),d.version=[l(b[0]),l(b[1]),l(b[2])],d.ActiveX=!0))}catch(e){}return d},p=function(){var b={};return b.mode="standard",b.screenHeight=function(){return a.screen.height},b.screenWidth=function(){return a.screen.width},b.documentHeight=function(){var a=document.body,b=document.documentElement;return Math.max(a.scrollHeight,a.offsetHeight,b.clientHeight,b.scrollHeight,b.offsetHeight)},a.innerWidth&&a.innerHeight?(b.viewportWidth=function(){return a.innerWidth},b.viewportHeight=function(){return a.innerHeight}):"CSS1Compat"===d.compatMode?(b.viewportWidth=function(){return e.clientWidth},b.viewportHeight=function(){return e.clientHeight}):(b.mode="quirks",b.viewportWidth=function(){return e.offsetWidth},b.viewportHeight=function(){return e.offsetHeight}),b};c.mix(b,{browser:m(),html5Video:n(),flash:o(),screen:p()})}.call(Invodo,this),function(a){var b=a.document,c=this.Lang,d=c.mix,e=c.type,f=c.trim,g=a.encodeURIComponent,h=a.decodeURIComponent,i=new Date(0).toUTCString(),j=function(a){var d=null;return c.forEach(b.cookie.split(";"),function(b,c){var e=c.split("="),g=h(f(e[0]));return g===a?(d=h(e[1]),!1):void 0}),d},k=function(a,c,d){"date"===e(d.expires)&&(d.expires=d.expires.toUTCString()),d.encode&&(a=g(a),c=g(c)),b.cookie=[a+"="+c,d.expires?"; expires="+d.expires:"",d.path?"; path="+d.path:"",d.domain?"; domain="+d.domain:"",d.secure?"; secure":""].join("")},l=function(){var a="__invodotest",b="test_val",c=!1;try{k(a,b,{}),j(a)===b&&(c=!0),k(a,"",{expires:i})}catch(d){}return c}(),m=this.Cookie={enabled:function(){return l},get:function(a){return j(a)},set:function(a,b,c){var e=d({},m.defaults,c);k(a,b,e)},del:function(a,b){var c=d({},m.defaults,b,{expires:i});k(a,"",c)},defaults:{path:"/",secure:!1,expires:null,domain:"",encode:!1}}}.call(Invodo,this),function(a){var b,c=this.Storage={},d=this.Lang,e=this.JSON,f=this.Cookie,g="InvodoJSStorage",h={},i=function(){var a="test",b="invodo_test",c=!1;try{localStorage.setItem(a,b),c=localStorage.getItem(a)===b,localStorage.removeItem(a)}catch(d){}return c}(),j=function(){},k=function(){},l=f.enabled();if(i)b=localStorage.getItem(g),b&&(h=e.parse(b)),j=function(){d.isEmptyObject(h)?c.clear():localStorage.setItem(g,e.stringify(h))},k=function(){h={},localStorage.removeItem(g)};else if(l){if(b=f.get(g))try{h=e.parse(b)}catch(m){h={}}j=function(){d.isEmptyObject(h)?c.clear():f.set(g,e.stringify(h))},k=function(){h={},f.del(g)}}d.mix(c,{save:j,clear:k,enabled:function(){return i||l},get:function(a){var b=h[a];return i||"string"!=typeof b||(b=decodeURIComponent(b)),b},set:function(a,b){i||"string"!=typeof b||(b=encodeURIComponent(b)),h[a]=b},del:function(a){a in h&&delete h[a]},contains:function(a){return a in h}})}.call(Invodo,this),function(a,b){var c=this.Math={},d=(this.Lang,a.Math),e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split("");c.convertSecondsToMilliseconds=function(a){return 1e3*a},c.getRandomInt=function(a,b){return 1===arguments.length&&(b=a,a=0),d.floor(d.random()*(b-a+1))+a},c.isInt=function(a){return!isNaN(a)&&function(a){return(0|a)===a}(parseFloat(a))},c.isNumber=function(a){return"number"==typeof a&&isFinite(a)},c.uid=function(){for(var a=0,b=22,d=e.length-1,f=[];b>a;a++)f[a]=e[c.getRandomInt(d)];return f.join("")}}.call(Invodo,this),function(a,b){function c(){var a=e.uid();return a}var d=(this.Lang,this.Cookie),e=this.Math,f=18e5,g=(new Date).getTime(),h="",i="",j="invodoVisitor",k="invodoSession",l=e.uid(),m=function(){var a=new Date;return a.setFullYear(a.getFullYear()+10),a}();this.Visitor={getVisitorId:function(){var b=d.get(j);return b&&(h=b.substring(0,22)),h||(h=e.uid(),d.set(j,h,{expires:m,domain:Invodo.Url.wildcardDomain(a.location.hostname)})),h},resetVisitorId:function(){return d.del(j,{domain:Invodo.Url.wildcardDomain(a.location.hostname)}),Invodo.Visitor.getVisitorId()},getSessionId:function(){var b=0,e=(new Date).getTime();return b=e-g,i=i||d.get(k),(!i||b>f)&&(i=c(),d.set(k,i,{domain:Invodo.Url.wildcardDomain(a.location.hostname)})),g=e,i},getPageViewId:function(){return l}}}.call(Invodo,this),function(a,b){var c=b.Data={},d=b.Lang,e={},f="InvodoJSData",g=1,h="InvodoJSDataWindow",i=function(a){var b=a.nodeType;return d.isWindow(a)||d.isElement(a)&&3!==b&&8!==b};c.get=function(a,b){var c,g=d.isWindow(a);if(i(a)&&(c=g?h:a[f],void 0!==c&&c in e))return b?e[c][b]:e[c]},c.set=function(a,b,c){var j,k=d.isWindow(a);i(a)&&(k?j=h:(j=a[f],void 0===j&&(j=a[f]=g++)),e[j]||(e[j]={}),e[j][b]=c)},c.remove=function(a,b){var c,g=d.isWindow(a);if(i(a)&&(c=g?h:a[f],void 0!==c&&c in e))if(b)e[c][b]=null,delete e[c][b];else if(e[c]=null,delete e[c],!g)try{a[f]=null,delete a[f]}catch(j){a.removeAttribute(f)}}}(this,Invodo),function(a,b,c){var d={},e=b.Lang,f=b.Data,g=(e.type,a.document),h=g.documentElement,i=g.body,j="addEventListener",k="removeEventListener",l="attachEvent",m="detachEvent",n=j in g&&k in g,o=function(a){var b=a.nodeType;return e.isWindow(a)||e.isElement(a)&&3!==b&&8!==b},p=function(){return!1},q=function(){return!0},r=function(a){var b;return a&&a.stopPropagation?a:(b=a,a=e.mix({},b),a.target||(a.target=a.srcElement||g),a.relatedTarget=a.fromElement===a.target?a.toElement:a.fromElement,a.preventDefault=function(){b.returnValue=!1,a.isDefaultPrevented=q},a.isDefaultPrevented=p,a.stopPropagation=function(){b.cancelBubble=!0,a.isPropagationStopped=q},a.isPropagationStopped=p,a.stopImmediatePropagation=function(){a.isImmediatePropagationStopped=q,a.stopPropagation()},a.isImmediatePropagationStopped=p,a.clientX&&(a.pageX=a.clientX+(g&&g.scrollLeft||i&&i.scrollLeft||0)-(g&&g.clientLeft||i&&i.clientLeft||0),a.pageY=a.clientY+(g&&g.scrollTop||i&&i.scrollTop||0)-(g&&g.clientTop||i&&i.clientTop||0)),a.which=a.charCode||a.keyCode,n||a.button===c||(a.button={1:0,4:1,2:2}[a.button]),a)},s=function(a,b,c){c&&c[b]&&(n?a[k](b,c[b].dispatcher,!1):a[m]("on"+b,c[b].dispatcher),c[b]=null,delete c[b])};d.on=function(b,c,d){var e,g,h;o(b)&&(e=f.get(b,"events")||{},e[c]?(g=e[c],h=g.queue):(g=e[c]={},h=g.queue=[]),g.dispatcher||(g.dispatcher=function(b){var c,d=0,e=h&&h.length?h.length:0;for(b=r(b||a.event),c=b.target;e>d;d++)h[d]&&h[d].call&&h[d].call(c,b);c=null}),h.push(d),1===g.queue.length&&(n?b[j](c,g.dispatcher,!1):b[l]("on"+c,g.dispatcher)),f.set(b,"events",e),b=null)},d.off=function(a,b,c){var d,g;o(a)&&(d=f.get(a,"events"),d&&(g=d[b],c&&g?e.forEach(g.queue.slice(),function(e,f){return f===c?(g.queue.splice(e,1),g.queue.length||s(a,b,d),!1):void 0}):b&&g?s(a,b,d):e.forEach(d,function(b,c){s(a,b,d)}),e.isEmptyObject(d)?f.remove(a,"events"):f.set(a,"events",d),a=null))},d.fire=function(a,b){var c,d;o(a)&&("string"===e.type(b)&&(b={type:b,target:a}),d=b.type,c=f.get(a,"events"),c&&c[d]&&(b=r(b),c[d].dispatcher(b),a=null))},d.once=function(a,b,c){var e=function(){d.off(this,b,e),c.apply(this,arguments)};d.on(a,b,e),a=null},d.ready=function(){var b,c=[],f=!1,i="DOMContentLoaded",j="readyState",k="onreadystatechange",l=function(){var a=c.length;if(!f)for(f=!0;a--;)c.shift().call(g)};if(n)d.once(g,i,l);else{b=d.on(g,k,function(){"complete"===g[j]&&(l(),d.off(this,k,b))});try{toplevel=null===a.frameElement,h.doScroll&&toplevel&&!function o(){try{h.doScroll("left")}catch(a){return void setTimeout(o,25)}l()}()}catch(m){}}return d.once(a,"load",function(){l()}),"complete"===g[j]&&l(),function(a){e.isFunction(a)&&(f?a.call(g):c.push(a))}}(),b.Event=d}(this,Invodo),function(a,b,c){var d=b.Lang,e=b.Data,f=b.Event,g=b.Env,h=d.type,i=a.document,j=i.documentElement,k="classList",l="className",m="getElementsByClassName",n=Array.prototype.slice,o=d.hasOwn,p=k in j,q=m in j,r=function(){var a=i.createElement("div"),b="styleFloat"in a.style;return a=null,b}(),s=function(){var a=i.createElement("div"),b=!("opacity"in a.style);return a=null,b}(),t=function(a){for(var b=a.firstChild;b;)u(b),a.removeChild(b),b=a.firstChild;return a},u=function(a){f.off(a),e.remove(a)},v=function(a){return n.call(a)};try{v(j.childNodes)}catch(w){v=function(a){for(var b=[],c=0,d=a.length;d>c;c++)b[c]=a[c];return b}}var x={R_TAG:/^(?:[a-z]+|\*)$/,R_CLASS:/^\./,R_ID:/^#/,find:function(a,b){var d,e=[];return b===c&&(b=i),x.R_ID.test(a)?(d=x.byId(a.slice(1),b),d&&e.push(d)):x.R_CLASS.test(a)?e=x.byClass(a.slice(1),b):x.R_TAG.test(a)&&(e=x.byTagName(a,b)),e},byId:function(a,b){var c=null;return d.isElement(b)?d.forEach(x.byTagName("*",b),function(b,d){return d.id===a?(c=d,!1):void 0}):c=i.getElementById(a),c},byTagName:function(a,b){b||(b=i);var c=[],d=b.getElementsByTagName(a);return d.length&&(c=v(d)),c},byClass:q?function(a,b){b||(b=i);var c=b[m](a);return v(c)}:function(a,b){b||(b=i);for(var c,d=[],e=0,f=b.getElementsByTagName("*"),g=f.length;g>e;e++)c=f[e],y.has(c,a)&&d.push(c);return d}},y={has:p?function(a,b){return a[k].contains(b)}:function(a,b){return-1!==(" "+a[l]+" ").indexOf(" "+b+" ")},add:p?function(a,b){return a[k].add(b),a}:function(a,b){var c;if(!y.has(a,b))return c=a[l],c&&c.length?a[l]=c+" "+b:a[l]=b,a},remove:p?function(a,b){return a[k].remove(b),a}:function(a,b){var c;return y.has(a,b)&&(c=a[l],a[l]=c.replace(b,"")),a},toggle:p?function(a,b){return a[k].toggle(b),a}:function(a,b){return y.has(a,b)?y.remove(a,b):y.add(a,b),a}},z={get:a.getComputedStyle?function(b,c){return c=z.dasherize(c),a.getComputedStyle(b,null).getPropertyValue(c)}:function(a,b){return b=z.camelize(b),a.currentStyle[b]},set:function(a,b,c){var e=a.style;if("object"===h(b))d.forEach(b,function(b,c){z.set(a,b,c)});else{switch(b){case"float":b=r?"styleFloat":"cssFloat";break;case"opacity":s&&(b="filter",c="alpha(opacity="+100*parseFloat(c)+")")}e[z.camelize(b)]=c}return a},camelize:function(a){return(a+"").replace(/-([a-z])/gi,function(a,b){return b.toUpperCase()})},dasherize:function(a){return(a+"").replace(/([A-Z])/g,"-$1").toLowerCase()}},A={get:function(a){var b="",c=a.nodeType;return 1===c||9===c||11===c?"textContent"in a?b=a.textContent:"innerText"in a?b=a.innerText.replace(/\r/g,""):d.forEach(v(a.childNodes),function(a,c){b+=A.get(c)}):(3===c||4===c)&&(b=a.nodeValue),b},set:function(a,b){return t(a).appendChild(i.createTextNode(b)),a}},B=function(a,b){return a&&a instanceof B?a:this instanceof B?void this.init(a,b):new B(a,b)};d.mix(B.prototype,{init:function(a,b){var c=[];(d.isElement(a)||d.isWindow(a))&&c.push(a),d.isArray(a)&&(c=d.filter(a,function(a){return d.isElement(a)})),"string"===h(a)&&(b instanceof B?b.each(function(b,d){var e=x.find(a,d);e.length&&(c=c.concat(e))}):c=/^</.test(a)?v(B.createFragment(a).childNodes):x.find(a,b)),this.elements=c},each:function(a){return d.forEach(this.elements,a),this},addClass:function(a){return this.each(function(b,c){y.add(c,a)})},removeClass:function(a){return this.each(function(b,c){y.remove(c,a)})},toggleClass:function(a){return this.each(function(b,c){y.toggle(c,a)})},hasClass:function(a){var b=!1;return this.each(function(c,d){return y.has(d,a)?(b=!0,!1):void 0}),b},html:function(a){var b;return a===c?(b=this.elements[0],b?b.innerHTML:""):this.empty().append(a)},text:function(a){var b;return a===c?(b=this.elements[0],b?A.get(b):""):this.each(function(b,c){A.set(c,a)})},css:function(a,b){var c;return b||"object"===h(a)?this.each(function(c,d){z.set(d,a,b)}):(c=this.elements[0],c?z.get(c,a):"")},get:function(a){return"number"===h(a)?this.elements[a]:this.elements.slice()},eq:function(a){return"number"===h(a)&&this.elements[a]?new B(this.elements[a]):this},find:function(a){return new B(a,this)},isDisplayed:function(a){return this.get(a).clientHeight>0?!0:!1},append:function(a){return this.each(function(b,c){d.isElement(a)?c.appendChild(a):"string"===h(a)?c.appendChild(B.createFragment(a)):a instanceof B&&a.each(function(a,b){c.appendChild(b)})})},appendTo:function(a){return new B(a).append(this),this},prepend:function(a){return this.each(function(b,c){d.isElement(a)?c.insertBefore(a,c.firstChild):"string"===h(a)?c.insertBefore(B.createFragment(a),c.firstChild):a instanceof B&&a.each(function(a,b){c.insertBefore(b,c.firstChild)})})},prependTo:function(a){return new B(a).prepend(this),this},filter:function(a){var b=d.filter(this.elements,function(b,c){return a.call(b,c,b)});return new B(b)},add:function(a){return a instanceof B&&(a=a.get()),new B(this.elements.concat(a))},parent:function(){var a=[];return this.each(function(b,c){c.parentNode&&a.push(c.parentNode)}),new B(a)},empty:function(){return this.each(function(a,b){t(b)})},remove:function(){return this.each(function(){if(new B(this).find("*").add(this).each(function(){u(this)}),this.parentNode)try{this.parentNode.removeChild(this)}catch(a){}})},hide:function(){return this.each(function(a,b){var c=z.get(b,"display");"none"!==c&&(e.set(b,"olddisplay",c),z.set(b,"display","none"))})},show:function(){return this.each(function(a,b){var c=z.get(b,"display");"none"===c&&z.set(b,"display",e.get(b,"olddisplay")||"")})},visibleInViewPort:function(){var a=this.get(0);if(!a)return-1;var b={overlappingBy:function(a,b){var c=a.left,d=a.top,e=a.left+a.width,f=a.top+a.height,g=b.left,h=b.top,i=b.left+b.width,j=b.top+b.height,k=Math.max(0,Math.min(e,i)-Math.max(c,g)),l=Math.max(0,Math.min(f,j)-Math.max(d,h)),m=k*l/(a.height*a.width)||0;return parseFloat(m.toFixed(2))}},c=a.getBoundingClientRect(),d={bottom:Invodo.Env.screen.viewportHeight(),height:Invodo.Env.screen.viewportHeight(),left:0,right:Invodo.Env.screen.viewportWidth(),top:0,width:Invodo.Env.screen.viewportWidth()};return b.overlappingBy(c,d)},toggle:function(){return this.each(function(a,b){var c=new B(b);"none"===z.get(b,"display")?c.show():c.hide()})},children:function(){var a=[];return this.each(function(b,c){a=a.concat(d.filter(v(c.childNodes),function(a){return 1===a.nodeType}))}),new B(a)},length:function(){return this.elements.length},data:function(a,b){return 1===arguments.length?e.get(this.elements[0],a):this.each(function(c,d){e.set(d,a,b)})},on:function(a,b){return this.each(function(c,d){f.on(d,a,b)})},off:function(a,b){return this.each(function(c,d){f.off(d,a,b)})},fire:function(a){return this.each(function(b,c){f.fire(c,a)})},once:function(a,b){return this.each(function(c,d){f.once(d,a,b)})}}),d.forEach({width:"Width",height:"Height"},function(a,b){B.prototype[a]=function(){var a=this.elements[0],c=0;return a&&(c=Math.max.apply(Math,[a["client"+b],a["offset"+b]])),c}}),d.mix(B,{createElement:function(a,b){var c,d,e=i.createElement(a);if(b)for(c in b)if(o(b,c)!==!1)switch(d=b[c],c){case"text":e.appendChild(i.createTextNode(d));break;case"css":z.set(e,d);break;case"innerHTML":e.innerHTML=d;break;case"class":e.className=d;break;case"style":e.style.cssText+=";"+d;break;default:e.setAttribute(c,d)}return e},createFragment:function(a){var b=i.createElement("div"),c=i.createDocumentFragment();return b.innerHTML=a,d.forEach(v(b.childNodes),function(a,b){c.appendChild(b.cloneNode(!0))}),b=null,c},addCSS:function(a,b){var e,f=[];b===c&&(b="screen"),e=B.createElement("style",{type:"text/css",media:b}),i.getElementsByTagName("head")[0].appendChild(e),"msie"===g.browser.engine&&i.styleSheets&&(e=i.styleSheets[i.styleSheets.length-1]),e.addRule?d.forEach(a,function(a,b){d.forEach(b,function(b,c){e.addRule(a,b+":"+c,0)})}):(d.forEach(a,function(a,b){var c=[];d.forEach(b,function(a,b){c.push(a+":"+b)}),f.push(a+"{"+c.join(";")+"}")}),e.appendChild(i.createTextNode(f.join(""))))}}),b.Dom=B}(this,Invodo),function(a,b,c){function d(a,b){return'<meta itemprop="'+a+'" content="'+b+'" />'}var e,f=b.Lang,g=b.Dom,h=a.document,i=h.documentElement,j="xmlns:og",k="//ogp.me/ns#",l="application/x-shockwave-flash",m="meta",n="link",o=(f.normalizeUrl(b.getPodDomain()+"/media/"),g.createElement),p=[],q="";b.SEO={config:function(a){var c=Invodo.getAffiliateConfig(),d=a.pods[0].podId,e=Invodo.Pod.getDescription(d);if(!(f.indexOf(p,d)>-1)){var g=f.map(a.pods[0].frames,function(a){var c=a.previewUrl.replace(/.*?:/g,"");return{videoUrl:f.normalizeUrl(b.getPodDomain()+"/4.0/fl/inplayer.swf")+"?RTMP="+a.encodings[0].rtmp.app+"&filename="+a.encodings[0].rtmp.stream+"&poster="+c,duration:a.duration,width:a.encodings[0].width,height:a.encodings[0].height,thumbnailUrl:c}});c&&"true"==c.og&&b.SEO.addMetaTags(g,e),p.push(d)}},addMetaTags:function(a,b){var c=h.createDocumentFragment();e||(e=h.getElementsByTagName("head")[0]),i.getAttribute(j)||i.setAttribute(j,k),b&&c.appendChild(o(m,{property:"og:description",content:b})),f.forEach(a,function(a,b){c.appendChild(o(n,{rel:"image_src",href:"http:"+b.thumbnailUrl})),c.appendChild(o(n,{rel:"video_src",href:"http:"+b.videoUrl})),c.appendChild(o(m,{name:"medium",content:"video"})),c.appendChild(o(m,{name:"video_height",content:b.height})),c.appendChild(o(m,{name:"video_width",content:b.width})),c.appendChild(o(m,{name:"video_type",content:l})),c.appendChild(o(m,{property:"og:video",content:"http:"+b.videoUrl})),c.appendChild(o(m,{property:"og:video:secure_url",content:"https:"+b.videoUrl})),c.appendChild(o(m,{property:"og:video:type",content:l})),c.appendChild(o(m,{property:"og:video:height",content:b.height})),c.appendChild(o(m,{property:"og:video:width",content:b.width})),"duration"in b&&c.appendChild(o(m,{property:"og:video:duration",content:Math.max(parseInt(b.duration),1)})),b.title&&c.appendChild(o(m,{property:"og:video:title",content:b.title}))}),e.appendChild(c)},getSeoStructDataTags:function(){return q},setSeoStructMetaTags:function(a){var b=Invodo.Pod.get(a),c="";if(b){var e=b.config;if(e&&"frames"in e&&"length"in e.frames&&e.frames.length>0){var f=e.frames[0],g=e.description;try{c+=d("name",e.title),c+=d("description",g),f.seoKeywords&&(c+=d("keywords",f.seoKeywords)),f.transcript&&(c+=d("transcript",f.transcript)),c+=d("bitrate",f.encodings[0].bitrate),c+=d("contentURL",f.encodings[0].http),c+=d("duration",f.duration),c+=d("height",f.encodings[0].height),c+=d("width",f.encodings[0].width),c+=d("thumbnail",f.thumbnailUrl)}catch(h){console.log(h)}q=c}}}}}(this,Invodo),function(a,b){var c,d=this.File={},e=this.Lang,f=(this.Dom,a.document),g="onreadystatechange",h="onload",i="readyState";d.CSS=function(a,d){var e;return d===b&&(d="screen"),c||(c=f.getElementsByTagName("head")[0]),e=f.createElement("link"),e.rel="stylesheet",e.type="text/css",e.media=d,e.href=a,c.appendChild(e),e},d.JS=function(b,d){b=e.normalizeUrl(b);var j;return c||(c=f.getElementsByTagName("head")[0]),j=f.createElement("script"),j.type="text/javascript",j.async=!0,j[h]=j[g]=function(b){var c=j[i];b=b||a.event,("load"===b.type||"loaded"===c||"complete"===c)&&(j[g]=j[h]=null,e.isFunction(d)&&d())},c.appendChild(j),j.src=b,j},d.Image=function(a){var b=new Image;return b.src=a,b},d.getFilenameFromUrl=function(a){return"string"===e.type(a)?a.split("/").pop().split(".").shift():""},d.getQueryStringParams=function(a){var b,c,e={},f=a.substring(1).split("&");for(b=0;b<f.length;b++){c=f[b].split("=");var g=d.sanitizeUserInput(c[0]),h=d.sanitizeUserInput(c[1]);e[g]=h}return e},d.sanitizeUserInput=function(a){return escape(a)}}.call(Invodo,this),function(a,b){var c=b.Lang,d=Array.prototype.slice,e=function(a){var b={};a.on=function(c,d){return b[c]||(b[c]=[]),b[c].push(d),a},a.registerEventListener=function(b,c){return a.on(b,c)},a.off=function(d,e){var f,g=b[d];if(g&&g.length)return void 0===e?b[d]=[]:(f=c.indexOf(g,e),f>-1&&g.splice(f,1)),a},a.unregisterEventListener=function(b,c){return a.off(b,c)},a.once=function(b,c){var d=function(){return this.off(b,d),c.apply(this,arguments)};return a.on(b,d)},a.fire=function(e){var f=b[e],g=d.call(arguments,1);if(f&&f.length)return c.forEach(f,function(b,c){return c.apply(a,g)}),a},a.listeners=function(a){return(b[a]||[]).slice()}};b.EventDispatcher=e}(this,Invodo),Invodo.Conversion=new function(){function a(a,b){Invodo.Module.get("logger").log("Invodo.Conversion",a,b)}this.config=function(a,b,c,d){function e(b){var c;c="function"==typeof d?d():d,this.post(a,c)}var f=document.getElementById(c);f.addEventListener(b,e)},this.send=function(b,c){var d,e,f,g=[];if("cartAdd"===b||"cartRemove"===b||"itemPurchase"===b){d=Invodo.Experiment.getExperimentData();for(e in d)f=d[e],f.experiment&&g.push(f.experiment+"/"+f.branch);g.length&&(c.ex=g.join(","))}switch("bi"in c&&(c.bi=Invodo.Crypto.MD5(c.bi)),b){case"arcadeClick":case"cartAdd":case"cartRemove":case"itemPurchase":case"demoStart":case"demoView":case"demoStep":case"pageInfo":a(b,c);break;default:b.match(/^custom\d{2}$/)?a(b,c):Invodo.Console.warn("Unknown conversion type: "+b)}}},function(){this.Url={removeProtocol:function(a){return a.replace(/^https?:/,"")},wildcardDomain:function(a){var b=a.split(".");return 1===b.length?"":"."+b.slice(b.length-2).join(".")}}}.call(Invodo,this),function(){this.PublishSubscribe={signals:{},subscribe:function(a,b){this.signals[a]||(this.signals[a]=[]),this.signals[a].push(b)},publish:function(a,b){if(this.signals[a])for(var c=this.signals[a],d=0;d<c.length;d++)c[d](b)},remove:function(a,b){if(this.signals[a]){for(var c=[],d=this.signals[a],e=0;e<d.length;e++){var f=b.toString(),g=d[e].toString();g!==f&&c.push(d[e])}this.signals[a]=c}}}}.call(Invodo,this),function(a,b){var c=b.Lang,d=b.Env,e=b.Dom,f=d.flash,g="InvodoSWF_",h=0,i=b.getAffiliateConfig(),j=function(a){var b=c.mix({},j.defaults,a);b.attrs.id||(b.attrs.id=g+h++),b.url+="?r="+ +new Date,f.ActiveX?(b.attrs.classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",b.attrs.codebase="//download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=10,1,0,0",b.params.movie=b.url):(b.attrs.type="application/x-shockwave-flash",b.attrs.data=b.url),b.attrs.hasVersionFail="function(){alert('flash version fail')}",c.isEmptyObject(b.flashvars)===!1&&(b.params.flashvars=function(){var a=[];return c.forEach(b.flashvars,function(b,c){a.push(b+"="+c)}),a.join("&")}()),b.attrs.width=b.width,b.attrs.height=b.height,b.params.bgcolor=i.bgcolor||b.params.bgcolor,this.settings=b};c.mix(j.prototype,{embed:function(a){var b,g=this.settings,h=c.isElement(a)?a:document.getElementById(a),i=[],k=[];if(d.flash.supported&&g.url&&h&&j.hasVersion(g.version)!==!1)return f.ActiveX?(c.forEach(g.attrs,function(a,b){k.push(a+"='"+b+"'")}),c.forEach(g.params,function(a,b){i.push("<param name='"+a+"' value='"+b+"'/>")}),b="<object "+(k.length?" "+k.join(" "):"")+">"+i.join("")+"</object>",h.innerHTML+=b):(b=e.createElement("object",g.attrs),c.forEach(g.params,function(a,c){b.appendChild(e.createElement("param",{name:a,value:c}))}),h.appendChild(b)),h.lastChild},dispose:function(){var a=new e("#"+this.settings.attrs.id);if(a.length())return f.ActiveX?(a.hide(),a=a.get(0),function b(){if(4!==a.readyState)return void setTimeout(b,25);c.forEach(a,function(b,d){c.hasOwn(a,b)&&"function"===c.type(d)&&(a[b]=null)});try{a.parentNode.removeChild(a)}catch(d){}}()):a.remove(),this}}),c.mix(j,{defaults:{url:null,width:"100%",height:"100%",version:"10",flashvars:{},params:{allowScriptAccess:"always",
allowFullScreen:"true",allowNetworking:"all",wmode:"opaque",bgcolor:"#000000"},attrs:{"class":"invodo-swf"}},hasVersion:function(a){var b=c.type(a),e=d.flash,f=e.supported?e.version:!1;if(!f)return!1;if(("number"===b||"string"===b)&&(a=[a,0,0]),"array"===b)for(;a.length<3;)a.push(0);c.forEach(a,function(b,c){a[b]=parseInt(c,10)||0});var g=parseFloat(f[0]+"."+f[1]),h=parseFloat(a[0]+"."+a[1]);return g>=h?g===h?f[2]>=a[2]:!0:!1}}),b.SWF=j}(this,Invodo),function(a,b){var c=b.Lang,d=Invodo.getAffiliateConfig(),e=(d.backcolor,a.document),f=b.Dom,g=b.Env,h=b.EventDispatcher,i=(b.File,d.frontcolor),j=!1,k=d.secondarycolor,l={".invodo-overlay":{position:"fixed","z-index":"5000",top:"0",left:"0",width:"100%",height:"100%"},".invodo-overlay-mask":{height:"100%","background-color":"#fff",opacity:".75",filter:"alpha(opacity=75)"},".invodo-overlay-outerwrap":{position:"absolute",top:"50%",left:"50%","border-radius":"8px","-moz-border-radius":"8px","-webkit-border-radius":"8px","box-shadow":"0 0 9px #000","-moz-box-shadow":"0 0 9px #000","-webkit-box-shadow":"0 0 9px #000"},".invodo-overlay-outerwrap-quirks-mode":{filter:"progid:DXImageTransform.Microsoft.Shadow(color=#CCCCCC,direction=125,strength=3)",position:"absolute",top:g.screen.viewportHeight()/2+"px",left:g.screen.viewportWidth()/2+"px"},".invodo-overlay-header":{height:"20px",background:"#000 url(//e.invodo.com/4.0/i/viewer_header_bg.png) repeat-x 0 0","border-color":"#000","-moz-border-radius":"8px 8px 0 0","-webkit-border-radius":"8px 8px 0 0","border-radius":"8px 8px 0 0"},".invodo-overlay-brand":{position:"relative",top:"0",left:"0",height:"100%","background-color":"transparent","background-repeat":"no-repeat","background-position":"8px 0"},".invodo-overlay-content":{overflow:"hidden","background-color":"#000"},".invodo-overlay-close-btn":{position:"absolute",right:"8px",top:"0","font-size":"16px","font-weight":"bold",cursor:"pointer",color:"#"+i,"text-shadow":"#444 1px 1px 2px","line-height":"20px"},".invodo-overlay-close-btn:hover":{color:"#"+k},".invodo-overlay-footer":{height:"20px",background:"#000 url(//e.invodo.com/4.0/i/viewer_footer_bg.png) repeat-x 0 50%","border-color":"#000","-moz-border-radius":"0 0 8px 8px","-webkit-border-radius":"0 0 8px 8px","border-radius":"0 0 8px 8px"}},m={CLOSED:"closed",OPEN:"open"},n={closeOnEscape:!0,closeOnClick:!0,affiliateColor:null,affiliateLogo:null},o=function(){r===!1&&(new f(e).on("keydown",q),r=!0)},p=function(){r===!0&&(new f(e).off("keydown",q),r=!1)},q=function(a){27===a.keyCode&&s.close()},r=!1,s={state:m.CLOSED,els:{},settings:n,options:function(a){return this.settings=Invodo.Lang.mix({},n,this.settings,a),this},open:function(a,b,d){var e=this,f=this.els,g=this.settings;return this.state===m.OPEN?this:(this._render(),f.closeButton.on("click",function(a){a.preventDefault(),e.close()}),g.closeOnClick&&f.mask.once("click",function(a){a.preventDefault(),e.close()}),g.closeOnEscape&&o(),g.affiliateColor&&f.header.add(f.footer).add(f.content).css("background-color","#"+g.affiliateColor),g.affiliateLogo&&f.header.find(".invodo-overlay-brand").css("background-image","url("+g.affiliateLogo+")"),c.isElement(d)?f.content.html(d):c.isFunction(d)&&d.call(f.content,f.content),this.resize(a,b),f.root.show().addClass("invodo-overlay-active"),this.fire("open"),this.state=m.OPEN,f.closeButton.elements[0].innerHTML="&times;",this)},close:function(){var a=this.els;return this.state===m.CLOSED?this:(this.fire("beforeclose"),a.root.hide().removeClass("invodo-overlay-active"),a.content.empty(),a.closeButton.off("click"),this.settings.closeOnClick&&a.mask.off("click"),this.settings.closeOnEscape&&p(),this.fire("close"),this.state=m.CLOSED,this)},getContainer:function(){return this.els.content()},resize:function(a,b){var c=30,d=20,e=parseInt(b),f=parseInt(a),h=this.els,i={width:g.screen.viewportWidth(),height:g.screen.viewportHeight(),docHeight:g.screen.documentHeight()},j=d+c,k=0,l=i.height-40-j,m=i.width-40;return f>m&&(k=m/f,f*=k,e*=k),e>l&&(k=l/e,e*=k,f*=k),h.mask.css("height",i.docHeight+"px"),h.content.css({height:e+"px",width:f+"px"}),h.outerWrap.css({width:f+"px","margin-top":"-"+(e+j)/2+"px","margin-left":"-"+f/2+"px"}),this.fire("resize",f,e),this},_render:function(){var a=this.els,b=null,c=!1;this.settings;"standard"==g.screen.mode?b=new f(this.template):(c=!0,b=new f(this.templateQuirksMode)),j||(a.root=b,a.mask=b.find(".invodo-overlay-mask"),c?a.outerWrap=b.find(".invodo-overlay-outerwrap-quirks-mode"):a.outerWrap=b.find(".invodo-overlay-outerwrap"),a.content=b.find(".invodo-overlay-content"),a.header=b.find(".invodo-overlay-header"),a.closeButton=b.find(".invodo-overlay-close-btn"),a.footer=b.find(".invodo-overlay-footer"),f.addCSS(l),b.hide().appendTo("body"),j=!0)},destroy:function(){this.els.root.remove(),this.fire("destroy")},template:["<div class='invodo-overlay'>","<div class='invodo-overlay-mask'></div>","<div class='invodo-overlay-outerwrap'>","<div class='invodo-overlay-header'>","<div class='invodo-overlay-brand'></div>","<div class='invodo-overlay-close-btn' title='Close'></div>","</div>","<div id='invodo-overlay-content-id' class='invodo-overlay-content'></div>","<div class='invodo-overlay-footer'></div>","</div>","</div>"].join(""),templateQuirksMode:["<div class='invodo-overlay'>","<div class='invodo-overlay-mask'></div>","<div class='invodo-overlay-outerwrap-quirks-mode'>","<div class='invodo-overlay-header'>","<div class='invodo-overlay-brand'></div>","<div class='invodo-overlay-close-btn' title='Close'></div>","</div>","<div id='invodo-overlay-content-id' class='invodo-overlay-content'></div>","<div class='invodo-overlay-footer'></div>","</div>","</div>"].join("")};h(s),b.Overlay=s}(this,Invodo),function(){var a=this.Lang,b=[];this.Module={add:function(c,d){var e=null;return c&&a.isFunction(c)?d?(e=new c(d),b.push(e),e):(Invodo.Console.log("Missing required argument: namespace"),e):(Invodo.Console.log("Missing required argument: module"),e)},get:function(c){var d=null;return a.forEach(b,function(a,b){return b.getId()===c?(d=b,!1):void 0}),d},has:function(c){var d=!1;return a.forEach(b,function(a,b){return b.getId()===c?(d=!0,!1):void 0}),d},remove:function(c){var d=!1;return a.forEach(b,function(a,e){return e.getId()===c?(b.splice(a,1),d=!0,!1):void 0}),d}}}.call(Invodo),function(a,b){function c(){var a=o();b.Lang.isEmptyObject(a)||b.Lang.forEach(a,function(c,d){return 2!==c.split("/").length?(a={},b.Cookie.del(v),b.Visitor.resetVisitorId(),!1):void 0})}function d(a,c){var d=c.choice.distributions,e=b.Lang.filter(d,function(b){return b.value===a});return e[0]}function e(a,b){var c={},d=!1;return a=s(a),b&&"dist"in b&&("random"in b.dist&&(c=b.dist.random[a]),"choice"in b.dist&&(c=b.dist.choice[a]),d={experiment:c.dist.experimentDurableId,branch:c.dist.constant,viewer:"novideo"!==c.dist.constant}),d}function f(){var a=!1,b=Invodo.File.getQueryStringParams(window.location.search);return"invodoBranch"in b&&(a=b.invodoBranch),a}function g(a){return{branch:a.constant}}function h(a){for(var b=a.dist.random,c=[],d=0;d<b.length;d++){var e=b[d];c.push({weight:e.weight,choice:e.dist.constant})}return c}function i(a){return a?a.dist.experimentDurableId:"none"}function j(a,b,c){return{experiment:a,branch:b,viewer:c}}function k(a){var b;if(a.choice){b="ab";for(var c=a.choice.distributions,d=0;d<c.length;d++)for(var e,f=c[d],g=0;g<f.dist.random.length;g++)e=f.dist.random[g].dist.constant,"novideo"===e&&(b="video/novideo")}else b="constant";return b}function l(a){return{experiment:a,branch:"novideo",viewer:!1}}function m(a){for(var b=r(a),c=Invodo.Math.getRandomInt(b),d=a.length,e=0;d>e;e++){if(c<a[e].weight)return a[e];c-=a[e].weight}}function n(a){return b.getAffiliate()+"/"+a}function o(){var a=b.Cookie.get(v);return a=a?b.JSON.parse(a):!1}function p(a,b){var c=a.choice.distributions[0].dist.random[0].dist.constant;return{experiment:b,branch:c,viewer:!0}}function q(){var a,b=o();if(b)for(var c in b)switch(b[c].viewer){case!0:a=!0;break;case!1:a=!1;break;default:a=void 0}else a=void 0;return a}function r(a){for(var b=a.length,c=0,d=0;b>d;d++)c+=parseInt(a[d].weight,10);return c}function s(a){var b;switch(a){case"a":case"A":b=0;break;case"b":case"B":b=1;break;default:b=0}return b}function t(a,b){var c=(f(),m(h(a)).choice);return result=j(b,c,"novideo"!==c),result}var u=b.getAffiliate(),v="invodoExperiment",w=function(){var a=new Date;return a.setFullYear(a.getFullYear()+10),a}();c(),b.Experiment={getExperimentData:function(a){var c=o();return a?c[b.getAffiliate()+"/"+a]||{experiment:null,branch:a,viewer:!0}:c},run:function(c){var h=c.cpd;if(!h.choice&&h.constant)return h.constant;var j,m=k(h),r=q(),s=d(u,h),x=i(s),y=h.choice["default"].constant,z=o(),A=b.getAffiliate()+"/"+y,B=z[A];if(s){var C=f();if(C)j=e(C,s);else switch(r){case void 0:switch(m){case"constant":j=g(h);break;case"ab":j=t(s,x);break;case"video/novideo":j=t(s,x)}break;case!0:switch(m){case"constant":j=g(h);break;case"ab":if(B){z=o();for(var D in z)D===A&&(j=z[A])}else j=t(s,x);break;case"video/novideo":j=p(h,x);break;default:Invodo.Console.log("Warning: Invodo.Experiment.run found no match")}break;case!1:switch(m){case"constant":j=g(h);break;case"ab":j=l(x);break;case"video/novideo":j=l(x);break;default:Invodo.Console.log("Warning: Invodo.Experiment.run found no match")}break;default:Invodo.Console.log("Warning: Invodo.Experiment.run found no match")}var E={};E[n(y)]=j,b.Cookie.set(v,b.JSON.stringify(E),{expires:w,hostname:Invodo.Url.wildcardDomain(a.location.hostname)}),Invodo.Module.get("logger").log("Invodo.Experiment","experimentChosen",{ex:j.experiment+"/"+j.branch})}else j={branch:y,experiment:"none",viewer:!0};return j}}}(this,Invodo),function(a){var b=this.Lang,c=[],d="InvodoWidget_",e=0;this.Src.WidgetInterface={data:function(a){},hide:function(){},getId:function(){},getType:function(){},listensTo:function(a){},receiveUpdate:function(a){},sendUpdate:function(a){},setParent:function(a){},setStyle:function(a,b){},show:function(){}},this.Src.WidgetConfig={data:"",listensTo:"",parentDomId:"",type:"",widgetId:""},this.Tool.WidgetHelper={test:function(){Invodo.Console.log("WidgetHelper.test")}},this.Widget={add:function(a){if(!a)return!1;var f=!1,g=null;if(a.widgetId||(a.widgetId=d+e++),b.forEach(c,function(b,c){return c.getId()===a.widgetId?(f=!0,!1):void 0}),f)return!1;try{var h=a.type;"string"==typeof h&&(h=h.toLowerCase()),a.sku&&(a.mpd=a.sku),a.refId&&(a.mpd=a.refId),a.refid&&(a.mpd=a.refid);try{switch(h){case"html5videoplayer":g=new Invodo.Src.Widget.Html5Video(a.parentDomId,a.widgetId,a.video,a.poster,a.config||{});break;case"inplayer":g=new Invodo.Src.Widget.InPlayer(a.parentDomId,a.widgetId,a.podId||"",a.mpd||"",a.mode,a.listensTo,a.swfPath||"",a.autoplay,a.logoUrl||"",a.chromelessmode||"");break;case"caption":g=new Invodo.Src.Widget.Caption(a.parentDomId,a.widgetId,a.data,a.listensTo);break;case"videoplayer":g=new Invodo.Src.Widget.VideoPlayer(a.parentDomId,a.widgetId,a.mpd,a.mode,a.listensTo);break;case"cta":g=new Invodo.Src.Widget.Cta(a);break;case"interactiveplayer":case"spin":g=new Invodo.Src.Widget.InteractivePlayer(a.parentDomId,a.widgetId,a.podId,a.mpd,a.httpBase,a.friction,a.introSpin,a.showControls,a.homeAddress,a.preloadAll,a.matrix_direction);break;case"arcade":g=new Invodo.Src.Widget.Arcade(a.parentDomId,a.widgetId,a.podId,a.mpd,a.httpBase);break;default:g=new h(a)}}catch(i){return Invodo.Console.log("Widget type not found: "+a.type),!1}a.onpodload&&(g.onpodload=a.onpodload)}catch(i){Invodo.Console.warn(i.constructor+": "+i.message)}return g&&c.push(g),g||!1},call:function(a,b,c){var d=this.get(a),e=null;return d&&(e=d[b](c)),e},get:function(a){var d=!1;return b.forEach(c,function(b,c){return c.getId()===a?(d=c,!1):void 0}),d},getAll:function(){return c.slice()},update:function(a){b.forEach(c,function(b,c){c.receiveUpdate(a)})},remove:function(a){var d=!1;return b.forEach(c,function(b,e){return e.getId()===a?(d=!0,e.remove(),c.splice(b,1),!1):void 0}),d},validate:function(a,c){b.forEach(Invodo.Src.WidgetInterface,function(d){a&&b.isFunction(a[d])||Invodo.Console.log(c+" failed to implement method: "+d)})}}}.call(Invodo,this),Invodo.Src.Widget.Mixin=function(a){this.getId=function(){return a.widgetId},this.getListensTo=function(){return a.listensTo},this.getParentDomId=function(){return a.parentDomId},this.getType=function(){return a.type},this.hide=function(){return getDom().style.display="none",this},this.receiveUpdate=function(b){for(var c in a.listensTo){var d=a.listensTo[c];b.widgetId==d&&"show"==b.data&&this.show()}},this.registerEventListener=function(a,b){return callbacks.push({eventName:a,callback:b}),this},this.setParent=function(b){a.parentDomId=b,getParentDom().appendChild(getDom())},this.setStyle=function(a,b){getDom().style[a]=b},this.show=function(){return getDom().style.display="block",this},this.unregisterEventListener=function(a,b){for(var c=0;c<callbacks.length;c++)callbacks[c].eventName===a&&callbacks[c].callback===b&&callbacks.splice(c,1);return this}},function(a,b){var c=this.Lang,d=this.File,e=a.encodeURIComponent,f=null,g=[],h=[],i=function(a){for(var b=131,c=0,d=0,e=a.length;e>d;d++)c=(c*b%65535+a.charCodeAt(d))%65535;return Math.abs(c%8)},j=function(a){for(var b,d=0;d<g.length;d++)b=g[d],c.isFunction(b.notify)&&b.notify(a)},k=function(a){setTimeout(function(){new d.JS(a)},20)};this.Pod={init:function(){f=Invodo.getPodDomain()+"/4.0/pl/"},addByPodId:function(a){var b=i(a)+"/"+a.charAt(a.length-1)+"/"+a,c=f+b+".js";this.isRegistered(a)||h.push({config:null,loaded:!1,pod:a,podPath:c,mpd:"",mpdPath:""}),k(c)},isRegistered:function(a){for(var b=!1,c=0;c<h.length;c++)if(h[c].pod==a){b=!0;break}return b},register:function(a,b,c){h.push({config:null,loaded:!1,pod:a,podPath:"localhost",mpd:b,mpdPath:c})},addByMpd:function(a){var b=e(Invodo.getAffiliate()),c=e(a),d=i(b+"/"+c+".js"),g=e(b)+"/"+e(c)+".js",j=f+d+"/"+g;h.push({config:null,loaded:!1,pod:"",podPath:"",mpd:a,mpdPath:j}),k(j)},addByRefId:function(a){return this.addByMpd(a)},registerObserver:function(a){-1===c.indexOf(g,a)&&g.push(a)},getDescription:function(a){var b,c="";return a&&(b=this.get(a),b&&b.config&&b.config.description&&(c=b.config.description)),c},getExperimentData:function(a){return Invodo.Experiment.getExperimentData(a)},config:function(a){Invodo.Pod.getPresentation(a),Invodo.Pod.migrate(a,Invodo.getAffiliateConfig());var b,d,e,f,g,i,k=a.sku||a.customId,l=a.pods,m=a.carousel,n=(a.cpd,!1),o=!1,p=a.interactive||null,q=a.arcade||null;if(f=Invodo.Experiment.run(a),g=f.branch,"novideo"!==g){i=c.filter(l,function(a){return a.podId===g})[0];for(var r=0;r<h.length;r++)if(b=h[r],b.loaded!==!0){for(var s=0;s<l.length;s++)if(d=l[s],e=d.podId,n=b.pod&&b.pod===e,o=b.mpd&&b.mpd===k,n||o){b.config=i||d,b.config.carousel=m,b.config.interactive=p,b.config.arcade=q,b.loaded=!0,b.pod=e,j(e);break}if(0===r&&Invodo.SEO.config(a),b.loaded)break}}},get:function(a){for(var b=null,c=0;c<h.length;c++){var d=h[c];if(d.pod===a){b=d;break}}return b},getCustomData:function(a,b){var c={};if(a){var d=this.get(a);if(d&&"config"in d&&d.config&&"customData"in d.config&&(c=d.config.customData),b)for(var e=0;e<c.length;e++)try{var f=c[e],g=f[0],h=f[1];g==b&&(c=h)}catch(i){console.log(i.stack)}}return c},getCustomDataByMpd:function(a,b){var c={};if(a){var d=this.getByMpd(a);if(d&&"config"in d&&d.config&&"customData"in d.config&&(c=d.config.customData),b)for(var e=0;e<c.length;e++)try{var f=c[e],g=f[0],h=f[1];g==b&&(c=h)}catch(i){console.log(i.stack)}}return c},getCustomDataByRefId:function(a,b){var c={};if(a){var d=this.getByRefId(a);if(d&&"config"in d&&d.config&&"customData"in d.config&&(c=d.config.customData),b)for(var e=0;e<c.length;e++)try{var f=c[e],g=f[0],h=f[1];g==b&&(c=h)}catch(i){console.log(i.stack)}}return c},getCustomDataKeys:function(a){var b={},c=[];if(a){var d=this.get(a);d&&"config"in d&&d.config&&"customData"in d.config&&(b=d.config.customData);for(var e=0;e<b.length;e++){var f=b[e];c.push(f[0])}}return c},getCustomDataKeysByMpd:function(a){var b={},c=[];if(a){var d=this.getByMpd(a);d&&"config"in d&&d.config&&"customData"in d.config&&(b=d.config.customData);for(var e=0;e<b.length;e++){var f=b[e];c.push(f[0])}}return c},getCustomDataKeysByRefId:function(a){var b={},c=[];if(a){var d=this.getByRefId(a);d&&"config"in d&&d.config&&"customData"in d.config&&(b=d.config.customData);for(var e=0;e<b.length;e++){var f=b[e];c.push(f[0])}}return c},getByMpd:function(a){for(var b=null,c=0;c<h.length;c++){var d=h[c];if(d.mpd===a){b=d;break}}return b},getByRefId:function(a){return this.getByMpd(a)},getAll:function(){return h.slice()},getPoster:function(a,c){var d;return c===b&&(c=0),d=this.get(a).config.frames[c],d?d.previewUrl.replace(/.*?:/g,""):!1},getPosterByMpd:function(a,c){var d,e;return c===b&&(c=0),d=this.getByMpd(a),d&&d.config&&(e=d.config.frames[c])?e.previewUrl.replace(/.*?:/g,""):!1},getPosterByRefId:function(a,b){return this.getPosterByMpd(a,b)},getVideo:function(a,b,c){var d,e;return d=this.get(a),d&&d.config&&(e=d.config.frames[b||0])?e.encodings[c||0].http.replace(/.*?:/g,""):!1},getVideoByMpd:function(a,b,c){var d,e;return d=this.getByMpd(a),d&&d.config&&(e=d.config.frames[b||0])?e.encodings[c||0].http.replace(/.*?:/g,""):!1},getVideoByRefId:function(a,b,c){return this.getVideoByMpd(a,b,c)},getTitle:function(a,b){var c,d,e="",f=parseInt(b);return c=this.get(a),c&&c.config&&(f>=0?(d=c.config.frames[f],d&&d.title&&(e=d.title)):c.config.title&&(e=c.config.title)),e},getTitleByMpd:function(a,b){var c,d,e="";return c=Invodo.Pod.getByMpd(a),c&&c.pod&&(d=c.pod,e=Invodo.Pod.getTitle(d,b)),e},getTitleByRefId:function(a,b){return this.getTitleByMpd(a,b)},getTranscript:function(a,b){var c,d,e="";return c=this.get(a),c&&c.config&&(d=c.config.frames[b||0],d&&d.transcript&&(e=d.transcript)),e},getTranscriptByMpd:function(a,b){var c,d,e="";return c=this.getByMpd(a),c&&c.config&&(d=c.pod,e=this.getTranscript(d,b||0)),e},getTranscriptByRefId:function(a,b){return this.getTranscriptByMpd(a,b||0)},getWidth:function(a,c,d){var e,f;return c===b&&(c=0),d=d||0,e=this.get(a),e&&e.config&&(f=e.config.frames[c])?parseInt(f.encodings[d].width):!1},getWidthByMpd:function(a,c,d){var e,f;return c===b&&(c=0),d=d||0,e=this.getByMpd(a),e&&e.config&&(f=e.config.frames[c])?parseInt(f.encodings[d].width):!1},getWidthByRefId:function(a,b,c){return this.getWidthByMpd(a,b,c)},getHeight:function(a,c,d){var e,f;return c===b&&(c=0),d=d||0,e=this.get(a),e&&e.config&&(f=e.config.frames[c])?parseInt(f.encodings[d].height):!1},getHeightByMpd:function(a,c,d){var e,f;return c===b&&(c=0),d=d||0,e=this.getByMpd(a),e&&e.config&&(f=e.config.frames[c])?parseInt(f.encodings[d].height):!1},getHeightByRefId:function(a,b,c){return this.getHeightByMpd(a,b,c)},getDuration:function(a,c){var d,e;return c===b&&(c=0),d=this.get(a),d&&d.config&&(e=d.config.frames[c])?parseInt(e.duration):!1},getDurationByMpd:function(a,c){var d,e;return c===b&&(c=0),d=this.getByMpd(a),d&&d.config&&(e=d.config.frames[c])?parseInt(e.duration):!1},getDurationByRefId:function(a,b){return this.getDurationByMpd(a,b)},getDurableId:function(a,c){var d,e;return c===b&&(c=0),d=this.get(a),d&&d.config&&(e=d.config.frames[c])?e.durableId:!1},getDurableIdByMpd:function(a,c){var d,e;return c===b&&(c=0),d=this.getByMpd(a),d&&d.config&&(e=d.config.frames[c])?e.durableId:!1},getDurableIdByRefId:function(a,b){return this.getDurableIdByMpd(a,b)},getThumbnail:function(a,c){var d,e;return c===b&&(c=0),d=this.get(a),d&&d.config&&(e=d.config.frames[c])?e.thumbnailUrl.replace(/.*?:/g,""):!1},getThumbnailByMpd:function(a,c){var d,e;return c===b&&(c=0),d=this.getByMpd(a),d&&d.config&&(e=d.config.frames[c])?e.thumbnailUrl.replace(/.*?:/g,""):!1},getThumbnailByRefId:function(a,b){return this.getThumbnailByMpd(a,b)},load:function(a,b,c){var d;a.pod?d=Invodo.Pod.get(a.pod):a.mpd&&(d=Invodo.Pod.getByMpd(a.mpd)),d&&d.loaded?setTimeout(function(){b(d)},0):c?b(c()):new l(a,b,!!d)}};var l=function(a,b,c){function d(a){g=!0,f.notify=function(){},b(a)}function e(a){a.pod?Invodo.Module.get("logger").log(a.widgetId,"podRequest",{podId:a.pod}):a.mpd&&Invodo.Module.get("logger").log(a.widgetId,"podRequest",{mpd:a.mpd})}var f=this,g=!1;e(a),this.notify=function(b){var c;g||(a.pod&&a.pod===b?(c=Invodo.Pod.get(b),c&&d(c)):a.mpd&&(c=Invodo.Pod.getByMpd(a.mpd),c&&c.pod===b&&d(c)))},Invodo.Pod.registerObserver(this),c===!1&&(a.pod?Invodo.Pod.addByPodId(a.pod):a.mpd&&Invodo.Pod.addByMpd(a.mpd))};this.Pod.registerObserver(Invodo)}.call(Invodo,this),function(a){var b=a.Pod;b.version="13.1.2",b.migrate=function(a,b){var f=[];f=a.hasOwnProperty("version")?[e,d]:[c,e];for(var g=0;g<f.length;g++)a=f[g](a,b);return a};var c=function(a,c){for(var d=0;d<a.pods.length;d++)for(var e=a.pods[d].frames,f=0;f<e.length;f++){a.pods[d].frames[f].hasOwnProperty("encodings")&&a.pods[d].frames[f].encodings instanceof Array||(a.pods[d].frames[f].encodings=[]);for(var g=e[f].encodings,h=0;h<g.length;h++){switch(g[h].http=c.httpBase+g[h].HTTP+"/"+g[h].filename,g[h].rtmp={app:c.rtmpBase+g[h].RTMP,stream:g[h].filename},Number(g[h].type)){case 360:g[h].width=640,g[h].height=360;break;case 540:g[h].width=960,g[h].height=540;break;case 720:g[h].width=1280,g[h].height=720;break;case 1080:g[h].width=1920,g[h].height=1080;break;default:"mobile"===g[h].type||"other"===g[h].type?(g[h].width=1920,g[h].height=1080):(g[h].width=480,g[h].height=270)}delete g[h].type,delete g[h].RTMP,delete g[h].HTTP,delete g[h].filename,g[h].bitrate=0,g[h].id=String(Number(h)+1)}var i=Number(a.pods[d].frames[f].width),j=Number(a.pods[d].frames[f].height),k=String(a.pods[d].frames[f].HTTP),l=String(a.pods[d].frames[f].RTMP),m=String(a.pods[d].frames[f].filename);a.pods[d].frames[f].duration=Number(a.pods[d].frames[f].duration),a.pods[d].frames[f].original_filename="",a.pods[d].frames[f].previewUrl=c.imageBase+String(a.pods[d].frames[f].previewUrl),a.pods[d].frames[f].thumbnailUrl=c.imageBase+String(a.pods[d].frames[f].thumbnailUrl),a.pods[d].frames[f].defaultEncoding="0",a.pods[d].frames[f].encodings.unshift({bitrate:0,id:"0",width:i,height:j,label:"270p",http:String(c.httpBase)+k+"/"+a.pods[d].frames[f].filename,rtmp:{app:c.rtmpBase+l,stream:m}}),delete e[f].width,delete e[f].height,delete e[f].RTMP,delete e[f].HTTP,delete e[f].filename}return a.version=b.version,a},d=function(a){return a},e=function(a){for(var b=0;b<a.pods.length;b++)for(var c=a.pods[b].frames,d=0;d<c.length;d++){c[d].duration=parseInt(c[d].duration);for(var e=c[d].encodings,f=0;f<e.length;f++)e[f].width=parseInt(e[f].width),e[f].height=parseInt(e[f].height),e[f].bitrate=parseInt(e[f].bitrate),e[f].width=e[f].width<=0?480:e[f].width,e[f].height=e[f].height<=0?270:e[f].height;e.sort(function(a,b){return a.height<b.height?-1:a.height>b.height?1:0})}return a};return b}.call(this,Invodo),function(a){var b=a.Pod;return b.getPresentation=function(a){if(!("presentations"in a))return a;var b=[];if("cpd"in a){var c=a.defaultPresentation;b=a.presentations;for(var d,e=0;i<b.length;e++)d=b[e],d.presentationId==c?d.cpd=a.cpd:d.cpd={constant:d.presentationId}}for(var f,g=a.defaultPresentation&&a.defaultPresentation,h=0;h<b.length;h++)b[h].presentationId&&b[h].presentationId===g&&(f=b[h]);f||(f=b[0]),delete a.presentations,"defaultPresentation"in a&&delete a.defaultPresentation;for(var i in f)a[i]=f[i];return a},b}.call(this,Invodo),function(a,b){var c=b.Lang,d=2e3,e=!1,f=(b.Dom,b.Visitor,b.Storage),g="eventBuffer",h=(new Date).getTime(),i=0,j=function(a,b,c,e,f){var g=(new Date).getTime();this.c=i++,this.sid=a,this.et=b,this.ts=g,this.tss=g-h;for(var j in c)this[j]=encodeURIComponent(c[j]);var k=e+f(this);k.length>d&&"re"in this&&(this.re=""),k=e+f(this),k.length>d&&"ua"in this&&(this.ua=""),"timePlayed"===b&&(this.tm=Math.round(parseFloat(c.tm)))};b.Src.Module.Logger=function(b){function h(){t=!0,k(),m(),q=setInterval(m,5e3)}function i(){var a=Invodo.getAffiliate(),b=Invodo.getPageViewId(),c=Invodo.Visitor.getSessionId(),d=Invodo.Visitor.getVisitorId(),e="1.0",f=(new Date).getTimezoneOffset()/60,g=Invodo.Cookie.enabled()?1:0,h="ak="+a+"&pid="+b+"&bid="+c+"&fv="+e+"&vid="+d+"&tz="+f+"&ck="+g;return h}function k(){var a=f.get(g);if(a){c.isArray(a)||(a=[a]);for(var b=0,d=a.length;d>b;b++)o(a[b]);f.del(g),f.save()}}function l(){var a=i(),b=a,c="",e=[];if(clearInterval(q),s.length&&f.enabled()){for(;s.length;){var h=s[0],j=n(h);c=b+j,c.length>=d?(e.push(c),b=a):b=c,s.shift()}b!=a&&e.push(b),f.set(g,e),f.save()}}function m(){if(t&&0!==s.length){for(var a=[],b=i(),c=b,e="",f=0;f<s.length;f++){var g=s[f],h=n(g);e=c+h,e.length>=d?(a.push(e),c=b):c=e,s.splice(f,1),f--}for(c!=b&&a.push(c);a.length;){var j=a[0];o(j),a.shift()}s.length>0&&m()}}function n(a){var b="",c=a.c;for(var d in a)"c"!==d&&(b+="&e"+c+"["+d+"]="+a[d]);return b}function o(a){var b=new Image;b.src=r+"?"+a}var p=this,q=null,r=Invodo.getLogDomain()+"/log2",s=[],t=!1;Invodo.EventDispatcher(p),"complete"===document.readyState?h():Invodo.Event.once(a,"load",h),Invodo.Event.once(a,"unload",l),p.getDebug=function(){return e},p.setDebug=function(a){e=a},p.getId=function(){return b},p.isEmpty=function(){return 0===s.length},p.log=function(a,b,c){var d=new j(a,b,c,i(),n);switch(s.push(d),p.fire(b,d),b){case"pageInfo":case"pageView":case"itemPurchase":case"cartAdd":case"cartRemove":m()}if(e){var f=b;for(var g in c)f+="\n "+g+":"+c[g];Invodo.Console.log(f)}return d},p.setUrl=function(a){r=a}}}(this,Invodo),function(){var a=a||function(a,b){var c={},d=c.lib={},e=function(){},f=d.Base={extend:function(a){e.prototype=this;var b=new e;return a&&b.mixIn(a),b.hasOwnProperty("init")||(b.init=function(){b.$super.init.apply(this,arguments)}),b.init.prototype=b,b.$super=this,b},create:function(){var a=this.extend();return a.init.apply(a,arguments),a},init:function(){},mixIn:function(a){for(var b in a)a.hasOwnProperty(b)&&(this[b]=a[b]);a.hasOwnProperty("toString")&&(this.toString=a.toString)},clone:function(){return this.init.prototype.extend(this)}},g=d.WordArray=f.extend({init:function(a,c){a=this.words=a||[],this.sigBytes=c!=b?c:4*a.length},toString:function(a){return(a||i).stringify(this)},concat:function(a){var b=this.words,c=a.words,d=this.sigBytes;if(a=a.sigBytes,this.clamp(),d%4)for(var e=0;a>e;e++)b[d+e>>>2]|=(c[e>>>2]>>>24-8*(e%4)&255)<<24-8*((d+e)%4);else if(65535<c.length)for(e=0;a>e;e+=4)b[d+e>>>2]=c[e>>>2];else b.push.apply(b,c);return this.sigBytes+=a,this},clamp:function(){var b=this.words,c=this.sigBytes;b[c>>>2]&=4294967295<<32-8*(c%4),b.length=a.ceil(c/4)},clone:function(){var a=f.clone.call(this);return a.words=this.words.slice(0),a},random:function(b){for(var c=[],d=0;b>d;d+=4)c.push(4294967296*a.random()|0);return new g.init(c,b)}}),h=c.enc={},i=h.Hex={stringify:function(a){var b=a.words;a=a.sigBytes;for(var c=[],d=0;a>d;d++){var e=b[d>>>2]>>>24-8*(d%4)&255;c.push((e>>>4).toString(16)),c.push((15&e).toString(16))}return c.join("")},parse:function(a){for(var b=a.length,c=[],d=0;b>d;d+=2)c[d>>>3]|=parseInt(a.substr(d,2),16)<<24-4*(d%8);return new g.init(c,b/2)}},j=h.Latin1={stringify:function(a){var b=a.words;a=a.sigBytes;for(var c=[],d=0;a>d;d++)c.push(String.fromCharCode(b[d>>>2]>>>24-8*(d%4)&255));return c.join("")},parse:function(a){for(var b=a.length,c=[],d=0;b>d;d++)c[d>>>2]|=(255&a.charCodeAt(d))<<24-8*(d%4);return new g.init(c,b)}},k=h.Utf8={stringify:function(a){try{return decodeURIComponent(escape(j.stringify(a)))}catch(b){throw Error("Malformed UTF-8 data")}},parse:function(a){return j.parse(unescape(encodeURIComponent(a)))}},l=d.BufferedBlockAlgorithm=f.extend({reset:function(){this._data=new g.init,this._nDataBytes=0},_append:function(a){"string"==typeof a&&(a=k.parse(a)),this._data.concat(a),this._nDataBytes+=a.sigBytes},_process:function(b){var c=this._data,d=c.words,e=c.sigBytes,f=this.blockSize,h=e/(4*f),h=b?a.ceil(h):a.max((0|h)-this._minBufferSize,0);if(b=h*f,e=a.min(4*b,e),b){for(var i=0;b>i;i+=f)this._doProcessBlock(d,i);i=d.splice(0,b),c.sigBytes-=e}return new g.init(i,e)},clone:function(){var a=f.clone.call(this);return a._data=this._data.clone(),a},_minBufferSize:0});d.Hasher=l.extend({cfg:f.extend(),init:function(a){this.cfg=this.cfg.extend(a),this.reset()},reset:function(){l.reset.call(this),this._doReset()},update:function(a){return this._append(a),this._process(),this},finalize:function(a){return a&&this._append(a),this._doFinalize()},blockSize:16,_createHelper:function(a){return function(b,c){return new a.init(c).finalize(b)}},_createHmacHelper:function(a){return function(b,c){return new m.HMAC.init(a,c).finalize(b)}}});var m=c.algo={};return c}(Math);!function(b){function c(a,b,c,d,e,f,g){return a=a+(b&c|~b&d)+e+g,(a<<f|a>>>32-f)+b}function d(a,b,c,d,e,f,g){return a=a+(b&d|c&~d)+e+g,(a<<f|a>>>32-f)+b}function e(a,b,c,d,e,f,g){return a=a+(b^c^d)+e+g,(a<<f|a>>>32-f)+b}function f(a,b,c,d,e,f,g){return a=a+(c^(b|~d))+e+g,(a<<f|a>>>32-f)+b}for(var g=a,h=g.lib,i=h.WordArray,j=h.Hasher,h=g.algo,k=[],l=0;64>l;l++)k[l]=4294967296*b.abs(b.sin(l+1))|0;h=h.MD5=j.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(a,b){for(var g=0;16>g;g++){var h=b+g,i=a[h];a[h]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}var g=this._hash.words,h=a[b+0],i=a[b+1],j=a[b+2],l=a[b+3],m=a[b+4],n=a[b+5],o=a[b+6],p=a[b+7],q=a[b+8],r=a[b+9],s=a[b+10],t=a[b+11],u=a[b+12],v=a[b+13],w=a[b+14],x=a[b+15],y=g[0],z=g[1],A=g[2],B=g[3],y=c(y,z,A,B,h,7,k[0]),B=c(B,y,z,A,i,12,k[1]),A=c(A,B,y,z,j,17,k[2]),z=c(z,A,B,y,l,22,k[3]),y=c(y,z,A,B,m,7,k[4]),B=c(B,y,z,A,n,12,k[5]),A=c(A,B,y,z,o,17,k[6]),z=c(z,A,B,y,p,22,k[7]),y=c(y,z,A,B,q,7,k[8]),B=c(B,y,z,A,r,12,k[9]),A=c(A,B,y,z,s,17,k[10]),z=c(z,A,B,y,t,22,k[11]),y=c(y,z,A,B,u,7,k[12]),B=c(B,y,z,A,v,12,k[13]),A=c(A,B,y,z,w,17,k[14]),z=c(z,A,B,y,x,22,k[15]),y=d(y,z,A,B,i,5,k[16]),B=d(B,y,z,A,o,9,k[17]),A=d(A,B,y,z,t,14,k[18]),z=d(z,A,B,y,h,20,k[19]),y=d(y,z,A,B,n,5,k[20]),B=d(B,y,z,A,s,9,k[21]),A=d(A,B,y,z,x,14,k[22]),z=d(z,A,B,y,m,20,k[23]),y=d(y,z,A,B,r,5,k[24]),B=d(B,y,z,A,w,9,k[25]),A=d(A,B,y,z,l,14,k[26]),z=d(z,A,B,y,q,20,k[27]),y=d(y,z,A,B,v,5,k[28]),B=d(B,y,z,A,j,9,k[29]),A=d(A,B,y,z,p,14,k[30]),z=d(z,A,B,y,u,20,k[31]),y=e(y,z,A,B,n,4,k[32]),B=e(B,y,z,A,q,11,k[33]),A=e(A,B,y,z,t,16,k[34]),z=e(z,A,B,y,w,23,k[35]),y=e(y,z,A,B,i,4,k[36]),B=e(B,y,z,A,m,11,k[37]),A=e(A,B,y,z,p,16,k[38]),z=e(z,A,B,y,s,23,k[39]),y=e(y,z,A,B,v,4,k[40]),B=e(B,y,z,A,h,11,k[41]),A=e(A,B,y,z,l,16,k[42]),z=e(z,A,B,y,o,23,k[43]),y=e(y,z,A,B,r,4,k[44]),B=e(B,y,z,A,u,11,k[45]),A=e(A,B,y,z,x,16,k[46]),z=e(z,A,B,y,j,23,k[47]),y=f(y,z,A,B,h,6,k[48]),B=f(B,y,z,A,p,10,k[49]),A=f(A,B,y,z,w,15,k[50]),z=f(z,A,B,y,n,21,k[51]),y=f(y,z,A,B,u,6,k[52]),B=f(B,y,z,A,l,10,k[53]),A=f(A,B,y,z,s,15,k[54]),z=f(z,A,B,y,i,21,k[55]),y=f(y,z,A,B,q,6,k[56]),B=f(B,y,z,A,x,10,k[57]),A=f(A,B,y,z,o,15,k[58]),z=f(z,A,B,y,v,21,k[59]),y=f(y,z,A,B,m,6,k[60]),B=f(B,y,z,A,t,10,k[61]),A=f(A,B,y,z,j,15,k[62]),z=f(z,A,B,y,r,21,k[63]);g[0]=g[0]+y|0,g[1]=g[1]+z|0,g[2]=g[2]+A|0,g[3]=g[3]+B|0},_doFinalize:function(){var a=this._data,c=a.words,d=8*this._nDataBytes,e=8*a.sigBytes;c[e>>>5]|=128<<24-e%32;var f=b.floor(d/4294967296);for(c[(e+64>>>9<<4)+15]=16711935&(f<<8|f>>>24)|4278255360&(f<<24|f>>>8),c[(e+64>>>9<<4)+14]=16711935&(d<<8|d>>>24)|4278255360&(d<<24|d>>>8),a.sigBytes=4*(c.length+1),this._process(),a=this._hash,c=a.words,d=0;4>d;d++)e=c[d],c[d]=16711935&(e<<8|e>>>24)|4278255360&(e<<24|e>>>8);return a},clone:function(){var a=j.clone.call(this);return a._hash=this._hash.clone(),a}}),g.MD5=j._createHelper(h),g.HmacMD5=j._createHmacHelper(h)}(Math),this.Crypto={MD5:function(b){return String(a.MD5(b))}}}.call(Invodo),Invodo.Video={},Invodo.Video.Interface=function(){this.fullscreen=function(){return console.log("You cannot call the fullscreen function until you implement it in your widget"),!1},this.getTime=function(){return console.log("You cannot call the getTime function until you implement it in your widget"),!1},this.getDuration=function(){return console.log("You cannot call the getDuration function until you implement it in your widget"),!1},this.isPaused=function(){
return console.log("You cannot call the isPaused function until you implement it in your widget"),!1},this.isPlaying=function(){return console.log("You cannot call the isPlaying function until you implement it in your widget"),!1},this.isStopped=function(){return console.log("You cannot call the isStopped function until you implement it in your widget"),!1},this.mute=function(){return console.log("You cannot call the mute function until you implement it in your widget"),!1},this.muteToggle=function(){return console.log("You cannot call the muteToggle function until you implement it in your widget"),!1},this.pause=function(){return console.log("You cannot call the pause function until you implement it in your widget"),!1},this.pauseVideo=function(){return console.log("You cannot call the pauseVideo function until you implement it in your widget"),!1},this.play=function(){return console.log("You cannot call the play function until you implement it in your widget"),!1},this.setTime=function(){return console.log("You cannot call the setTime function until you implement it in your widget"),!1},this.stop=function(){return console.log("You cannot call the stop function until you implement it in your widget"),!1},this.volume=function(){return console.log("You cannot call the volume function until you implement it in your widget"),!1}},function(a){var b=this.Dom,c=this.Lang,d=this.EventDispatcher;this.Src.Widget.Cta=function(a){function e(){if(s.getParentDomId()){var a=document.getElementById(s.getParentDomId());a&&a.innerHTML&&(a.innerHTML="")}}function f(a){try{a?("data"in a&&(n=a.data),"widgetId"in a?(o="InvodoCta_"+a.widgetId,j=a.widgetId,k="InvodoCta"+j):Invodo.Console.log("no widget id"),"mpd"in a&&(p=a.mpd),"parentDomId"in a&&(q=a.parentDomId),"podId"in a&&(r=a.podId)):Invodo.Console.log("No config object passed to Cta widget")}catch(b){Invodo.Console.log("Configuration error while initializing the Cta Widget")}d(s),r||p?Invodo.Pod.load({pod:r,mpd:p,widgetId:j},function(a){g(),c.isFunction(s.onpodload)&&s.onpodload(a.pod)}):g()}function g(){if(Invodo.Lang.isElement(n))i=new b(n),m=0,l=setInterval(function(){m++,(0!==n.clientHeight||m>20)&&(h("ctaView"),s.fire("ctaView"),clearInterval(l))},100);else{var a=document.getElementById(q);if(!a)return;i=new b(b.createElement("img",{id:k,style:"cursor:pointer;cursor:hand",title:"Click to view video"})),i.appendTo(a).once("load",function(){h("ctaView"),s.fire("ctaView")}),i.get(0).src=n}i.on("click",function(){h("ctaClick"),s.sendUpdate({data:"show"}),s.fire("ctaClick")})}function h(a){var b,c,d={pn:Invodo.getPageName()};if(r)b=Invodo.Pod.get(r);else if(p)b=Invodo.Pod.getByMpd(p);else for(var e=Invodo.Widget.getAll(),f=0;f<e.length;f++){var g=e[f];if("getListensTo"in g)for(var h=g.getListensTo(),k=0;k<h.length;k++){var l=h[f];l===j&&(r=g.getPodId(),d.pod=r)}}b&&(d.pod=b.pod,c=Invodo.Pod.getExperimentData(b.pod),c&&("experiment"in c&&(d.ex=c.experiment+"/"+c.branch),"branch"in c&&(d.pod=c.branch))),"ctaView"===a&&(d.vis=i.visibleInViewPort()),Invodo.Module.get("logger")&&Invodo.Module.get("logger").log(j,a,d)}var i,j,k,l,m,n=null,o="",p="",q="",r="",s=this,t="cta";return s.getData=function(){return n||null},s.getId=function(){return j||null},s.getMpd=function(){return p||null},s.getParentDomId=function(){return q||null},s.getPodId=function(){return r||null},s.getSku=function(){return sku||null},s.getType=function(){return t},s.hide=function(){return i.hide(),s},s.receiveUpdate=function(a){},s.remove=function(){e()},s.sendUpdate=function(a){a.widgetId=j,Invodo.Widget.update(a)},s.setParent=function(a){q=a;var b=document.getElementById(k),c=document.getElementById(s.getParentDomId());c&&"appendChild"in c&&c.appendChild(b)},s.show=function(){return i.show(),s},f(a),s}}.call(Invodo,this),Invodo.Src.Widget.Html5Video=function(a,b,c,d,e){function f(){s=new w(w.createElement("div",{id:u})),s.css({width:"100%",height:"100%"}),s.appendTo(x);var a=!1;"chromelessmode"in v&&(a="true"==v.chromelessmode?!0:!1);var b={id:"InvodoVideo_"+u,poster:d,src:c+"?cacheBuster="+Date.now(),unselectable:"on",style:"-webkit-user-select:none;-moz-user-select:moz-none;-ms-user-select:none;user-select:none;"};a||(b.controls="controls"),r=new w(w.createElement("video",b)),r.css({height:"100%",width:"100%"}),r.on("volumechange",k).on("webkitfullscreenchange",l).on("timeupdate",o).on("ended",j).on("play",m).on("pause",n).on("loadedmetadata",i),r.appendTo(s),C=r.muted}function g(a){return parseFloat(a.toFixed(3))}function h(){var a=t.getTime();t.fire("timePlayed",{tm:a}),t.sendUpdate({data:a})}function i(a){t.fire("loadedmetadata",a)}function j(a){q(),A=!1,z=!1,B=!0,t.fire("videoComplete"),t.fire("podComplete")}function k(a){var b=r.get(0);C=b.muted}function l(a){var b=a.target.webkitDisplayingFullscreen;t.fire("webkitfullscreenchange",{fullscreen:b}),b===!1&&t.fire("webkitendfullscreen"),b===!0&&t.fire("webkitbeginfullscreen")}function m(a){A||(A=!0,t.fire("ctaClick")),z&&(z=!1,t.fire("videoUnpause")),B=!1,t.fire("videoStart"),y||p()}function n(a){q(),z=!0,h(),t.fire("videoPause")}function o(a){var b=t.getTime();t.sendUpdate({data:b}),!y&&A&&p(),t.fire("timeUpdate")}function p(){y=window.setInterval(h,5e3)}function q(){clearInterval(y),y=void 0}var r,s,t=this,u="Html5Video_"+a,v=e||{},w=Invodo.Dom,x=document.getElementById(a),y=null,z=!1,A=!1,B=!0,C=!1,D="Html5VideoPlayer";Invodo.EventDispatcher(t),x&&f(),t.getContainer=function(){return s},t.getDuration=function(){var a=r.get(0);return g(a.duration)},t.getId=function(){return b},t.getPosition=function(){var a=r.get(0);return a&&"currentTime"in a?g(a.currentTime):0},t.getInfo=function(){var a={};return a.config={},a.config.config=v,a},t.getInfo=function(){var a={};return a.config={},a.config.config=v,a},t.getTime=function(){var a=r.get(0);return a&&"currentTime"in a?Math.round(a.currentTime):0},t.getType=function(){return D},t.hide=function(){t.isPlaying()&&t.pause(),s.hide()},t.isMuted=function(){var a=r.get(0);return C=a.muted},t.isPaused=function(){return z},t.isPlaying=function(){return A},t.isStopped=function(){return B},t.mute=function(){var a=r.get(0);return a.muted=!C,t},t.muteToggle=function(){t.mute()},t.pause=function(){r.get(0);return r.get(0).pause(),z=!0,t},t.play=function(a){if(r.isDisplayed(0)){var b=Date.now();a+="?cacheBuster="+b,c+="?cacheBuster="+b;var d=r.get(0);return""===d.getAttribute("src")&&d.setAttribute("src",a||c),d.play(),A=!0,z=!1,t}},t.reset=function(){r.get(0).load(),A=!1,z=!1,B=!1},t.size=function(a,b){r.get(0).style.height=parseInt(a)+"px",r.get(0).style.width=parseInt(b)+"px"},t.stop=function(){var a=r.get(0);a.load(),A=!1},t.sendUpdate=function(a){a.widgetId=b,Invodo.Widget.update(a)},t.receiveUpdate=function(){},t.show=function(){return s.show(),t},t.setTime=function(a){var b=r.get(0);b&&b.currentTime&&(b.currentTime=a)}},function(a){var b=(this.Lang,this.Dom);this.Src.Widget.Caption=function(a,c,d,e){var f=null,g=document.getElementById(a),h=this,i="Caption";g&&(f=new b(b.createElement("div",{id:c})),f.appendTo(g)),h.data=function(a){return d=a,h},h.hide=function(){return f.hide(),h},h.getId=function(){return c},h.getType=function(){return i},h.receiveUpdate=function(a){for(var b=0;b<d.length;b++){var c=d[b];Math.round(a.data)==c.time&&a.widgetId===e&&h.text(c.text)}},h.sendUpdate=function(a){return a.widgetId=c,Widget.update(a),h},h.show=function(){return f.show(),h},h.setStyle=function(a,b){return f.css(a,b),h},h.text=function(a){return f.html(a),h}}}.call(Invodo,this),Invodo.Src.Widget.Carousel=function(a,b,c,d,e){var f=null,g=null,h=null,i=this;i.getControl=function(){return f},i.getModel=function(){return g},i.getView=function(){return h},i.render=function(){h&&h.render&&h.render()},i.resize=function(a,b){h&&h.resize&&h.resize(a,b)},g=new Invodo.Src.Widget.Carousel.Model(b,c,d,e),h=new Invodo.Src.Widget.Carousel.View(a,g,f),g.addObserver(h)},Invodo.Src.Widget.Carousel.Model=function(a,b,c,d){var e=b.frontcolor||"FFFFFF",f=b.backcolor||"000000",g=[],h=b.secondarycolor||"8DCC00",i=this,j=c;i.addObserver=function(a){g.push(a)},i.getBackColor=function(){return e},i.getFrontColor=function(){return f},i.getItems=function(){return a},i.getSecondColor=function(){return h},i.getTitle=function(){return j},i.getPodId=function(){return d}},Invodo.Src.Widget.Carousel.View=function(a,b,c){var d,e,f,g,h="E5E5E5",i=100,j=100,k=a+"_InvodoCarousel",l=(Invodo.Env,100),m=this;m.notify=function(){},m.render=function(){var c,m=document.getElementById(a);if(Invodo.Module.get("logger").log("Invodo.Carousel","ivsView",{pod:b.getPodId()}),!e){e=new Invodo.Dom(Invodo.Dom.createElement("div",{id:k})),e.css({"font-family":"Arial","background-color":"#"+b.getBackColor(),width:j+"%",height:i+"%",overflowX:"hidden",overflowY:"scroll",position:"relative"}),e.appendTo(m),g=new Invodo.Dom(Invodo.Dom.createElement("div",{id:a+"_InvodoCarouselTitle"})),g.html("<div style='border-bottom: 1px solid #"+h+";height:20px;background-color:#"+b.getBackColor()+";position:relative;'><span style='color:#"+b.getFrontColor()+";font-size:14px;font-weight:bold;opacity:0.7;position:absolute;left:3px;top:2px;'>"+b.getTitle()+"</span></div>"),g.appendTo(e),f=Invodo.Dom(Invodo.Dom.createElement("div",{id:k+"_Panel"}));var n=e.height();n>20?n+="px":n="92%",f.css({"scrollbar-base-color":"#"+b.getBackColor(),width:l+"%",position:"relative",top:"0",left:"0"});var o=function(a,b,d){var e,f,g,i,j=90,k=this;f=new Invodo.Dom(Invodo.Dom.createElement("p",{innerHTML:b.headline,"class":"invodo-carousel-item-headline"})),f.css({color:"#"+d.back,cursor:"pointer","font-size":"12px","font-weight":"bold",left:"8px",position:"relative",margin:"8px 20px 16px 0",padding:"0","line-height":"1"}),f.on("mouseover",function(){e.get(0).style.borderColor="#"+d.hilite}),f.on("mouseout",function(){f.get(0).style.color="#"+d.front,this.style.borderColor="#"+d.front}),i=new Invodo.Dom(Invodo.Dom.createElement("p",{innerHTML:b.subtext,"class":"invodo-carousel-item-subtext"})),i.css({color:"#"+d.back,"font-size":"10px",left:"8px",opacity:"0.7",position:"relative",margin:"0",padding:"0 6px 0 0","line-height":"1"}),i.on("mouseover",function(){e.get(0).style.borderColor="#"+d.hilite});var l=b&&b.openInNewWindow&&"true"==b.openInNewWindow?"_blank":"_self";e=new Invodo.Dom(Invodo.Dom.createElement("a",{target:l,href:b.action})),e.css({border:"1px solid #"+h,display:"block",clear:"both",cursor:"pointer","min-height":j+"px","text-decoration":"none"}),e.on("mouseover",function(){f.get(0).style.color="#"+d.hilite,g.get(0).style.borderColor="#"+d.hilite,this.style.borderColor="#"+d.hilite}),e.on("mouseout",function(){f.get(0).style.color="#"+d.back,g.get(0).style.borderColor="#"+d.front;for(var a=0;a<c.length;a++)k.getDom().style.borderColor="#"+h}),g=new Invodo.Dom(Invodo.Dom.createElement("img")),g.css({msInterpolationMode:"bicubic",border:"none",cursor:"pointer","float":"left",height:"auto",margin:"3px",width:"125px"}),g.once("load",function(){g.on("mouseover",function(){e.get(0).style.borderColor="#"+d.hilite}),g.on("mouseout",function(){f.get(0).style.color="#"+d.front}),e.prepend(g.get(0))}),g.get(0).src=b.thumbnail,e.append(f.get(0)),e.append(i.get(0));var m=new Invodo.Dom(Invodo.Dom.createElement("br",{style:"clear:both"}));e.append(m.get(0)),k.getDom=function(){return e.get(0)}};d=Invodo.Dom(Invodo.Dom.createElement("div",{id:k+"_Content"})),c=b.getItems();for(var p={front:b.getBackColor(),back:b.getFrontColor(),hilite:b.getSecondColor()},q=0;q<c.length;q++){var r=new o(q,c[q],p);d.append(r.getDom()),function(a){var d=c[a];new Invodo.Dom(r.getDom()).on("click",function(){Invodo.Module.get("logger").log("Invodo.CarouselItem","ivsClick",{item:d.durableId,index:a,action:d.action,pod:b.getPodId()})})}(q)}f.append(d.get(0)),e.append(f.get(0))}},m.resize=function(a,b){f&&a&&(f.get(0).style.width=a+"px")}},Invodo.Src.Widget.InPlayer=function(a,b,c,d,e,f,g,h,i,j){function k(){r("inPlayerIsDomReady")&&(clearInterval(X),F("playerReady"))}function l(a){var b=Invodo.getAffiliateConfig(),c=parseInt(b.height),d=parseInt(b.width),f=a.config.carousel.items,g=new Invodo.Dom(document.getElementById(T)),h=(document.getElementById(da),Z),j=$,k="";"overlay"===e?(ga.options({affiliateColor:Y.config.backcolor||"000000",affiliateLogo:i}),k="relative"):(h=parseInt(g.css("height"),10),j=parseInt(g.css("width"),10),k="static");var l="100%",n="100%";(0===h||isNaN(h)||""===h)&&(h=L||c||Z,l=h+"px",j=M||d||$,n=j+"px"),O=new Invodo.Dom(Invodo.Dom.createElement("div",{id:da,style:"position:"+k+";height:"+l+";width:"+n})),"embedded"===e?O.appendTo(g):O.appendTo(document.body);var o=Invodo.getAffiliateConfig();"seoStructData"in o&&"schema.org/microdata"==o.seoStructData&&(O.get(0).setAttribute("itemprop","video"),O.get(0).setAttribute("itemscope","itemscope"),O.get(0).setAttribute("itemtype","http://schema.org/VideoObject"),O.get(0).innerHTML=Invodo.SEO.getSeoStructDataTags(V));f&&f.length&&f.length>0?260:0;"overlay"==e&&(O.get(0).style.display="none");var p=da+"_LeftContainer";if(P=new Invodo.Dom(Invodo.Dom.createElement("div",{id:p,style:"float:left;position:relative;height:100%;width:100%"})),P.appendTo(O),m(P),f&&f.length>0){var q=da+"_RightContainer";Q=new Invodo.Dom(Invodo.Dom.createElement("div",{id:q,style:"float:left;position:relative;height:100%;width:260px;"})),Q.appendTo(O);var r=a.config.carousel.title||"";K=new Invodo.Src.Widget.Carousel(q,f,Y.config,r,V||Invodo.Pod.getByMpd(U).pod),"embedded"==e&&K&&K.render&&K.render()}if("embedded"==e&&(P.get(0).style.width=v().left+"%",Q&&(Q.get(0).style.width=v().right+"%")),"mozilla"===Invodo.Env.browser.engine){var s={"object, embed, video":{outline:"none !important"}};Invodo.Dom.addCSS(s)}}function m(a){aa=s(),aa&&"embedded"===e||(ca&&(ja=new Invodo.SWF({url:ea,attrs:{id:ba},flashvars:{widgetId:S,autoPlay:h}})),"embedded"===e&&(ca?aa=ja.embed(a.get(0)):_?(o(),h&&B()&&N.play()):n(a),K&&K.render&&K.render(),D()))}function n(a){var b=a.get(0),c=Y.frames[0].encodings[0].width||"480";b.style.width=c+"px",message=new Invodo.Dom(Invodo.Dom.createElement("div",{id:da+"_Message",style:"float:left;position:relative;height:100%;width:"+c+"px;background:#000;color:#FFF"})),message.get(0).innerHTML="<br /><br /><p style='text-align:center;'>The Adobe Flash Player is required for video playback.<br /><a target='_blank' style='color:#FFF' href='http://get.adobe.com/flashplayer/'>Get the latest Flash Player</a></p>",message.appendTo(b)}function o(){if(!N){var a=Y.frames[0].encodings[0].http.replace(/.*?:/g,""),b=Y.frames[0].previewUrl.replace(/.*?:/g,""),c=Y.frames[0].durableId,d=V||Invodo.Pod.getByMpd(U).pod,f=Invodo.Pod.getExperimentData(d).branch;if("overlay"==e){var g=Y.frames[0].encodings[0],h=P.get(0).style;h.height=g.height+"px",h.width=g.width+"px",ga.on("resize",function(a,b){setTimeout(function(){K&&(a-=260),P.css({height:b+"px",width:a+"px"})},5)})}var i=Invodo.Lang.mix({},Y,{});j&&(i.config.chromelessmode=j),N=new Invodo.Src.Widget.Html5Video(da+"_LeftContainer",S+"_HTML5",a,b,i.config),F("playerReady"),Invodo.Lang.forEach(["webkitendfullscreen","webkitbeginfullscreen","webkitfullscreenchange","videoStart","videoComplete","podStart","podComplete","ctaClick","timePlayed","videoPause","videoUnpause","timeUpdate"],function(a,b){N.on(b,function(a){a=a||{},a.pod=f,a.fr=c,"tm"in a||(a.tm=N.getTime(),a.position=N.getPosition(),a.duration=N.getDuration()),"videoStart"===b&&(a.vc="http",x()),F(b,a),"timeUpdate"!=b&&C(b,a)})})}}function p(){if(ha.getParentDomId()){var a=document.getElementById(ha.getParentDomId());a&&a.innerHTML&&(a.innerHTML="")}}function q(a){function b(a){return a}var c=[].slice.call(arguments,1);setTimeout(function(){var d=!1;try{aa=s(),aa&&(d=aa[a].apply(aa,c))}catch(e){}finally{b(d)}},10)}function r(a){var b=[].slice.call(arguments,1),c=!1;try{aa=s(),aa?c=b.length?aa[a].apply(aa,b):aa[a].apply(aa,[]):"inPlayerIsStopped"===a&&(c=!0)}catch(d){}finally{return c}}function s(){var a=null;try{ba&&(a=document.getElementById(ba))}catch(b){}return a}function t(a){var b=Invodo.getAffiliateConfig();V=a.pod,Invodo.SEO.setSeoStructMetaTags(V),a=Invodo.Lang.mix({},a),Y.frames=a.config.frames,Y.config=b,Y.config.mode=e,l(a),ha.onpodload&&ha.onpodload(a.pod)}function u(a){if(ga)for(var b,c,d,e,f=260,g=Y.frames,h=a.fr,i=0;i<g.length;i++)b=g[i],c=b.durableId,c==h&&(d=L||parseInt(a.h),e=M||parseInt(a.w),K&&(e+=f),ga.resize(e,d))}function v(){var a=document.getElementById(da),b=new Invodo.Dom(a).width()||$,c=0,d=0;return Q?(d=100*(260/b).toFixed(2),c=100-d):(c=100,d=0),{left:c,right:d}}function w(a){function b(){Q&&(Q.get(0).style.width=v().right+"%",P.get(0).style.width=v().left+"%")}var c,d,f=Invodo.getAffiliateConfig(),g=(parseInt(f.height),parseInt(f.width),document.getElementById(da));"standard"==Invodo.Env.screen.mode?(c=Invodo.Dom(g).height()||Z,d=Invodo.Dom(g).width()||$):(c=Z,d=$,K&&(d+=260)),"overlay"===e?(b(),ga.on("resize",function(a,c){K&&(a-=260),P.css({height:c+"px",width:a+"px"}),b()}),ga.resize(d,c)):(Q?(P.get(0).style.width=v().left+"%",Q.get(0).style.width=v().right+"%"):P.get(0).style.width=v().left+"%",K&&K.resize&&K.resize(null,c-20)),ia="playing"}function x(){la===!1&&(la=!0,E())}function y(){var a=V||Invodo.Pod.getByMpd(U).pod,b=Invodo.Pod.getExperimentData(a).branch,c=Invodo.Lang.mix({},Y,{podId:b});G(c)}function z(a){if(a===!0)ga.options({closeOnEscape:!1});else{ga.options({closeOnEscape:!0});try{s().blur()}catch(b){}}}function A(a){switch(a){case"videoComplete":playing=!1}}function B(){return Invodo.Env.browser.platform.indexOf("android")<0}function C(a,b){var c=Invodo.Pod.getExperimentData(V||Invodo.Pod.getByMpd(U).pod);c.branch;b||(b={}),b.mark&&(b.tm=b.mark,delete b.mark),b.method&&(b.vc=b.method,delete b.method),"ctaClick"===a&&c&&(b.ex=c.experiment+"/"+c.branch),c&&"branch"in c&&(b.pod=c.branch),Invodo.Module.get("logger")&&Invodo.Module.get("logger").log(S,a,b)}function D(){var a=V||Invodo.Pod.getByMpd(U).pod,b={pn:Invodo.getPageName(),pod:a},c=Invodo.Pod.getExperimentData(a);if(c.experiment&&(b.ex=c.experiment+"/"+c.branch),"embedded"===e){var d=new Invodo.Dom(s());ma=0,R=setInterval(function(){ma++,(0!==d.clientHeight||ma>20)&&(b.vis=d.visibleInViewPort(),C("ctaView",b),clearInterval(R))},100)}}function E(){var a=Invodo.Pod.getExperimentData(V||Invodo.Pod.getByMpd(U).pod),b=a.branch;F("podStart");var c=Invodo.Module.get("logger");c.log(S,"podStart",{pod:b})}function F(a,b){A(a);for(var c=0;c<W.length;c++)W[c].eventName===a&&!function(b,c){var d=c||{};setTimeout(function(){d.widgetId=S,d.eventName=a;try{W[b].callback(d)}catch(c){}},5)}(c,b)}function G(a){j&&(a.config.chromelessmode=j),q("inPlayerSetConfig",a)}var H=Invodo.getAffiliateConfig(),I=!Invodo.Env.browser.ie;if(H&&"videoPlayerPreference"in H&&"html5"==H.videoPlayerPreference.toLowerCase()&&I){var J={};return J.parentDomId=a,J.widgetId=b,J.podId=c,J.mpd=d,J.mode=e,J.listensTo=f,J.autoplay=h,J.logoUrl=i,new Invodo.Src.Widget.Astro(J)}var K,L,M,N,O,P,Q,R,S=b,T=a,U=d||"",V=c||"",W=[],X=null,Y={},Z=270,$=480,_=Invodo.Env.html5Video.supported,aa=null,ba="InvodoFlashPlayer_"+S,ca=Invodo.SWF.hasVersion([10,1]),da="InvodoInPlayer_"+S,ea="//e.invodo.com/4.0/fl/inplayer.swf",fa=[],ga=Invodo.Overlay,ha=this,ia="",ja=null,ka="inplayer",la=!1,ma=0;if(f&&(fa="string"==typeof f?f.split(","):f),void 0===e)e="embedded";else if("string"==typeof e){if("overlay"!==e&&"embedded"!==e)return!1}else"object"==typeof e&&(e.hasOwnProperty("name")&&"overlay"===e.name&&(M=e.hasOwnProperty("overlayWidth")?e.overlayWidth:void 0,L=e.hasOwnProperty("overlayHeight")?e.overlayHeight:void 0),e="overlay");"boolean"!=typeof h&&(h="overlay"===e),g&&(ea=g),(V||U)&&Invodo.Pod.load({pod:V,mpd:U,widgetId:S},function(a){t(a)}),ha.flashJsTest=function(a){return ia="initializing",a},ha.flashObject=function(a,b){switch(a){case"videoStart":x();break;case"playerReady":y();break;case"playerRunning":w();break;case"playerResize":u(b);break;case"bitrateSelected":u(b);break;case"fullScreenToggle":z(b.st);break;case"timeUpdate":}"playerResize"!==a&&"timeUpdate"!==a&&C(a,b),"playerReady"==a?X=setInterval(k,10):F(a,b)},ha.getAutoplay=function(){return h},ha.getId=function(){return S},ha.getInfo=function(){var a;return a=ca?r("inPlayerGetInfo"):N?N.getInfo():{}},ha.getListensTo=function(){return fa},ha.getMode=function(){return e},ha.getMpd=function(){return U},ha.getParentDomId=function(){return T},ha.getPodId=function(){return V},ha.getTime=function(){var a=null;return a=N?N.getTime():r("inPlayerGetTime")},ha.getDuration=function(){var a=null;return a=N?N.getDuration():r("inPlayerGetDuration")},ha.getType=function(){return ka},ha.hide=function(){return"overlay"==e?ga&&ga.close&&ga.close():O.css("display","none"),ha.isPlaying()&&ha.pause(),ha},ha.isMuted=function(){var a=!1;return ca?a=r("inPlayerIsMuted"):_&&(a=N.isMuted()),a},ha.isPlaying=function(){var a=!1;return ca&&(a=r("inPlayerIsPlaying")),N&&(a=N.isPlaying()),a},ha.isPaused=function(){var a=!1;return ca&&(a=r("inPlayerIsPaused")),N&&(a=N.isPaused()),a},ha.isPlaylistDisplayed=function(){return r("inPlayerIsPlaylistDisplayed")},ha.isRatingDisplayed=function(){return r("inPlayerIsRatingDisplayed")},ha.isSharingDisplayed=function(){return r("inPlayerIsSharingDisplayed")},ha.isStopped=function(){return ca?r("inPlayerIsStopped"):_?N.isStopped():void 0},ha.loadVideo=function(a){q("inPlayerLoadVideo",a)},ha.playButtonClick=function(){q("inPlayerPlayButtonClick")},ha.ratingButtonClick=function(){q("inPlayerRatingButtonClick")},ha.pause=function(){ha&&ha.pauseVideo&&ha.pauseVideo()},ha.pauseVideo=function(){ca?q("inPlayerPauseVideo"):N?N.pause():Invodo.Console.log("No HTML5 or Flash support")},ha.play=function(){ca?q("inPlayerPlayVideo"):N?N.play():Invodo.Console.log("No HTML5 or Flash support")},ha.remove=function(){"overlay"==e&&ga&&ga.close&&ga.close(),p()},ha.receiveUpdate=function(a){for(var b in fa){var c=fa[b];a.widgetId==c&&"show"==a.data&&ha.show()}},ha.registerEventListener=function(a,b){return W.push({eventName:a,callback:b}),ha},ha.unregisterEventListener=function(a,b){for(var c=0;c<W.length;c++)W[c].eventName===a&&W[c].callback===b&&W.splice(c,1);return ha},ha.replay=function(){q("inPlayerReset"),q("inPlayerLoadVideo",Y)},ha.reset=function(){ca?q("inPlayerReset"):_&&N.reset()},ha.setConfig=function(a){q("inPlayerSetConfig",a)},ha.setParent=function(a){T=a;var b=document.getElementById(da),c=document.getElementById(ha.getParentDomId());c.appendChild(b)},ha.setParentDomId=function(a){T=a},ha.setMode=function(a){a=a},ha.setStyle=function(a,b){aa=s(),aa.style[a]=b},ha.setTime=function(a){(void 0===a||null===a)&&(a=0),N?N.setTime(a):q("inPlayerSetTime",a)},ha.show=function(){var a,b;if(Y&&Y.frames&&Y.frames.length>0){var c=Y.frames[0].defaultEncoding||void 0;c&&Invodo.Lang.forEach(Y.frames[0].encodings,function(d){Y.frames[0].encodings[d].id===c&&(a=Y.frames[0].encodings[d].height,b=Y.frames[0].encodings[d].width)}),a=a||parseInt(Y.frames[0].encodings[0].height),b=b||parseInt(Y.frames[0].encodings[0].width)}else a=Z,b=$;if("embedded"===e)O.css("display","block");else{var d=L?L:a,f=M?M:b;ga.open(f+(K?260:0),d,function(a){if(O.appendTo(a),O.get(0).style.display="block",ga.once("close",function(){F("close")}),ca)try{ja.embed(P.get(0)),ga.once("beforeclose",function(){ha.stop(),ja.dispose()})}catch(b){}else _?o():n(P),N&&h&&B()&&N.play(),ga.once("beforeclose",function(){N&&(N.getContainer().remove(),N=null)});try{K&&K.render&&(K.render(),K.resize(null,height))}catch(b){}})}},ha.stop=function(){ca?q("inPlayerStop"):N?N.stop():Invodo.Console.log("No HTML5 or Flash support")},ha.muteToggle=ha.mute=function(){ca?q("inPlayerMuteToggle"):N?N.mute():Invodo.Console.log("No HTML5 or Flash support")},ha.resizeOverlay=function(a,b){"overlay"===e&&ga&&(L=b,M=a,ga.resize(a,b))}},Invodo.Src.Widget.InPlayer.version="0.1.2",Invodo.Src.Widget.InteractivePlayer=function(a,b,c,d,e,f,g,h,i,j,k){function l(){Da=!0,V()}function m(){Ca=!0,V()}function n(){Da=!1,Ea||W()}function o(){Ca=!1,Ea||W()}function p(){Ea=!0,h&&V()}function q(){Ea=!1,!h||Ca||Da||W()}function r(){Invodo.PublishSubscribe.subscribe("modelIsHome",function(a){s.apply(ea,a)}),ea.home(),ea.stop()}function s(){t(),u()}function t(){Invodo.PublishSubscribe.remove("zoomOutDone",function(a){r.apply(ea,a)})}function u(){Invodo.PublishSubscribe.remove("modelIsHome",function(a){s.apply(ea,a)})}function v(b){E(b),document.querySelector("#"+a+' [id^="Invodo_Html5Video_View_"]').style.background="transparent",ea.onpodload&&ea.onpodload(b.pod)}function w(){for(var a=0;a<oa.length;a++){var b=oa[a];b.hide()}}function x(){ka.hide()}function y(){var a=parseInt(ia.style.height),b=ia.clientHeight?ia.clientHeight:ia.offsetHeight||0;return a?a:b}function z(){var a=parseInt(ia.style.width),b=ia.clientWidth?ia.clientWidth:ia.offsetWidth||0;return a?a:b}function A(a){P("cursor_hand_point",a.target.id)}function B(a){a.target.id===sa&&P("default",a.target.id)}function C(a){a.target.id===ra&&P("cursor_zoom_in",a.target.id)}function D(a){a.target.id===ra&&P("cursor_zoom_out",a.target.id)}function E(a){if(c=a.pod,a.config.interactive[0].bigImages&&a.config.interactive[0].bigImages.length>0&&(Ga=!0),ia=document.getElementById(wa)||null){var d=y(),e=z(),l=e>d?d:e;xa=l/ca,Fa=document.createElement("div"),Fa.id=fa,Fa.style.position="relative",Fa.style.height="100%",Fa.style.width="100%",K("mouseenter",q,ia),K("mouseleave",p,ia),K("touchstart",M,ia),ia.appendChild(Fa);var m=document.createElement("div");m.id=pa,m.style.position="relative",Fa.appendChild(m),a=R(a),ga=a.config.interactive[0],ha=ga.hotspots.length,ja=new Invodo.Src.Widget.InteractivePlayer.Photo3d,ja.init(pa,wa,a.pod,Ha,ga,xa,b,f,g,i,j,d,e,k),ja.registerObserver(ea);for(var n=0;ha>n;n++){var o=ga.hotspots[n],r=new Invodo.Src.Widget.InteractivePlayer.Hotspot;r.init(b,n,o,c,pa,xa,ja),r.registerEventListener("click",U),r.hide(),oa.push(r)}qa=document.createElement("div"),qa.id=ra,qa.style.textAlign="center",qa.style.width="100%",qa.style.bottom="3%",qa.style.position="absolute";var s="ontouchstart"in document.documentElement;s&&h?(qa.style.display="block",qa.style.opacity=1,qa.style.overflow="auto",qa.style.filter="alpha(opacity=100)",setTimeout(function(){V()},4e3)):(qa.style.display="none",qa.style.opacity=0,qa.style.overflow="auto",qa.style.filter="alpha(opacity=0)"),Invodo.PublishSubscribe.subscribe("modelIsHome",function(a){F.apply(ea,a)}),Invodo.PublishSubscribe.subscribe("findingHome",function(a){G.apply(ea,a)}),K("mouseover",C,qa),m.appendChild(qa);var t=document.createElement("div");t.id=sa,t.style.borderRadius="5px",t.style.MozBorderRadius="5px",t.style.WebkitBorderRadius="5px",t.style.background="rgb(255, 255, 255)";var u=document.createElement("div");u.style.cssText="background-color:rgba(150,255,150,.5)",~(""+u.style.backgroundColor).indexOf("rgba")&&(t.style.background="rgba(255, 255, 255, 0.6)"),t.style.width="auto",t.style.display="inline-block",K("mouseover",B,t),qa.appendChild(t);var v=new Image;if(v.id=ra+"_autoSpin",K("click",I,v),K("mouseover",A,v),v.src=Ha.icn_spin.src,v.style.width="auto",v.style.margin="20px",t.appendChild(v),Ga){var x=new Image;x.id=ra+"_zoomIn",K("mouseover",A,x),K("click",ea.zoomIn,x),x.src=Ha.icn_zoom_in.src,x.style.width="auto",x.style.margin="20px",t.appendChild(x);var D=new Image;D.id=ra+"_zoomOut",K("mouseover",A,D),D.src=Ha.icn_zoom_out.src,D.style.width="auto",D.style.margin="20px",D.style.opacity="0.6",D.style.overflow="auto",t.appendChild(D)}var E=new Image;E.id=ra+"_reset",K("mouseover",A,E),K("click",J,E),E.src=Ha.icn_reset.src,E.style.width="auto",E.style.margin="20px",t.appendChild(E),w(),ka=new Invodo.Src.Widget.InteractivePlayer.VideoPlayer,ka.init(b,ga.video,ga.videoPlayer,a.pod,xa,na),ka.registerObserver(ea),ka.registerParent(pa),ka.position(ga.videoPlayer.x,ga.videoPlayer.y);try{var H={pod:c,pn:Invodo.getPageName(),sid:b,playertype:"Spin"};Invodo.Module.get("logger").log(b,"playerView",H),ea.fire("playerView",H)}catch(L){}S("playerReady")}}function F(){K("click",H,qa)}function G(){O("click",H,qa)}function H(a){a.target.id===ra&&(ja.getZoom()>0?ea.zoomOut():ea.zoomIn())}function I(){if(ja.isSpinning())ea.stop();else{ea.spin("e");var a={pod:c,clip:null,playertype:"Spin",clktype:"Spin",clktgt:"Spin"};Invodo.Module.get("logger").log(b,"userClick",a),ea.fire("userClick",a)}}function J(){var a={pod:c,clip:null,playertype:"Spin",clktype:"Reset",clktgt:"0,0"};Invodo.Module.get("logger").log(b,"userClick",a),ea.fire("userClick",a),ja.getZoom()>0?(Invodo.PublishSubscribe.subscribe("zoomOutDone",function(a){r.apply(ea,a)}),ea.zoomOut()):r()}function K(a,b,c){"addEventListener"in c?c.addEventListener(a,b,!1):"attachEvent"in c&&c.attachEvent("on"+a,b)}function L(){var a=document.getElementById(ra);return"none"===a.style.display?!1:!0}function M(){N()}function N(){L()||W();for(var a=0;a<za.length;a++)clearTimeout(za[a]);var b=setTimeout(function(){V()},4e3);za.push(b)}function O(a,b,c){"removeEventListener"in c?c.removeEventListener(a,b):"attachEvent"in c&&c.detachEvent("on"+a,b)}function P(a,b){ja.callSetCursorIcon(a,b)}function Q(){if(ea.getParentDomId()){var a=document.getElementById(ea.getParentDomId());a&&a.innerHTML&&(a.innerHTML="")}}function R(a){var b=a.config,c=b&&b.interactive&&b.interactive[0]?b.interactive[0]:null;if(c){for(var d=c.images,e=0;e<d.length;e++)0!==d[e].indexOf(la)&&(d[e]=la+d[e]);if(c.bigImages&&c.bigImages.length>0)for(var f=c.bigImages,e=0;e<f.length;e++)0!==f[e].indexOf(la)&&(f[e]=la+f[e]);c.videos&&!c.video&&(c.video=c.videos);for(var g=c.video,e=0;e<g.length;e++){var h=g[e],i=h.http;i="/"==i[0]?i.substring(1):i,g[e].http=la+i}}return a}function S(a){for(var c=0;c<da.length;c++)da[c].eventName===a&&!function(c){setTimeout(function(){da[c].callback({widgetId:b,eventName:a})},5)}(c)}function T(){for(var a=0;a<oa.length;a++){var b=oa[a];b.show()}}function U(a){ka.play(a)}function V(){if(h){var a=document.getElementById(ra);a&&null!==a.style&&Y(a)}}function W(){if(h){var a=document.getElementById(ra);a&&null!==a.style&&(Z(a),a.style.display="block")}}function X(){for(var a=0;a<Aa.length;a++)clearInterval(Aa[a])}function Y(a){if(!Ba&&a&&null!==a.style&&a.style.opacity>0){Ba=!0;var b=1,c=setInterval(function(){.1>=b&&(b=0,clearInterval(c),a.style.display="none",Ba=!1,X()),a.style.opacity=b,a.style.filter="alpha(opacity="+100*b+")",b-=.1*b},10);Aa.push(c)}}function Z(a){if(a&&null!==a.style&&a.style.opacity<1){Ba=!1;var b=0;X();var c=setInterval(function(){b>=1&&(b=1,clearInterval(c)),a.style.opacity=b,a.style.filter="alpha(opacity="+100*b+")",b+=.1},20);Aa.push(c)}}function $(){ea.disableDashboardButton(I,ta),ea.disableDashboardButton(ea.zoomIn,ua),ea.enableDashboardButton(ea.zoomOut,va)}function _(){ea.enableDashboardButton(I,ta),ea.disableDashboardButton(ea.zoomOut,va),ea.enableDashboardButton(ea.zoomIn,ua)}function aa(){P("cursor_zoom_out",ra),K("mouseover",D,qa),O("mouseover",C,qa),Invodo.PublishSubscribe.remove("zoomInDone",function(a){aa.apply(ea,a)})}function ba(){P("cursor_zoom_in",ra),K("mouseover",C,qa),O("mouseover",D,qa),Invodo.PublishSubscribe.remove("zoomOutDone",function(a){ba.apply(ea,a)})}e&&(e="/"==e[e.length-1]?e:e+"/"),void 0==h&&(h=!0);var ca=600,da=[],ea=this;Invodo.EventDispatcher(ea);var fa="Invodo_InteractivePlayer_View_"+b;ea.firstRun=!0;var ga,ha,ia,ja,ka,la=e?e+"media/":Invodo.getAffiliateConfig().imageBase,ma=e?e:"//e.invodo.com/",na=e?e:"http://e.invodo.com/",oa=new Array,pa="Invodo_InteractivePlayer_View_Layout_"+b,qa=null,ra="InvodoInteractivePlayerControls_"+b,sa=ra+"_background",ta=ra+"_autoSpin",ua=ra+"_zoomIn",va=ra+"_zoomOut",wa=(new Array,a||null),xa=1,ya="InteractivePlayer",za=[],Aa=[],Ba=!1,Ca=!1,Da=!1,Ea=!0,Fa=null,Ga=!1,Ha={wait:{height:30,src:ma+"4.0/i/wait30.gif",width:30},cursor_hand_closed:{height:21,src:ma+"4.0/i/cursor_hand_closed.png",width:20},cursor_hand_open:{height:25,src:ma+"4.0/i/cursor_hand_open.png",width:19},cursor_hand_point:{height:26,src:ma+"4.0/i/cursor_hand_point.png",width:20},cursor_pan:{height:36,src:ma+"4.0/i/cursor_pan.png",width:36},cursor_zoom_in:{height:34,src:ma+"4.0/i/cursor_zoom_in.png",
width:33},cursor_zoom_out:{height:34,src:ma+"4.0/i/cursor_zoom_out.png",width:33},icn_pan_instructions:{height:115,src:ma+"4.0/i/icn_pan_instructions.png",width:130},icn_reset:{height:25,src:ma+"4.0/i/icn_reset.png",width:35},icn_spin:{height:25,src:ma+"4.0/i/icn_spin.png",width:29},icn_spin_instructions:{height:60,src:ma+"4.0/i/icn_spin_instructions.png",width:175},icn_zoom_in:{height:25,src:ma+"4.0/i/icn_zoom_in.png",width:24},icn_zoom_out:{height:25,src:ma+"4.0/i/icn_zoom_out.png",width:24}};(c||d)&&Invodo.Pod.load({pod:c,mpd:d},function(a){v(a)}),Invodo.PublishSubscribe.subscribe("spinning",function(a){m.apply(ea,a)}),Invodo.PublishSubscribe.subscribe("panning",function(a){l.apply(ea,a)}),Invodo.PublishSubscribe.subscribe("doneSpinning",function(a){o.apply(ea,a)}),Invodo.PublishSubscribe.subscribe("donePanning",function(a){n.apply(ea,a)}),ea.data=function(){},ea.e=function(){ja.e()},ea.getHotspot=function(a){return oa[a]},ea.getId=function(){return b},ea.getNumHotspots=function(){return oa.length},ea.getPhoto3d=function(){return ja},ea.getType=function(){return ya},ea.hide=function(){ea.setStyle("display","none")},ea.home=function(){ja.home()},ea.isHome=function(){return ja.isHome()},ea.listensTo=function(a){return b},ea.n=function(){ja.n()},ea.ne=function(){ja.ne()},ea.notify=function(a,b){switch(a){case"STOPPED":x();break;case"PLAYING":U()}switch(b){case"ready":ja.isHome()?T():w(),x();break;case"goinghome":case"spinning":w(),x();break;case"home":ea.firstRun=!1,T();break;case"zoomIn":$(),Invodo.PublishSubscribe.subscribe("zoomInDone",function(a){aa.apply(ea,a)});break;case"zoomOut":_(),Invodo.PublishSubscribe.subscribe("zoomOutDone",function(a){ba.apply(ea,a)})}},ea.remove=function(){Q()},ea.getParentDomId=function(){return wa},ea.nw=function(){ja.nw()},ea.receiveUpdate=function(a){},ea.registerEventListener=function(a,b){return da.push({eventName:a,callback:b}),ea},ea.registerObserver=function(a){ja.registerObserver(a)},ea.s=function(){ja.s()},ea.sendUpdate=function(a){},ea.setParent=function(a){wa=a;var b=document.getElementById(wa);try{b.appendChild(Fa)}catch(c){Invodo.Console.log("Could not move InteractivePlayer: new parent node not found or appendChild not supported.")}},ea.setStyle=function(a,b){ia.style[a]=b},ea.show=function(){ea.setStyle("display","block")},ea.se=function(){ja.se()},ea.stop=function(){return ja.stop(),ka.stop(),!0},ea.sw=function(){ja.sw()},ea.spin=function(a){ja.spin(a)},ea.w=function(){ja.w()},ea.disableDashboardButton=function(a,b){var c=document.getElementById(b);O("click",a,c),c.style.opacity="0.6",c.style.overflow="auto"},ea.enableDashboardButton=function(a,b){var c=document.getElementById(b);K("click",a,c),c.style.opacity="1",c.style.overflow="auto"},ea.zoomIn=function(){if(!(ja.getZoom()>0)){ja.stop(),ja.zoomIn(),$(),Invodo.PublishSubscribe.subscribe("zoomInDone",function(a){aa.apply(ea,a)});var a={pod:c,clip:null,playertype:"Spin",clktype:"Zoom",clktgt:"1"};Invodo.Module.get("logger").log(b,"userClick",a),ea.fire("userClick",a)}},ea.zoomOut=function(a){var d=!1;if(void 0===a&&(d=!0),!(ja.getZoom()<1||(ja.zoomOut(),_(),Invodo.PublishSubscribe.subscribe("zoomOutDone",function(a){ba.apply(ea,a)}),d))){var e={pod:c,clip:null,playertype:"Spin",clktype:"Zoom",clktgt:"0"};Invodo.Module.get("logger").log(b,"userClick",e),ea.fire("userClick",e)}}},Invodo.Src.Widget.InteractivePlayer.version="0.4.1",Invodo.Src.Widget.InteractivePlayer.VideoPlayer=function(){function a(a){for(var b=0;b<c.length;b++){var d=c[b];d&&"notify"in d&&d.notify(a)}}var b,c,d,e,f=this;f.hide=function(){d.hide()},f.init=function(a,g,h,i,j,k){e=document.createElement("video"),b=null,e&&e.canPlayType&&(b=e.canPlayType("video/mp4")),d=b?new Invodo.Src.Widget.InteractivePlayer.VideoPlayer.Html5Video(a,g,h,i,j,k):new Invodo.Src.Widget.InteractivePlayer.VideoPlayer.FlashVideo(a,g,h,i,j,k),c=new Array,d.registerObserver(f)},f.notify=function(b){a(b)},f.play=function(a){d.play(a)},f.position=function(a,b){d.position(a,b)},f.registerObserver=function(a){c.push(a)},f.registerParent=function(a){d.registerParent(a)},f.stop=function(){d.stop()}},Invodo.Src.Widget.InteractivePlayer.VideoPlayer.FlashVideo=function(a,b,c,d,e,f){function g(a){for(var b=0;b<h.length;b++){var c=h[b];c&&c.notify(a)}}var h=new Array,i=new Invodo.Src.Widget.InteractivePlayer.VideoPlayer.FlashVideo.Model(a,b,c,d,e,f),j=new Invodo.Src.Widget.InteractivePlayer.VideoPlayer.FlashVideo.Control(i),k=new Invodo.Src.Widget.InteractivePlayer.VideoPlayer.FlashVideo.View(i,j),l=this;i.registerObserver(l),l.hide=function(){k.hide(),i.stop()},l.notify=function(a){g(a)},l.play=function(a){i.play(a)},l.registerObserver=function(a){h.push(a)},l.registerParent=function(a){k.registerParent(a)},l.show=function(){k.show()},l.stop=function(){i.stop()},l.unregisterParent=function(){k.unregisterParent()},l.position=function(a,b){i.position(a,b)}},Invodo.Src.Widget.InteractivePlayer.VideoPlayer.FlashVideo.Model=function(a,b,c,d,e,f){function g(){for(var a=0;a<l.length;a++)l[a].notify(n)}var h=null,i="STARTING",j="STOPPED",k="PLAYING",l=new Array,m=this,n=j,o="4.0/fl/invodointeractive.swf",p=parseInt(c.x)||0,q=parseInt(c.y)||0,r=parseInt(c.width)||167,s=parseInt(c.height)||248;m.getDurableId=function(){return h.durableId||""},m.getId=function(){return a},m.getHeight=function(){return s*e},m.getPodId=function(){return d||""},m.getState=function(){return n},m.getSwfUrl=function(){return f+o},m.getVideo=function(){return h.http},m.getWidth=function(){return r*e},m.getX=function(){return p*e},m.getY=function(){return q*e},m.isPlaying=function(){return n==k?!0:!1},m.play=function(a){for(var c=0;c<b.length;c++)b[c].durableId==a&&(h=b[c],n=k,g(n));n!=i&&(n=i,g(n))},m.position=function(a,b){p=parseInt(a),q=parseInt(b),g()},m.registerObserver=function(a){l.push(a)},m.stop=function(){n!=j&&(n=j,g(n))}},Invodo.Src.Widget.InteractivePlayer.VideoPlayer.FlashVideo.Control=function(a){var b=a;this.click=function(){var a=b.getState();switch(a){case"PLAYING":b.stop();break;default:b.stop()}}},Invodo.Src.Widget.InteractivePlayer.VideoPlayer.FlashVideo.View=function(a,b){function c(){if(i){var a=document.getElementById(g);if(a)return;if(f=document.createElement("div")){f.id=g,f.style.display="none",f.attachEvent?f.attachEvent("onmouseup",d):f.addEventListener&&f.addEventListener("click",d);var b='<object style="background:#000000;cursor:hand;cursor:pointer;" id="'+l+'" height="100%" width="100%" data="'+h.getSwfUrl()+'" type="application/x-shockwave-flash"><param name="wmode" value="opaque" /><param name="bgcolor" value="#000000" /><param name="allowscriptaccess" value="always" /><param name="movie" value="'+h.getSwfUrl()+'" /></object>';f.innerHTML=b,i.appendChild(f)}var c=document.getElementById(l);c.style.left="0px",c.style.top="0px",c.onclick=d}}function d(){var a=document.getElementById(g);a&&a.style&&(a.style.display="none"),e.click()}var e=b,f=null,g="Invodo_FlashVideo_View_"+a.getId(),h=a,i=null,j=this,k="STOPPED",l="Invodo_FlashVideo_Object_"+a.getId();j.click=function(){e.click()},j.hide=function(){f=document.getElementById(g),f&&(f.style.display="none",domVideo=document.getElementById(l),domVideo&&(domVideo.style.display="none"),domVideo=null)},j.logTime=function(a){Invodo.Module.get("logger").log("InteractivePlayer","timePlayed",{tm:a,fr:h.getDurableId(),pod:h.getPodId()})},j.notify=function(a){switch(a){case"STARTING":var b=document.getElementById(g);null==b&&(c(),b=document.getElementById(g));var d=document.getElementById(l);if(d){b.style.position="absolute",b.style.height=Math.ceil(h.getHeight())+"px",b.style.width=Math.ceil(h.getWidth())+"px",b.style.left=h.getX()+"px",b.style.top=h.getY()+"px",d.style.display="block",b.style.display="block";try{var e=5,f=0,i=100,j=setInterval(function(){if(f++,f>=e)return void clearInterval(j);if(d=document.getElementById(l),d&&d.playVideo){clearInterval(j);try{d.playVideo(h.getVideo())}catch(a){}}},i)}catch(m){}}break;case"STOPPED":b=document.getElementById(g),d=document.getElementById(l),b&&d&&b.removeChild(d),b&&b.parentNode.removeChild(b),k="STOPPED"}},j.registerParent=function(a){i=document.getElementById(a)},GlobalInvodoFlashVideoView=j,h.registerObserver(j)},Invodo.Src.Widget.InteractivePlayer.Hotspot=function(){function a(){for(var a=0;a<g.length;a++)g[a].notify(c)}var b,c,d,e,f,g,h=this;h.flash=function(){f.flash()},h.getAction=function(){return e.getAction()},h.hide=function(){f.hide()},h.init=function(a,c,g,i,j,k,l){d=new Array,e=new Invodo.Src.Widget.InteractivePlayer.Hotspot.Model(a,c,g.action,g.color,g.coords,i,k),e.registerObserver(h),b=new Invodo.Src.Widget.InteractivePlayer.Hotspot.Control(e),f=new Invodo.Src.Widget.InteractivePlayer.Hotspot.View(e,b,l),f.registerParent(j)},h.onMouseOver=function(a){f.onMouseOver(a)},h.notify=function(){arguments[0]||null;a(c)},h.position=function(a,b){e.position(a,b)},h.registerEventListener=function(a,b){d.push([a,b]),f.registerEventListener(a,b)},h.registerParent=function(a){},h.scale=function(a){f.scale(a)},h.show=function(){f.show()},h.unregisterParent=function(){f.unregisterParent()}},Invodo.Src.Widget.InteractivePlayer.Hotspot.Model=function(a,b,c,d,e,f,g){function h(){for(var a=0;a<k.length;a++)k[a].notify(c)}this.action=c;var i=d||"",j=parseInt(e[3])-parseInt(e[1]);this.id="InvodoHotspot_"+(new Date).getMilliseconds()+"_"+b;var k=new Array,l=this,m=parseInt(e[2])-parseInt(e[0]);this.x=e[0],this.y=e[1],l.click=function(){h()},l.getAction=function(){return this.action},l.getColor=function(){return i},l.getHeight=function(){return j*g},l.getPodId=function(){return f},l.getId=function(){return a},l.getInstanceId=function(){return b},l.getWidth=function(){return m*g},l.getX=function(){return l.x*g},l.getY=function(){return l.y*g},l.position=function(a,b){l.x=a,l.y=b,h()},l.registerObserver=function(a){k.push(a)},l.setScale=function(a){a=parseInt(a)}},Invodo.Src.Widget.InteractivePlayer.Hotspot.Control=function(a){this.click=function(b){a.click()}},Invodo.Src.Widget.InteractivePlayer.Hotspot.View=function(a,b,c){function d(){w?v?(z.ontouchstart=o,z.ontouchend=m,z.ontouchmove=n):z.onclick=l:"ontouchend"in z?(z.ontouchstart=o,z.ontouchend=m,z.ontouchmove=n):z.onclick=l,z.onmouseover=h,z.onmouseout=i,z.onmousedown=f,z.onmousemove=g}function e(){E&&(z=document.createElement("div"),z.id=A,z.style.left=a.getX()+"px",z.style.top=a.getY()+"px",z.style.height=Math.ceil(a.getHeight())+"px",z.style.width=Math.ceil(a.getWidth())+"px",""!=a.getColor()&&(z.style.backgroundColor="#"+a.getColor()),z.style.cursor="hand",z.style.cursor="pointer",z.style.opacity="0.0",z.style.filter="alpha(opacity=0.0)",z.style.filter="progid:DXImageTransform.Microsoft.Alpha(Opacity=0)",z.style.position="absolute",z.style.display="none",E.appendChild(z),Invodo.Module.get("logger").log(a.getId(),"hotspotView",{pn:Invodo.getPageName(),fr:a.getAction(),pod:a.getPodId()}))}function f(a){C=!0,c&&"callMouseDown"in c&&c.callMouseDown(a)}function g(a){C=!1,c&&"callMouseMove"in c&&c.callMouseMove(a)}function h(a){u&&u(),j()}function i(a){s()}function j(b){z.className=y,""!=a.getColor()&&(z.style.backgroundColor="#"+a.getColor()),z.style.cursor="hand",z.style.cursor="pointer",z.style.filter="progid:DXImageTransform.Microsoft.Alpha(Opacity=10)",z.style.filter="alpha(opacity=10)",z.style.opacity="0.1",z.style.position="absolute"}function k(a,b){for(var c=0;c<B.length;c++){var d=B[c],e=d[0],f=d[1];a==e&&f(b)}}function l(b){if(C){k("click",a.getAction());try{var c={pn:Invodo.getPageName(),fr:a.getAction(),pod:a.getPodId()};Invodo.Module.get("logger").log(a.getId(),"hotspotClick",c)}catch(b){}}C=!1}function m(b){if(s(),G){k("click",a.getAction());try{var c={pn:Invodo.getPageName(),fr:a.getAction(),pod:a.getPodId()};Invodo.Module.get("logger").log(a.getId(),"hotspotClick",c)}catch(b){}}G=!1}function n(a){G=!1,F.hide(),c.callTouchMove(a)}function o(a){j(),G=!0,c&&"callTouchStart"in c&&c.callTouchStart(a)}function p(){E&&z&&E.removeChild(z)}function q(){"ontouchend"in z?(z.ontouchstart=null,z.ontouchend=null):z.onclick=null,z.onmouseover=null,z.onmouseout=null}function r(b){D=b+"";var c=document.getElementById(a.getId());c.style.opacity=b+"",c.style.filter="alpha(opacity="+b+")",c.style.filter="progid:DXImageTransform.Microsoft.Alpha(Opacity="+b+")"}function s(a){z.className=x,z.style.filter="progid:DXImageTransform.Microsoft.Alpha(Opacity=0)",z.style.filter="alpha(opacity=0)",z.style.opacity="0.0"}function t(){var b=document.getElementById(a.getId());b&&(b.style.cssText="left:"+a.getX()+"px;top:"+a.getY()+"px;")}var u,v=navigator.userAgent.toLowerCase().indexOf("fennec")>-1,w=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,x="InvodoHotspotOff",y="InvodoHotspotOn",z=null,A="Invodo_Hotspot_"+a.getInstanceId()+"_"+a.getId(),B=new Array,C=!1,D=0,E=null,F=this,G=!1;a.registerObserver(F),F.flash=function(){var b=(document.getElementById(a.getId()),0),c=setInterval(function(){if(b=D+.01,b>=.1){r(.1),clearInterval(c);var a=setInterval(function(){b-=.01,0>=b&&(r(0),clearInterval(a))},50)}},10)},F.hide=function(){z.style.display="none",q()},F.onMouseOver=function(a){u=a},F.notify=function(a){t()},F.registerEventListener=function(a,b){B.push([a,b])},F.registerParent=function(a){E=document.getElementById(a),e()},F.show=function(){z.style.display="block",d()},F.unregisterParent=function(){p(),E=null}},Invodo.Src.Widget.InteractivePlayer.VideoPlayer.Html5Video=function(a,b,c,d,e){function f(a){for(var b=0;b<g.length;b++){var c=g[b];c&&c.notify(a)}}var g=new Array,h=new Invodo.Src.Widget.InteractivePlayer.VideoPlayer.Html5Video.Model(a,b,c,e),i=new Invodo.Src.Widget.InteractivePlayer.VideoPlayer.Html5Video.Control(h),j=new Invodo.Src.Widget.InteractivePlayer.VideoPlayer.Html5Video.View(h,i,d),k=this;h.registerObserver(k),k.hide=function(){var a=h.getState();"PLAYING"==a&&h.stop(),j.hide()},k.notify=function(a){f(a)},k.play=function(a){h.play(a)},k.position=function(a,b){h.position(a,b)},k.registerObserver=function(a){g.push(a)},k.registerParent=function(a){j.registerParent(a)},k.show=function(){j.show()},k.stop=function(){h.stop()},k.unregisterParent=function(){j.unregisterParent()}},Invodo.Src.Widget.InteractivePlayer.VideoPlayer.Html5Video.Model=function(a,b,c,d){function e(){for(var a=0;a<l.length;a++)l[a].notify(m)}var f=this,g="",h="STOPPED",i="PLAYING",j=null,k=c.height||0,l=new Array,m=h,n=b,o=c.width||0,p=parseInt(c.x)||0,q=parseInt(c.y)||0;f.getDurableId=function(){return j.durableId||""},f.getHeight=function(){return k*d},f.getId=function(){return a},f.getState=function(){return m},f.getVideo=function(){return g+j.http},f.getWidth=function(){return o*d},f.getX=function(){return p*d},f.getY=function(){return q*d},f.play=function(a){for(var b=0;b<n.length;b++)n[b].durableId==a&&(j=n[b],m=i,e(m))},f.position=function(a,b){a=a,b=b,e()},f.registerObserver=function(a){l.push(a)},f.stop=function(){m=h,e(m)}},Invodo.Src.Widget.InteractivePlayer.VideoPlayer.Html5Video.Control=function(a){var b=a,c=this;c.click=function(){var a=b.getState();switch(a){case"PLAYING":b.stop()}}},Invodo.Src.Widget.InteractivePlayer.VideoPlayer.Html5Video.View=function(a,b,c){function d(){if(r){if(m=document.getElementById(n))return;m=document.createElement("div"),m.id=n,m.style.display="none",r.appendChild(m),k=document.createElement("video"),k.id=l,k.type="video/mp4",k.autoplay="true",k.addEventListener("ended",function(){s.hide()},!1),k.addEventListener("loadstart",function(){s.showLoading()},!1),k.addEventListener("canplay",function(){s.hideLoading()},!1),k.addEventListener("pause",function(){k.webkitDisplayingFullscreen||s.hide()},!1),"ontouchend"in m?m.ontouchend=g:m.onclick=f,m.appendChild(k),p=document.createElement("div"),p.id=o,p.innerHTML=q,p.style.display="none",m.appendChild(p)}}function e(){Invodo.Module.get("logger").log("InteractivePlayer","timePlayed",{tm:Math.round(k.currentTime),fr:a.getDurableId(),pod:c})}function f(){j.click()}function g(){j.click()}function h(){r&&m&&r.removeChild(m)}var i,j=b,k=null,l="Invodo_Html5Video_Video_"+a.getId(),m=null,n="Invodo_Html5Video_View_"+a.getId(),o="Invodo_Html5Video_Loading_View_"+a.getId(),p=null,q="Loading",r=null,s=this;a.registerObserver(s),s.hide=function(){m.style.display="none",k.style.display="none"},s.hideLoading=function(){document.getElementById(o).style.display="none"},s.notify=function(b){switch(m=document.getElementById(n),m.style.backgroundColor="#000000",m.style.position="absolute",m.style.left=a.getX()+"px",m.style.top=a.getY()+"px",m.style.height=Math.ceil(a.getHeight())+"px",m.style.width=Math.ceil(a.getWidth())+"px",m.style.display="block",k=document.getElementById(l),b){case"PLAYING":k&&(k.style.display="block",k.style.height="100%",k.style.width="100%",k.play&&(k.type="video/mp4",k.src=a.getVideo(),k.load(),k.play(),k.addEventListener("pause",function(){clearInterval(i)}),e(),i=setInterval(function(){e()},5e3)));break;case"STOPPED":k&&k.pause&&(k.pause(),clearInterval(i))}},s.registerParent=function(a){r=document.getElementById(a),d()},s.show=function(){m.style.display="block"},s.showLoading=function(){document.getElementById(o).style.display="block"},s.unregisterParent=function(){h(),r=null}},Invodo.Src.Widget.InteractivePlayer.Photo3d=function(){var a,b,c,d,e=600,f=600,g=this,h=0;g.callMouseDown=function(a){d.callMouseDown(a)},g.callSetCursorIcon=function(a,b){d.callSetCursorIcon(a,b)},g.callMouseOver=function(a){d.callMouseOver(a)},g.callMouseMove=function(a){d.callMouseMove(a)},g.callTouchMove=function(a){d.callTouchMove(a)},g.callTouchStart=function(a){d.callTouchStart(a)},g.e=function(){a.e()},g.getZoom=function(){return b.getZoom()},g.home=function(){b.home()},g.init=function(g,i,j,k,l,m,n,o,p,q,r,s,t,u){b=new Invodo.Src.Widget.InteractivePlayer.Photo3d.Model(j,l,m,n,f,e,h,o,p,q,r,s,t,u),b.init(l),a=new Invodo.Src.Widget.InteractivePlayer.Photo3d.Control(b),c=new Array,d=new Invodo.Src.Widget.InteractivePlayer.Photo3d.View(b,a,g,k,i),d.init()},g.isDragging=function(){return b.isDragging()},g.isHome=function(){return b.isHome()},g.isSpinning=function(){return b.isSpinning()},g.momentum=function(a){b.momentum(a)},g.n=function(){a.n()},g.ne=function(){a.ne()},g.nw=function(){a.nw()},g.play=function(){for(var a=[],c=arguments.length,d=0;c>d;d++)a.push(arguments[d]);b.play.apply(this,a)},g.registerObserver=function(a){b.registerObserver(a)},g.s=function(){a.s()},g.se=function(){a.se()},g.stop=function(){b.stop()},g.sw=function(){a.sw()},g.spin=function(b){a.spin(b)},g.w=function(){a.w()},g.zoomIn=function(){b.zoomIn()},g.zoomOut=function(){b.zoomOut()}},Invodo.Src.Widget.InteractivePlayer.Photo3d.Model=function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){function o(){setInterval(function(){var a;I.animation.length>0?(a=I.animation.shift(),ja=[a.x,a.y],x()):clearInterval(I.animationInterval)},I.spin_speed)}function p(a,b){return a/(b*b)}function q(){var a=R[ka[0]][ka[1]];return a&&"src"in a?a.src:void 0}function r(){var a=S[ka[0]][ka[1]];return a&&"src"in a?a.src:void 0}function s(a){var b=!1;return a>=0&&(b=!0),b}function t(){for(var a=1;K>a;a++){var b=R[a][ia[1]].src;if(b&&"undefined"!=b){var c=v(R[a][ia[1]].src);c.onload=function(){P++,P==K&&setTimeout(function(){I.getIntroSpin()?I.twirl("counterClockWise"):I.home(),I.state="ready"},1e3)}}}void 0===k?w():k&&w()}function u(){var a=v(R[ia[0]][ia[1]].src);P++,a.onload=function(){la=this.height,ma=this.width,I.state="dataready",x(),t()}}function v(a){var b=new Image;return b&&(b.src=Invodo.Url.removeProtocol(a)),b.onload=function(){},T.push(b),b}function w(){for(var a=0;a<R.length;a++)for(var b=R[a],c=0;c<b.length;c++)if(c!=ia[1]){var d=b[c];v(d.src)}}function x(){if(na&&na.length&&na.length>0)for(var a=0;a<na.length;a++)try{var b=na[a];b&&b.notify&&b.notify("model",I.getState())}catch(c){}}function y(a){ba=a}function z(){return ba}function A(a){ea=a}function B(){return ea}function C(a){ca=a}function D(){return ca}function E(a){da=a}function F(){return da}function G(){function a(a,b){for(var e=a,f=1;b>f;f++){for(e+=_;e>d;)e-=d+1;a=e,c.push(g[e])}return a}function b(a,b,e){function f(){for(;h+j>d;)h-=d+1;i=h+j,c.push(g[h+j])}for(var h=a,j=1;b>j;j++)if(e>0)for(var k=0;e>k;k++)f();else f();return i}var c=[],d=I.getMatrixWidth(),e=X[X.length-1],f=1;"right"===$&&(f=-1);var g=[];g.push(e);for(var h=1;d>=h;h++)g.push(f*h+e);var i=1;c.push(g[i]);var j=0;return 1===_&&(j=_*Z,i=a(i,j),j=_*Z+2,i=b(i,j,2)),2===_&&(j=_*Z,i=a(i,j),j=_*Z+2,i=b(i,j,2)),3===_&&(j=_*Z,i=a(i,j),j=_*Z+2,i=b(i,j,2)),4===_&&(j=_*Z,i=a(i,j),j=Math.ceil((_*Z+1)/2),i=b(i,j,0),i=b(i,7,2)),5===_&&(j=_*Z,i=a(i,j),j=Math.ceil((_*Z+1)/2),i=b(i,j,0),i=b(i,7,2),i=b(i,2,3)),6===_&&(j=_*Z,i=a(i,j),j=Math.ceil((_*Z+1)/2),i=b(i,j,0),i=b(i,11,2),i=b(i,4,3)),7===_&&(j=_*Z,i=a(i,j),j=Math.ceil((_*Z+1)/2),i=b(i,j,0),i=b(i,11,2),i=b(i,4,3)),8===_&&(j=_*Z,i=a(i,j),j=Math.ceil((_*Z+1)/2),i=b(i,j,0),i=b(i,11,2),i=b(i,4,3)),0===_&&Invodo.PublishSubscribe.publish("doneSpinning",[]),c}function H(a,b){var c=(I.getMatrixHeight(),I.getMatrixWidth()),d=a[0],e=a[1],f=Math.floor(d/c);if(d-=f*c,d=Math.abs(d),0>d&&(d+=c-1),d>=c&&(d-=c-1),d>=c&&(d-=c),d=Math.abs(d),ja=[d,e],ka=[d,e],b?(E(ka[0]),A(ka[1])):(C(ka[0]),y(ka[1]),E(ka[0]),A(ka[1])),d>=0){var g=R[d][e];g&&"src"in g&&(v(g.src),x())}}var n=n||"LU";n=n.toUpperCase(),"NEW"==n&&(n="LU"),"OLD"==n&&(n="UR");var I=this;Invodo.EventDispatcher(I),I.animation=[],I.animationInterval;var J,K,L,M,N,O,P=0,Q="",R=new Array,S=new Array,T=new Array,U=!1,V=!1,W=0,X=[],Y=[],Z=0,$="left",_=0,aa=!1,ba="none",ca="none",da="none",ea="none",fa=0,ga=0;switch(h){case 1:Z=5;break;case 2:Z=4;break;case 3:Z=3;break;case 4:Z=2;break;case 5:Z=1;break;default:Z=2}I.findhome_interval=null;var ha,ia=j?j:b.homeAddress,ja=ia,ka=[0,0],la=0,ma=0,na=new Array,oa={},pa=10,qa=.97,ra=200,sa="",ta=null;void 0==i&&(i=!0),I.isZoomAvailable=function(){return aa},I.initializeMomentum=function(){clearInterval(W)},I.e=function(){I.move("e")},I.findHome=function(a){if(Invodo.PublishSubscribe.publish("findingHome",[]),I.isHome())clearInterval(I.findhome_interval),I.state="home",Invodo.PublishSubscribe.publish("modelIsHome",[]);else if(I.state="goinghome",a)"counterClockWise"===a?I.w():"clockWise"===a&&I.e();else{var b=ia[0],c=Math.abs(ja[0]),d=R.length,e=Math.abs(b-c),f=Math.round(d/2);f>e?c>b?I.w():I.e():c>b?I.e():I.w(),ja[1]<ia[1]&&I.n(),ja[1]>ia[1]&&I.s()}x()},I.getCurrentView=function(){return ja},I.getHeight=function(){return la},I.getId=function(){return d},I.getIndex=function(){return ja},I.getIntroSpin=function(){return i},I.getMatrixDirection=function(){return n},I.getMatrixHeight=function(){return R[0].length},I.getMatrixWidth=function(){return R.length},I.getParentHeight=function(){return l},I.getParentWidth=function(){return m},I.getPodId=function(){return a},I.getSrc=function(){return q()},I.getSrcBigImage=function(){return r()},I.getState=function(){return I.state},I.getView=function(){return R[ja[0]][ja[1]]},I.getWidth=function(){return ma},I.getZoom=function(){return g},I.grab=function(a){V=a,x()},I.home=function(a){I.initializeMomentum(),I.isSpinning()&&I.stop(),"goinghome"!=I.state&&(I.state="goinghome",clearInterval(I.findhome_interval),I.findhome_interval=setInterval(function(){I.findHome(a)},I.spin_speed)),x()},I.init=function(a){switch(a.bigImages&&a.bigImages.length>0&&(aa=!0),ha=oa,K=a.matrix_dimensions.cols,J=a.matrix_dimensions.rows,ia[0]+1>K&&(ia[0]=0),ia[1]+1>J&&(ia[1]=0),N=a.images,aa&&(O=a.bigImages),n){case"UR":case"OLD":for(var b=0;K>b;b++){for(var c="",d=new Array,e=0;J>e;e++){var f=b,g=e,h=f*J+g;c=Q+N[h],d.push({height:I.getHeight(),src:c,width:I.getWidth(),x:0,y:0})}R.push(d)}break;case"LU":case"NEW":for(var b=0;K>b;b++){for(var c="",i="",d=new Array,j=new Array,e=0;J>e;e++){var f=b,g=e,h=e*K+b;c=Q+N[h],d.push({height:I.getHeight(),src:c,width:I.getWidth(),x:0,y:0}),aa&&(i=Q+O[h],j.push({height:I.getHeight(),src:i,width:I.getWidth(),x:0,y:0}))}R.push(d),aa&&S.push(j)}}u()},I.isDragging=function(){return V},I.isForward=function(){var a=Math.round(.25*K),b=Math.round(.75*K),c=ja[0],d=(ja[1],null);return d=c>a&&b>c?!1:!0},I.isHome=function(){return ja[0]==ia[0]&&ja[1]==ia[1]?!0:!1},I.isReady=function(){return"ready"==I.state?!0:!1},I.isSpinning=function(){return U},I.momentum=function(a){sa=a,ta=setTimeout(function(){I[sa](),ra>pa?(pa=p(pa,qa),I.momentum(sa)):pa=10},pa)},I.move=function(a){var b,c,d,e=ja[0],f=ja[1],g=R[e],h=R.length,i=h-1;switch(a){case"n":var j=g.length-1;d=f+1,c=e,I.isForward()||(d=f-1);var b;d>j&&(d=j),0>d&&(d=0);break;case"s":c=L;break;case"e":c=e+1,c>=i&&(c-=h),d=f;break;case"w":c=e-1,0>c&&(c+=h),d=f}b=[c,d],H(b)},I.n=function(){I.move("n")},I.ne=function(){I.n(),I.e()},I.nw=function(){I.n(),I.w()},I.play=function(){if(arguments.length>0)for(var a=arguments.length,b=0;a>b;b++){var c=arguments[b];c&&s(c.x)&&s(c.y)&&I.animation.push(c)}o()},I.registerObserver=function(a){na.push(a)},I.s=function(){var a=ja[0],b=ja[1],c=R[a],d=R.length-1,e=b-1,f=c.length-1;I.isForward()||(e=b+1),0>e&&(e=0),e>f&&(e=f),a>d&&(a=d),0>a&&(a=0),M=[a,e],H(M)},I.se=function(){I.s(),I.e()},I.addToXIndexHistory=function(a){X.push(a)},I.addToYIndexHistory=function(a){Y.push(a)},I.getYIndexHistory=function(){return Y},I.setIndex=function(a,b,c){Invodo.PublishSubscribe.publish("spinIndex",[{xIndex:a},{yIndex:b}]),H([a,b],c)},I.calculateSpinDirection=function(a){return $=a.x_percent>0?"right":"left"},I.setSpinDirection=function(a){$=a},I.spinWithMomentum=function(){var b=Y[Y.length-1],c=G(),e=0,f=50;W=setInterval(function(){if(e++,e>=c.length){clearInterval(W),Invodo.PublishSubscribe.publish("doneSpinning",[]);var f=D()+","+z(),g=F()+","+B(),h=ga-fa,i={pod:a,eltime:h,relxy:f,stopxy:g};return Invodo.Module.get("logger").log(d,"spinData",i),I.fire("spinData",i),_=0,E("none"),void A("none")}try{var j=!0;I.setIndex(c[e],b,j)}catch(k){}},f)},I.initializeXIndexHistory=function(){X=[]},I.initializeYIndexHistory=function(){Y=[]},I.setMomentum=function(a){_=a},I.calculateMomentum=function(a){var b=0;return a>0&&.2>=a&&(b=1),a>.2&&.4>=a&&(b=2),a>.4&&.8>=a&&(b=3),a>.8&&1.2>=a&&(b=4),a>1.2&&1.6>=a&&(b=5),a>1.6&&2>=a&&(b=6),a>2&&2.4>=a&&(b=7),a>2.4&&(b=8),b},I.spin_interval=null,I.spin_speed=100,I.spin=function(a){var b=null;switch(clearInterval(I.findhome_interval),clearInterval(I.spin_interval),I.stop(),I.state="spinning",a){case"n":b=I.n;break;case"s":b=I.s;break;case"e":b=I.e;break;case"w":b=I.w;break;case"nw":b=I.nw;break;case"ne":b=I.ne;break;case"se":b=I.se;break;case"sw":b=I.sw}I.spin_interval=setInterval(b,I.spin_speed),U=!0},I.stop=function(){I.initializeMomentum(),clearInterval(I.spin_interval),I.spin_interval=null,U=!1,I.state="ready",x()},I.sw=function(){I.s(),I.w()},I.touch=function(){I.stop()},I.twirl=function(a){var b=I.getMatrixWidth();a?("counterClockWise"===a?M=[b-1,ia[1]]:"clockWise"===a&&(M=[1,ia[1]]),ja=M,I.home(a)):(M=[Math.floor(K/2),ia[1]],ja=M,I.home())},I.startSpinTimer=function(){fa=(new Date).getTime()},I.stopSpinTimer=function(){ga=(new Date).getTime()},I.w=function(){I.move("w")},I.zoomIn=function(){g++,I.state="zoomIn",x()},I.zoomOut=function(){g--,I.state="zoomOut",x()}},Invodo.Src.Widget.InteractivePlayer.Photo3d.View=function(a,b,c,d,e){function f(){aa||(aa=setTimeout(function(){aa=null,K()},66))}function g(){Fa=!0}function h(){Fa=!1}function i(){Ga=!0}function j(){Ga=!1}function k(){var a=document.getElementById(da);a&&(l("mousedown",s,a),l("touchstart",D,a),l("touchmove",E,a),l("touchend",C,a))}function l(a,b,c){"addEventListener"in c?c.addEventListener(a,b,!1):"attachEvent"in c&&c.attachEvent("on"+a,b)}function m(a,b,c,d){var e={h:!1,v:!1};return d>b&&(e.h=!0),c>a&&(e.v=!0),e}function n(){return document.getElementById(c)}function o(){return document.getElementById(e)}function p(a,b,c,d){var e={height:0,width:0};if(a==c&&b==d)return e.height=c,e.width=d,e;var f=c/a,g=d/b,h=parseInt(c),i=parseInt(b*f);if(d>=i)return e.height=c,e.width=i,e;var h=parseInt(a*g),i=parseInt(d);return c>=h&&(e.height=h,e.width=d),e}function q(){var a=document.getElementById(ga);a&&a.style&&(a.style.display="none"),a=null}function r(){try{var a=ha.getIndex(),b={nx:a[0]+","+a[1],pod:ha.getPodId()};Invodo.Module.get("logger").log("InteractivePlayer","photoView",b)}catch(c){}}function s(a){var b=document.getElementById(da);if(b.setCapture&&b.setCapture(),ca=!1,wa=!1,document.addEventListener?(document.addEventListener("mousemove",u,!1),document.addEventListener("mouseup",w,!1)):document.attachEvent&&(document.attachEvent("onmousemove",u),document.attachEvent("onmouseup",w)),ha.getMatrixHeight()>1){var c=a||window.event;(c&&c.preventDefault&&!oa||Ha!==Ia)&&c.preventDefault()}var d=v(a);ja=d.x,ka=d.y,ia=(new Date).getTime(),va||ba.mouseDown(d.x,d.y)}function t(a,b,c,d,e,f){var g=f-c,h=d-a,i=ha.getWidth(),j=h/i,k=e-b,l=ha.getHeight(),m=k/l;return{duration:g,t1:c,t2:f,x1:a,x2:d,x_delta:h,x_percent:j,y1:b,y2:e,y_delta:k,y_percent:m}}function u(a){ca=!0;var b=a||window.event;b&&b.preventDefault?b.preventDefault():b.returnValue=!1;var c=v(b),d=t(ja,ka,ia,c.x,c.y,c.time);va?(W("cursor_pan",da),V(d,wa)):(W("cursor_hand_closed",da),ba.mouseDrag(d)),wa=d}function v(a){var b=0,c=0,d=(new Date).getTime(),e=a||window.event;if(!e)return{x:0,y:0};if(e.pageX)b=e.pageX,c=e.pageY;else if(e.clientX)b=e.clientX,c=e.clientY;else if("touches"in a){var f=a.touches[0];b=f.pageX,c=f.pageY}else b=c=0;return{x:b,y:c,time:d}}function w(a){!ca&&ha.isZoomAvailable()?0===ha.getZoom()?ha.zoomIn():ha.zoomOut():va?ha.isZoomAvailable()&&(W("cursor_zoom_out",da),Invodo.PublishSubscribe.publish("donePanning",[])):(ba.mouseUp(),ha.isZoomAvailable()?W("cursor_zoom_in",da):W("cursor_hand_open",da)),ca=!1,document.removeEventListener?(document.removeEventListener("mousemove",u),document.removeEventListener("mouseup",w)):(document.detachEvent("onmousemove",u),document.detachEvent("onmouseup",w)),wa=!1,document.onmousemove=null;var b=document.getElementById(da);b.releaseCapture&&b.releaseCapture(),r()}function x(a){ba.click()}function y(a){a.preventDefault&&a.preventDefault(),w()}function z(){var a=document.getElementById(da);a&&(A("mousedown",s,a),A("touchstart",D,a),A("touchmove",E,a),A("touchend",C,a))}function A(a,b,c){"removeEventListener"in c?c.removeEventListener(a,b):"attachEvent"in c&&c.detachEvent("on"+a,b)}function B(a){$&&$.exit(),$=Pa[a],$.enter()}function C(a){F(a)}function D(a){return ta&&F(),2===a.touches.length?void(ua=!0):(a.touches.length<2&&(1===ha.getMatrixHeight()?ma||a&&a.preventDefault&&a.preventDefault():oa=na?!0:!1,s(a)),void(ta=!0))}function E(a){if(!(a.touches.length>1||ua)){var b=v(a);if(1===ha.getMatrixHeight()){if(!ra){var c=Math.abs(ja-b.x),d=Math.abs(ka-b.y);ra=d>=c&&!va?"scroll":"spin"}switch(ra){case"scroll":ca&&(ba.touchEnd(),ca=!1),ma=!0;break;case"spin":ma=!1,ca=!0;var e=t(ja,ka,ia,b.x,b.y,b.time);va?V(e,wa):ba.touchMove(e),wa=e}}else{ca=!0;var f=ka-b.y,g=Math.abs(ja-b.x),h=Math.abs(f);Ha=0>f?"draggingDown":"draggingUp",oa&&Ha===Ia||a.preventDefault(),na=!va&&h>=g&&("draggingDown"===Ha&&Fa||"draggingUp"===Ha&&Ga)?!0:!1;var e=t(ja,ka,ia,b.x,b.y,b.time);va?V(e,wa):ba.touchMove(e),wa=e}}}function F(a){ua||(ca||ma||!ha.isZoomAvailable()?va||ba.mouseUp():0===ha.getZoom()?ha.zoomIn():ha.zoomOut(),ca=!1,document.removeEventListener?(document.removeEventListener("mousemove",u),document.removeEventListener("mouseup",w)):(document.detachEvent("onmousemove",u),document.detachEvent("onmouseup",w)),k(),r(),Ia=Ha,ra=!1,ta=!1,wa=!1),ua=!1}function G(a,b){switch(a){case"model":switch(b){case"dataready":B("dataloaded");case"ready":B("ready");break;case"goinghome":B("goinghome");break;case"home":B("home");break;case"zoomIn":B("zoomIn");break;case"zoomOut":B("zoomOut");break;case"zoomNormal":B("zoomNormal")}}if(_=10,va){var c=o();Ka=c.clientHeight,Ja=c.clientWidth;var d=Z.src,e=ha.getSrcBigImage()||"";e!=d&&(Z.src=e,xa||(Aa=Math.abs(Ka/(200/za)),Ba=Math.abs(Ja/(200/za)),M()))}else{var d=Z.src,f=ha.getSrc()||"";if(f!=d&&(Z.src=f,xa)){var g=parseInt(Z.style.top),h=parseInt(Z.style.left);Aa=Math.abs(g/(100/za)),Ba=Math.abs(h/(100/za)),H()}}}function H(){var a=null,b=za,c=Aa,d=Ba,e=P(Z,b),f=Q(Z,b);
if(e&&f){for(var g=0;g<ya.length;g++)clearInterval(ya[g]);xa=!1,Ea&&(Z.parentElement.style.width="100%",Z.parentElement.style.height="100%",Z.parentElement.style.maxWidth=Ma+"px"),L(),Invodo.PublishSubscribe.publish("zoomOutDone",[])}else U(Z,c),T(Z,d),a=setInterval(H,_),_+=1e4,ya.push(a)}function I(){if(Ea&&(Z.parentElement.style.maxHeight=Z.parentElement.clientWidth+"px"),va&&sa!==!1){var a=sa-Z.parentElement.clientWidth,b=a/2;Z.style.top=parseInt(Z.style.top)+b+"px",Z.style.left=parseInt(Z.style.left)+b+"px"}}function J(){if(Ea&&(Z.parentElement.style.maxHeight=Z.parentElement.clientWidth/Na+"px"),va&&sa!==!1){var a=sa-Z.parentElement.clientWidth,b=a/2;Z.style.left=parseInt(Z.style.left)+b+"px";var c=0;0!==Oa&&(c=b/Oa),Z.style.top=parseInt(Z.style.top)+c+"px"}}function K(){0!==Na&&(1===Na?I():J()),sa=Z.parentElement.clientWidth}function L(){Ea&&0!==Na&&(1===Na?Z.parentElement.style.maxHeight=Z.parentElement.clientWidth+"px":Z.parentElement.style.maxHeight=Math.floor(Z.parentElement.clientWidth/Na)+"px")}function M(){var a=null,b=za,c=Aa,d=Ba,e=N(Z,b),f=O(Z,b);if(e&&f){for(var g=0;g<ya.length;g++)clearInterval(ya[g]);xa=!0,Ea&&(Z.parentElement.style.width="100%",Z.parentElement.style.height="100%",Z.parentElement.style.maxWidth=Ma+"px"),L(),0!==Z.style.top&&(Oa=Z.style.left/Z.style.top),Invodo.PublishSubscribe.publish("zoomInDone",[])}else R(Z,c),S(Z,d),Ea&&(Z.parentElement.style.width=Ja+"px",Z.parentElement.style.height=Ka+"px"),a=setInterval(M,_),_+=1e4,ya.push(a)}function N(a,b){var c=!1,d=parseInt(a.style.width);return 200>d?(d+=b,a.style.width=d+"%"):(c=!0,a.style.width=d+"%"),c}function O(a,b){var c=!1;if("auto"===a.style.height)return c=!0;var d=parseInt(a.style.height);return 200>d?(d+=b,a.style.height=d+"%"):(c=!0,a.style.height=d+"%"),c}function P(a,b){var c=!1,d=parseInt(a.style.width);return d>100?(d-=b,a.style.width=d+"%"):(c=!0,a.style.width=d+"%"),c}function Q(a,b){var c=!1;if("auto"===a.style.height)return c=!0;var d=parseInt(a.style.height);return d>100?(d-=b,a.style.height=d+"%"):(c=!0,a.style.height=d+"%"),c}function R(a,b){var c=!1,d=parseInt(a.style.top);return-(Ka/za)>=d-b?(c=!0,d-=b,a.style.top=d+"px"):(d-=b,a.style.top=d+"px"),c}function S(a,b){var c=!1,d=parseInt(a.style.left);return-(Ja/za)>=d-b?(c=!0,d-=b,a.style.left=d+"px"):(d-=b,a.style.left=d+"px"),c}function T(a,b){var c=!1,d=parseInt(a.style.left),e=!1;return 0>d&&(e=!0),e?d+b>=0?(c=!0,a.style.left="0px"):(Ca++,d+=b,a.style.left=d+"px"):0>=d-b?(c=!0,a.style.left="0px"):(Ca++,d-=b,a.style.left=d+"px"),c}function U(a,b){var c=!1,d=parseInt(a.style.top),e=!1;return 0>d&&(e=!0),e?d+b>=0?(c=!0,a.style.top="0px"):(Da++,d+=b,a.style.top=d+"px"):0>=d-b?(c=!0,a.style.top="0px"):(Da++,d-=b,a.style.top=d+"px"),c}function V(a,b){Invodo.PublishSubscribe.publish("panning",[]);var c=0,d=0;b!==!1&&(c=b.x2-a.x2,d=b.y2-a.y2);var e=parseInt(Z.style.left)-c,f=parseInt(Z.style.top)-d;f>0||-Ka>f||(Z.style.top=f+"px"),e>0||-Ja>e||(Z.style.left=e+"px")}function W(a,b){var c=document.getElementById(b),e="";switch(a){case"cursor_hand_closed":e="url("+d.cursor_hand_closed.src+"), auto";break;case"cursor_hand_open":e="url("+d.cursor_hand_open.src+"), auto";break;case"cursor_hand_point":e="url("+d.cursor_hand_point.src+"), auto";break;case"cursor_pan":e="url("+d.cursor_pan.src+"), auto";break;case"cursor_zoom_in":e="url("+d.cursor_zoom_in.src+"), auto";break;case"cursor_zoom_out":e="url("+d.cursor_zoom_out.src+"), auto";break;case"default":e="default";break;default:e="default"}c.style.cursor=e}function X(){va=!0,W("cursor_zoom_out",da)}function Y(){va=!1,W("cursor_zoom_in",da)}var Z,$,_,aa,ba=b,ca=!1,da="Invodo_Photo3d_View_Hotzone_"+a.getId(),ea="Invodo_Photo3d_View_"+a.getId(),fa=new Array,ga="Invodo_Photo3d_View_Loading_"+a.getId(),ha=a,ia=null,ja=null,ka=null,la=(ha.getView(),"InvodoPhoto3dView_"+a.getId()),ma=!1,na=!1,oa=!1,pa=this,qa=new Array,ra="spin",sa=!1,ta=!1,ua=!1,va=!1,wa=!1,xa=!1,ya=[],za=2,Aa=0,Ba=0,Ca=0,Da=0,Ea=!1,Fa=!1,Ga=!0,Ha="none",Ia="none",Ja=0,Ka=0,La=0,Ma=0,Na=0,Oa=0;ha.registerObserver(pa),Invodo.PublishSubscribe.subscribe("cannotMoveMoreNorthOnMultiAxis",function(a){g.apply(pa,a)}),Invodo.PublishSubscribe.subscribe("canMoveMoreNorthOnMultiAxis",function(a){h.apply(pa,a)}),Invodo.PublishSubscribe.subscribe("cannotMoveMoreSouthOnMultiAxis",function(a){i.apply(pa,a)}),Invodo.PublishSubscribe.subscribe("canMoveMoreSouthOnMultiAxis",function(a){j.apply(pa,a)});var Pa={starting:{enter:function(){var a=n(),b=(ha.getParentHeight(),ha.getParentWidth(),ha.getView(),document.createElement("div"));b.id=la,b.style.height="100%",b.style.overflow="hidden",b.style.width="100%",b.style.position="relative",b.attachEvent?b.attachEvent("onclick",x):b.addEventListener&&b.addEventListener("click",x,!0),a.appendChild(b);var c=document.createElement("img");c.id=ea,c.style.height="auto",c.style.position="relative",c.style.width="100%",c.style.display="block",c.style.top="0px",c.style.left="0px",c.style.maxWidth="none",c.style.maxHeight="none",c.style.visibility="hidden",c.alt=Invodo.Pod.getTitle(ha.getPodId()),b.appendChild(c);var g=document.createElement("div");g.id=da,g.style.background="#FFFFFF",g.style.cursor="url("+d.cursor_hand_open.src+"), auto",ha.isZoomAvailable()&&(g.style.cursor="url("+d.cursor_zoom_in.src+"), auto"),g.style.filter="alpha(opacity=0)",g.style.height="100%",g.style.left="0px",g.style.opacity=0,g.style.position="absolute",g.style.top="0px",g.style.width="100%",a.appendChild(g);var h=document.getElementById(da);l("click",x,h),l("dblclick",y,h),window.attachEvent?window.attachEvent("onresize",f):window.addEventListener&&window.addEventListener("resize",f,!1),Z=document.getElementById(c.id);var i=o(e),j=i.style.height,k=j.substring(j.length-1,j.length);"%"===k?Ea=!0:(Z.parentElement.style.maxHeight=i.style.height,Z.parentElement.style.maxWidth=i.style.width,Z.parentElement.style.height=i.style.height,Z.parentElement.style.width=i.style.width),B("loading")},exit:function(){}},loading:{enter:function(){1===ha.getMatrixHeight()&&(Fa=!0);var a=document.createElement("div");a.id=ga,a.style.background="url("+d.wait.src+") center center no-repeat",a.style.cursor="wait",a.style.height=ha.getHeight()+"px",a.style.left="0px",a.style.position="absolute",a.style.top="0px",a.style.width=ha.getWidth()+"px";var b=n();b&&b.appendChild(a)},exit:function(){q(),document.getElementById(ea).style.visibility="visible"}},dataloaded:{enter:function(){var a=(document.getElementById(ea),ha.getParentHeight()),b=ha.getParentWidth(),c=ha.getHeight(),d=ha.getWidth();La=c,Ma=d,Na=Ma/La;var e=p(c,d,a,b),f=m(e.height,e.width,a,b),g=n();l("touchStart",function(a){k()},g),f.v||f.h&&(g.style.margin="auto",g.style.width=b+"px"),r()},exit:function(){}},goinghome:{enter:function(){z()},exit:function(){}},home:{enter:function(){k()},exit:function(){}},ready:{enter:function(){},exit:function(){}},zoomIn:{enter:function(){X()},exit:function(){}},zoomOut:{enter:function(){Y()},exit:function(){}}};pa.init=function(){B("starting")},pa.notify=function(a,b){G(a,b)},pa.registerListener=function(a,b){for(var c=0;c<fa.length;c++)if(b==fa[c])return;fa.push(b)},pa.registerTemplate=function(a){qa.push(a)},pa.callMouseDown=function(a){s(a)},pa.callMouseMove=function(a){u(a)},pa.callSetCursorIcon=function(a,b){W(a,b)},pa.callTouchMove=function(a){E(a)},pa.callTouchStart=function(a){D(a)}},Invodo.Src.Widget.InteractivePlayer.Photo3d.Control=function(a){function b(){i(!1),g()}function c(a){n.push(a)}function d(){n=[]}function e(){clearInterval(q)}function f(){if(0===n[n.length-1])return 0;for(var a=0,b=0;b<n.length-1;b++)a+=n[b];return a/n.length}function g(){var a=50;q=setInterval(function(){t===r&&u===s&&n.push(0),r=t,s=u},a)}function h(){if(o===!1)return 0;t=p.x2,u=p.y2;var a=o.x2-p.x2,b=o.y2-p.y2,c=Date.now()-o.t2,d=Math.sqrt(a*a+b*b)/c;return d}function i(a){o=a}function j(a){p=a}var k=null,l=0,m=0,n=[],o=!1,p=!1,q=0,r=0,s=0,t=0,u=0,v=!1,w=this;Date.now||(Date.now=function(){return(new Date).getTime()}),w.click=function(){},w.dbclick=function(){a.home()},w.e=function(){"UR"==a.getMatrixDirection()?a.e():a.w()},w.mouseDown=function(c,e){a.stop(),l=c,m=e,k=a.getCurrentView(),a.initializeXIndexHistory(),a.initializeYIndexHistory(),a.startSpinTimer(),b(),d(),v=!1},w.mouseDrag=function(b){Invodo.PublishSubscribe.publish("spinning",[]),a.grab(!0);var d=a.getMatrixWidth();if(k){if(k&&"LU"==a.getMatrixDirection()&&0!==k[0]&&!v){var e=k[0];e*=-1,e-=a.getMatrixWidth()-1,k[0]=e}v=!0;var f=k[0],g=Math.floor(d*b.x_percent)+f,l=-1*d;g==l&&(g=0),"LU"==a.getMatrixDirection()&&(g*=-1),0>g&&(g+=d),g>=d&&(g-=d-1);var m=a.getMatrixHeight(),n=k[1],o=0;1===n&&(o=.168),2===n&&(o=.5);var q=o+b.y_percent,r=-1*Math.round(m*q);"LU"==a.getMatrixDirection()&&(r*=-1),0>r&&(r=0),r>=m&&(r=m-1),1!==m&&(0===r&&(Invodo.PublishSubscribe.publish("cannotMoveMoreSouthOnMultiAxis",[]),Invodo.PublishSubscribe.publish("canMoveMoreNorthOnMultiAxis",[])),r===m-1&&(Invodo.PublishSubscribe.publish("cannotMoveMoreNorthOnMultiAxis",[]),Invodo.PublishSubscribe.publish("canMoveMoreSouthOnMultiAxis",[]))),j(b);var s=a.calculateSpinDirection(p);a.setSpinDirection(s);var t=h();i(b),c(t),a.addToYIndexHistory(r),a.addToXIndexHistory(g);var u=!1;a.setIndex(g,r,u)}},w.mouseUp=function(){a.stopSpinTimer(),a.grab(!1),k=null,a.initializeMomentum(),e();var b=f(),c=a.calculateMomentum(b);a.setMomentum(c),a.spinWithMomentum()},w.n=function(){"UR"==a.getMatrixDirection()?a.n():a.isForward()?a.s():a.n()},w.ne=function(){"UR"==a.getMatrixDirection()?a.ne():a.sw()},w.nw=function(){"UR"==a.getMatrixDirection()?a.nw():a.se()},w.s=function(){"UR"==a.getMatrixDirection()?a.s():a.isForward()?a.n():a.s()},w.se=function(){"UR"==a.getMatrixDirection()?a.se():a.nw()},w.spin=function(b){if("LU"==a.getMatrixDirection())switch(b){case"n":b="s";break;case"s":b="n";break;case"e":b="w";break;case"w":b="e";break;case"ne":b="sw";break;case"sw":b="ne";break;case"nw":b="se";break;case"se":b="nw"}a.spin(b)},w.sw=function(){"UR"==a.getMatrixDirection()?a.sw():a.ne()},w.touchEnd=function(){w.mouseUp()},w.touchMove=function(a){w.mouseDrag(a)},w.touch=function(b,c){a.touch()},w.w=function(){"UR"==a.getMatrixDirection()?a.w():a.e()}},Invodo.Src.Widget.Arcade=function(a,b,c,d,e){function f(a){q.sendArcadeKeyCode(parseInt(a))}function g(){q.keyboard.grab()}function h(a){i(a)}function i(a){if(!a)return void("console"in window&&"log"in window.console&&window.console.log("Pod passed to Arcade model.init is undefined"));if(!("config"in a))return void("console"in window&&"log"in window.console&&window.console.log("Pod passed to Arcade model.init does not contain a config object"));if("WebSocket"in window){Invodo.File.JS(Invodo.getPodDomain()+r,function(){k(a)})}else k(a)}function j(a,c){for(var d=0;d<o.length;d++)o[d].eventName===a&&!function(d){setTimeout(function(){o[d].callback({widgetId:b,eventName:a,data:c})},5)}(d)}function k(d){if(c=d.pod,m=new Invodo.Src.Widget.Arcade.Model(d,"noVNC_canvas",b,e),m.registerObserver(q),n=new Invodo.Src.Widget.Arcade.View(a,m),l=new Invodo.Src.Widget.Arcade.Control(m),"hotspots"in d.config.arcade)for(var h=d.config.arcade.hotspots,i=h.length,k=0;i>k;k++){var o=h[k],r=new Invodo.Src.Widget.InteractivePlayer.Hotspot;r.init(b,k,o,c,n.getDomId(),1),r.registerEventListener("click",f),r.onMouseOver(g),r.show(),p.push(r)}j("playerReady")}var l,m,n,o=[],p=[],q=this,r="/js/arcade_vnc.js",s="arcade";q.connect=function(a){m.connect(a)},q.data=function(){},q.disconnect=function(){m.disconnect()},q.getExpireTime=function(){return m.getExpireTime()},q.getMediaBase=function(){return m.getMediaBase()},q.getId=function(){return b},q.getCategories=function(){return m.getCategories()},q.getDemos=function(){return m.getDemos()},q.getRegistrationUrl=function(){return m.getRegistrationUrl()},q.getTimeRemaining=function(){return m.getTimeRemaining()},q.getType=function(){return s},q.hide=function(){n.hide()},q.hideHotspots=function(){var a=0;for(a=0;a<p.length;a++)p[a].hide()},q.keyboard={grab:function(){m.keyboard.grab()},release:function(){m.keyboard.release()}},q.listensTo=function(a){return b},q.mouse={grab:function(){m.mouse.grab()},release:function(){m.mouse.release()}},q.notify=function(a,b){switch(a){case"connecting":q.showHotspots()}j(a,b)},q.receiveUpdate=function(a){},q.reconnect=function(){m.reconnect()},q.registerEventListener=function(a,b){return o.push({eventName:a,callback:b}),q},q.registrationEnded=function(a){j("registrationEnded",a)},q.remove=function(){},q.requestMoreTime=function(){m.requestMoreTime()},q.sendArcadeEvent=function(a,b,c){"WebSocket"in window?(q.keyboard.grab(),q.mouse.grab(),n.sendArcadeEvent(a),q.keyboard.release(),q.mouse.release()):q.sendArcadeFlashMouseEvent(b,c)},q.sendArcadeFlashMouseEvent=function(a,b){n.sendArcadeFlashMouseEvent(a,b)},q.sendArcadeKeyCode=function(a,b){b=b?b:"keydown",q.keyboard.grab(),q.mouse.grab(),n.sendArcadeKeyCode(a,b),q.keyboard.release(),q.mouse.release()},q.sendUpdate=function(a){},q.setParent=function(a){n.setParent(a)},q.show=function(){n.show()},q.showHotspots=function(){var a=0;for(a=0;a<p.length;a++)p[a].show()},(c||d)&&Invodo.Pod.load({pod:c,mpd:d},function(a){h(a)})},Invodo.Src.Widget.Arcade.version="0.1.0",Invodo.Src.Widget.Arcade.Observable=function(a){var b=[];a.notifyObservers=function(a,c){for(var d=0;d<b.length;d++)b[d].notify(a,c)},a.registerObserver=function(a){b.push(a)}},Invodo.Src.Widget.Arcade.RemoteFrameBuffer=function(a,b){function c(){q.notifyListeners("ready")}function d(a){}function e(a,b,c,d){switch(b){case"disconnected":break;case"loaded":break;case"connect":break;case"ProtocolVersion":break;case"Security":break;case"Authentication":break;case"SecurityResult":break;case"ClientInitialisation":break;case"ServerInitialisation":break;case"normal":break;case"failed":}q.notifyListeners(b)}var f,g,h,i,j,k,l,m=100,n=a.rfb.connectTimeout,o=a.rfb.encrypt,p=a.rfb.localCursor,q=this,r=a.rfb.shared,s=a.rfb.trueColor;q.getConnectHtml=function(a,b){var c="",d="",e="";return"WebSocket"in window&&(c="<canvas id='noVNC_canvas'>",d="</canvas>"),e=c+"<object id='noVNC_canvas' width='"+b+"px' height='"+a+"px' type='application/x-shockwave-flash' data='"+swfPath+"'><param name='movie' value='"+swfPath+"'/><param name='allowScriptAccess' value='always'/><param name='allowFullscreen' value='true'/><param name='wmode' value='opaque'/><param name=FlashVars value='"+flashVars+"'/></object>"+d},q.connect=function(a,c,t,u,v,w){g=a,h=c,i=t,j=u,k=v,l=w,"WebSocket"in window?(f=new RFB({target:document.getElementById(b),encrypt:o,true_color:s,local_cursor:p,shared:r,onConnectTimeout:n,onUpdateState:e,onPasswordRequired:d}),setTimeout(function(){f&&f.connect(h,i,j,k)},m)):q.notifyListeners("connected"),q.notifyListeners("connecting")},q.keyboard={grab:function(){f&&f.get_keyboard().grab()},release:function(){f&&f.get_keyboard().ungrab()}},q.mouse={grab:function(){f&&f.get_mouse().grab()},release:function(){f&&f.get_mouse().ungrab()}},q.reconnect=function(){setTimeout(function(){f&&f.connect(h,i,j,k)},m),q.notifyListeners("connecting")},Invodo.Src.Widget.Arcade.Listenable.call(q,q),c()},Invodo.Src.Widget.Arcade.Listenable=function(a){var b=[];a.notifyListeners=function(a){for(var c=0;c<b.length;c++)b[c](a)},a.addListener=function(a){b.push(a)}};var InvodoFlashlightVncStatusCallback;Invodo.Src.Widget.Arcade.Model=function(a,b,c,d){function e(a){o&&o.exit(),a.enter()}function f(){e(I.registering)}function g(){return s+"&host="+F.getApiHost()+"&port="+F.getPort()+"&"+w}function h(){Invodo.Src.Widget.Arcade.Observable.call(F,F),e(I.starting)}function i(a){var b=this;switch(b.registrationId="",b.status=a.status,b.valid=!1,b.SUCCESS="SUCCESS",b.PENDING="PENDING",b.FAILURE="FAILURE",b.ERROR="ERROR",b.NULL="NULL",b.status){case b.SUCCESS:case b.PENDING:"registration"in a&&(m=a.registration,"flashParams"in m==!1&&(m.flashParams=g()),"registrationId"in m&&"expireTime"in m?(b.expireTime=parseInt(m.expireTime),b.flashVars=m.flashParams,b.registrationId=m.registrationId,b.checkInterval=parseInt(m.checkInterval),b.valid=!0):"console"in window&&("log"in window.console&&window.console.log("Invalid registration object"),"dir"in window.console&&window.console.dir(a)));break;case b.FAILURE:case b.ERROR:}}function j(){setTimeout(function(){new Invodo.File.JS(F.getRegistrationUrl())},20)}function k(){setTimeout(function(){new Invodo.File.JS(F.getEndRegistrationUrl())},20)}function l(a){o.rfbUpdate(a)}var m,n,o,p=a,q=0,r=p.config.arcade,s="viewOnly=false&hideControls=true&hideSettings=true&scale=false&autoConnect=true",t="//e.invodo.com/",u="media/",v="4.0/fl/Flashlight.swf",w="statusCallback=InvodoFlashlightVncStatusCallback&mouseCallback=InvodoFlashlightVncMouseCallback",x=0,y=d?d+u:Invodo.getAffiliateConfig().imageBase,z=d?d:t,A=d?d:t,B=0,C=3,D="registrationEnded",E="connect",F=this,G="Not connected",H="Connected",I={starting:{connect:function(){},disconnect:function(){},enter:function(){o=I.starting,F.notifyObservers("starting"),n=new Invodo.Src.Widget.Arcade.RemoteFrameBuffer(r,b),n.addListener(l),e(I.registering)},exit:function(){},rfbUpdate:function(a){},requestMoreTime:function(){}},registering:{connect:function(a){if(m=new i(a),m.valid)switch(m.status){case m.SUCCESS:e(I.connecting);break;case m.PENDING:setTimeout(f,F.getCheckIntervalInMilliseconds());break;case m.FAILURE:e(I.failed);break;case m.ERROR:e(I.failed)}else e(I.failed)},disconnect:function(){},enter:function(){o=I.registering,F.notifyObservers("registering"),j()},exit:function(){},flashUpdate:function(a){},rfbUpdate:function(a){},requestMoreTime:function(){j()}},connecting:{connect:function(){},disconnect:function(){},enter:function(){B++,o=I.connecting,flashVars=m.flashVars;var a=parseInt(m.expireTime);x!=a&&(x=a,F.notifyObservers("expireTimeChange",{expireTime:x})),F.notifyObservers("connecting"),1==B?n.connect(F,F.getApiHost(),F.getPort(),F.getPassword(),F.getPath()+"/"+m.registrationId):C>B?n.reconnect():e(I.failed)},exit:function(){},flashUpdate:function(a){switch(a){case H:e(I.connected);break;case G:e(I.failed)}},rfbUpdate:function(a){switch(a){case"ready":break;case"normal":e(I.connected);break;case"failed":e(I.connecting)}},requestMoreTime:function(){j()}},connected:{connect:function(a){if(m=new i(a),m.valid)switch(m.status){case m.SUCCESS:0!=x&&m.expireTime!=x&&F.notifyObservers("expireTimeChange",{expireTime:m.expireTime}),x=m.expireTime;break;case m.PENDING:setTimeout(f,F.getCheckIntervalInMilliseconds());break;case m.FAILURE:e(I.failed);break;case m.ERROR:e(I.failed)}else e(I.failed)},disconnect:function(){k(),e(I.disconnected)},enter:function(){o=I.connected,B=0,F.mouse.release(),F.keyboard.release(),F.notifyObservers("connected")},exit:function(){},flashUpdate:function(a){switch(a){case G:e(I.failed)}},rfbUpdate:function(a){switch(a){case"ready":case"normal":break;case"failed":e(I.failed)}},requestMoreTime:function(){j()}},disconnected:{connect:function(){},disconnect:function(){},enter:function(){o=I.disconnected,F.notifyObservers("disconnected")},exit:function(){},flashUpdate:function(a){},rfbUpdate:function(a){},requestMoreTime:function(){}},failed:{connect:function(){},disconnect:function(){},enter:function(){o=I.failed,F.notifyObservers("failed")},exit:function(){},flashUpdate:function(a){switch(a){case H:e(I.connected);break;case G:e(I.failed)}},rfbUpdate:function(a){switch(a){case"ready":break;case"normal":e(I.connected);break;case"failed":e(I.connecting)}},requestMoreTime:function(){j()}}};F.connect=function(a){o.connect(a)},F.disconnect=function(){o.disconnect()},F.getApiHost=function(){return r.rfb.host},F.getCategories=function(){return r.categories},F.getCheckIntervalInMilliseconds=function(){if("checkInterval"in m){var a=parseInt(m.checkInterval);Invodo.Math.isNumber(a)&&(q=Invodo.Math.convertSecondsToMilliseconds(a))}return q},F.getConnectHtml=function(a,b){return n.getConnectHtml(a,b)},F.getDemos=function(){return r.demos},F.getDeviceImageHeight=function(){return parseInt(r.device.image.height)},F.getDeviceImageSrc=function(){return y+r.device.image.src},F.getDeviceImageWidth=function(){return parseInt(r.device.image.width)},F.getDeviceScreenHeight=function(){return parseInt(r.device.screen.height)},F.getDeviceScreenWidth=function(){return parseInt(r.device.screen.width)},F.getDeviceScreenX=function(){return parseInt(r.device.screen.x)},F.getDeviceScreenY=function(){return parseInt(r.device.screen.y)},F.getExpireTime=function(){return x},F.getFlashVars=function(){return w+"&"+flashVars},F.getImageUUID=function(){return r.registration.imageUUID},F.getMediaBase=function(){return y},F.getPassword=function(){return r.rfb.password},F.getPath=function(){return r.rfb.path},F.getPodId=function(){return p.pod},F.getPort=function(){return parseInt(r.rfb.port)},F.getEndRegistrationUrl=function(){return"//"+F.getApiHost()+"/registration/end/"+m.registrationId+"/?widgetId="+F.getWidgetId()+"&callback="+D},F.getRegistrationUrl=function(){return"//"+F.getApiHost()+"/registration/"+Invodo.Visitor.getVisitorId()+"/"+F.getImageUUID()+"/?widgetId="+F.getWidgetId()+"&callback="+E},F.getSkinBase=function(){return z},F.getSwfPath=function(){return A+v},F.getTimeRemaining=function(){return x-(new Date).getTime()},F.getWidgetId=function(){return c},F.keyboard={grab:function(){n.keyboard.grab()},release:function(){n.keyboard.release()}},F.mouse={grab:function(){n.mouse.grab()},release:function(){n.mouse.release()}},F.reconnect=function(){n.reconnect()},F.requestMoreTime=function(){o.requestMoreTime()},InvodoFlashlightVncStatusCallback=function(a){o.flashUpdate(a)},h()};var InvodoFlashlightVncMouseCallback=function(a){var b="click",c="arcadeClick",d="Arcade";switch(a){case b:Invodo.Module.get("logger").log(d,c,Invodo.Pod.getAll()[0].pod)}};Invodo.Src.Widget.Arcade.MouseEventFactory=function(){this.createEvent=function(a){var b=null;if("createEvent"in document)b=document.createEvent("MouseEvents"),b.initMouseEvent(a.type,a.canBubble,a.cancelable,a.view,a.detail,a.screenX,a.screenY,a.clientX,a.clientY,a.ctrlKey,a.altKey,a.shiftKey,a.metaKey,a.button,a.relatedTarget);else{b=document.createEventObject("MouseEvent");for(p in a)b[p]=a[p]}return b},this.fire=function(a,b,c){var d=this.createEvent(c);"dispatchEvent"in a?a.dispatchEvent(d):"fireEvent"in a&&a.fireEvent("on"+b,d)}},Invodo.Src.Widget.Arcade.View=function(a,b){function c(a){g&&g.exit(),a.enter()}function d(a,b){var c=null,d=!0,e=!1,f=null,g=!1,h=!1,i=!1,j=!1,k=a,l=0;if(navigator.userAgent.toLowerCase().indexOf("safari")>-1)c=document.createEvent("Event");else if("createEvent"in document)c=document.createEvent("KeyboardEvent");else{if(!("createEventObject"in document))return null;c=document.createEventObject("KeyboardEvent"),c.keyCode=a}if(!("initKeyEvent"in c)&&"defineProperty"in Object&&(c.keyCodeVal=a,Object.defineProperty(c,"keyCode",{get:function(){return this.keyCodeVal}}),Object.defineProperty(c,"which",{get:function(){return this.keyCodeVal}})),"initKeyEvent"in c)c.initKeyEvent(b,d,e,f,g,h,i,j,k,l);else if("initEvent"in c)c.initEvent(b,d,e,f,g,h,i,j,k,l);else{var m=0,n="",o=!1,p="en";c.initKeyboardEvent(b,d,e,f,k,m,n,o,p)}return c}function e(a,b){try{if(a&&b){var c=document.getElementById(a);c&&("fireEvent"in c?c.fireEvent("on"+b.type,b):"dispatchEvent"in c&&c.dispatchEvent(b))}}catch(d){Invodo.Console.dir(d),Invodo.Console.log((new Error).stack)}}function f(){h=new Invodo.Src.Widget.Arcade.View.Connected(g),stateConnecting=new Invodo.Src.Widget.Arcade.View.Connecting(g,b,m),i=new Invodo.Src.Widget.Arcade.View.Registering(g,b,n,l,m,o),c(i);try{var a={pod:b.getPodId(),pn:Invodo.getPageName()};Invodo.Module.get("logger").log("Arcade","playerView",a)}catch(d){}b.registerObserver(n)}var g,h,i,j="noVNC_canvas",k=(new Date).getTime(),l="InvodoArcadeDeviceView_"+k,m="InvodoArcadeScreenView_"+k,n=(Invodo.Module.get("logger"),this),o="InvodoArcadeWidgetView_"+b.getWidgetId();n.getParent=function(){return document.getElementById(a)},n.getDomId=function(){return o},n.hide=function(){n.setStyle("display","none")},n.notify=function(a){switch(a){case"registering":c(i);break;case"connecting":c(stateConnecting);case"connected":c(h)}},n.sendArcadeEvent=function(a){var b=document.getElementById(j);b&&e(j,a)},n.sendArcadeFlashMouseEvent=function(a,b){var c=document.getElementById(j);try{c.sendMouse(a,b)}catch(d){Invodo.Console.dir(d),Invodo.Console.log((new Error).stack)}},n.sendArcadeKeyCode=function(a,b){var c=document.getElementById(j);if(c)if("WebSocket"in window)e(j,d(a,b));else try{var f=document.getElementById(j);f.sendKey(a)}catch(g){Invodo.Console.dir(g),Invodo.Console.log((new Error).stack)}},n.setParent=function(a){parentNode=a},n.setStyle=function(a,b){domNode.style[a]=b},n.show=function(){n.setStyle("display","block")},f()},Invodo.Src.Widget.Arcade.View.Connected=function(a){var b=this;b.enter=function(){a=this},b.exit=function(){}},Invodo.Src.Widget.Arcade.View.Connecting=function(a,b,c){function d(){var a=f();a.innerHTML="";var c="",d="";"WebSocket"in window&&(c="<canvas id='noVNC_canvas'>",d="</canvas>");var g="ieCacheBreaker="+(new Date).getTime(),h=c+"<object name='noVNC_canvas' id='noVNC_canvas' width='"+b.getDeviceScreenWidth()+"px' height='"+b.getDeviceScreenHeight()+"px' classid='clsid:d27cdb6e-ae6d-11cf-96b8-444553540000'><param name='movie' value='"+b.getSwfPath()+"?"+g+"'/><param name='allowScriptAccess' value='always'/><param name='allowFullscreen' value='true'/><param name='wmode' value='opaque'/><param name='flashvars' value='"+b.getFlashVars()+"'/></object>"+d;a.innerHTML=h,"addEventListener"in a?a.addEventListener("mousedown",function(a){i=!0},!0):"attachEvent"in a&&a.attachEvent("onmousedown",function(){i=!0}),a.onmouseup=function(){i=!1},a.onmouseover=function(){b.mouse.grab(),b.keyboard.grab()},a.onmouseout=function(){i&&(e(),i=!1),b.keyboard.release(),b.mouse.release()},a.onmousemove=function(){b.mouse.grab(),b.keyboard.grab()}}function e(){var a="mouseup",b="mouseUp",c={};c.canBubble=!0,c.cancelable=!1,c.view=!0,c.detail="Arcade Widget mouseup event",c.screenX=0,c.screenY=0,c.clientX=0,c.clientY=0,c.ctrlKey=!1,c.altKey=!1,c.shiftKey=!1,c.metaKey=!1,c.button=0,c.relatedTarget=null,"WebSocket"in window?(c.type=a,h.fire(document,"mouseup",c)):j.sendArcadeFlashMouseEvent(b,{x:0,y:0})}function f(){return document.getElementById(c)}var g="noVNC_canvas",h=new Invodo.Src.Widget.Arcade.MouseEventFactory,i=!1,j=this;j.enter=function(){d(),a=this},j.exit=function(){},j.sendArcadeFlashMouseEvent=function(a,b){var c=document.getElementById(g);try{c.sendMouse(a,b)}catch(d){Invodo.Console.dir(d),Invodo.Console.log((new Error).stack)}}},Invodo.Src.Widget.Arcade.View.Registering=function(a,b,c,d,e,f){function g(){var a="",g="";"WebSocket"in window&&(a="<canvas id='noVNC_canvas'>",g="</canvas>");var h=c.getParent(),i="<div id='"+f+"' style='position:relative;height:"+b.getDeviceImageHeight()+"px;width:"+b.getDeviceImageWidth()+"px'><div id='"+d+"' style='position:relative'><div style='position:absolute;background-image:url(\""+b.getDeviceImageSrc()+'");height:'+b.getDeviceImageHeight()+"px;width:"+b.getDeviceImageWidth()+"px;' id='"+d+"'></div><div id='"+e+"' style='background-color:#000;height:"+b.getDeviceScreenHeight()+"px;width:"+b.getDeviceScreenWidth()+"px;left:"+b.getDeviceScreenX()+"px;position:absolute;top:"+b.getDeviceScreenY()+"px;'></div></div></div>";h.innerHTML=i,"WebSocket"in window&&(document.getElementById(e).onclick=function(){Invodo.Module.get("logger").log(b.getWidgetId(),"arcadeClick",{pod:b.getPodId()})})}var h=this;h.enter=function(){g(),a=this},h.exit=function(){}},Invodo.Src.Widget.Arcade.Control=function(){},window.Invodo=window.Invodo||{},Invodo.Hi5={},Invodo.Hi5.version="0.20.4",Invodo.Hi5.cdn="d2xza854ebzm5d.cloudfront.net/assets/hi5",function(a){var b=function(a){var b={},c=function(a){var b=!1;return"[object Array]"===Object.prototype.toString.call(a)&&(b=!0),b},d=function(a,b){var d,e,f,g=0;if(c(a))for(f=a.length;f>g&&(e=a[g],b.call(e,g,e)!==!1);g++);else for(d in a)if(e=a[d],b.call(e,d,e)===!1)break;return a};a.on=function(c,d){return b[c]||(b[c]=[]),b[c].push(d),a},a.addEventListener=a.on,a.off=function(c,d){var e,f=b[c];if(f&&f.length)return void 0===d?b[c]=[]:(e=f.indexOf(d),e>-1&&f.splice(e,1)),a},a.removeEventListener=a.off,a.once=function(b,c){var d=function(){return this.off(b,d),c.apply(this,arguments)};return a.on(b,d)},a.fire=function(b){var c=Array.prototype.slice.call(arguments,1);return d(a.listeners(b),function(b,d){return d.apply(a,c)}),a},a.listeners=function(a){return(b[a]||[]).slice()}};a.EventDispatcher=b}(Invodo.Hi5||window),function(a){var b=function(){var b={type:"component",extend:function(a,b,c){for(var d in b){if(c&&d in a)break;a[d]=b[d]}return a}};return a.EventDispatcher(b),b};a.Component=b}(Invodo.Hi5||window),function(a){var b=function(b){function c(a,b){var c,d=250,e=0,f=0,g=!1,h=function(){f=a.currentTime;var c=1/d;!g&&e+c>f&&!a.paused&&(b(!0),g=!0),g&&f>e+c&&!a.paused&&(b(!1),g=!1),e=f};return{start:function(){c=window.setInterval(h,d)},stop:function(){window.clearInterval(c)},reset:function(){window.clearInterval(c),g=!1}}}function d(a){function b(){var b=0;if(a.buffered.length>0){var c=a.buffered.end(0);b=parseInt(c/a.duration*100,10)}return b}var d=c(a,function(b){var c=b?"loadingstart":"loadingstop";e.fire(c,{type:c,video:a})});a.addEventListener("play",d.start,!1),a.addEventListener("pause",d.reset,!1),a.addEventListener("durationchange",d.reset,!1),a.addEventListener("ended",d.stop,!1),a.addEventListener("error",function(a){e.fire("video_error",a)}),a.addEventListener("durationchange",function(){e.fire("video_durationchange",{duration:a.duration})},!1),a.addEventListener("volumechange",function(){e.fire("video_volumechange",{volume:a.volume,muted:a.muted})},!1),a.addEventListener("seeked",function(){e.fire("video_seeked",{type:"video_seeked",currentTime:a.currentTime})},!1);var f=["loadeddata","canplay","canplaythrough","ended","waiting","playing","seeking","loadstart","pause","seeked","play","stalled"];f.forEach(function(b){a.addEventListener(b,function(){e.fire("video_"+b)})}),a.addEventListener("progress",function(){a.duration&&e.fire("video_buffered",{type:"video_buffered",buffer:b()})},!1),a.addEventListener("timeupdate",function(a){e.fire("video_timeupdate",{type:"video_timeupdate",time:a.timeStamp})},!1),a.addEventListener("loadeddata",function(){e.autoplay&&e.fire("video_start",e.config[e.index])},!1)}var e={type:"videomedia",config:b.config,index:0,autoplay:b.autoplay,id:b.id,init:function(){this.videoElement=document.getElementById(b.videodisplayId)||b.element,d(this.videoElement);for(var a=0;a<this.config.length;a++)this.config[a].encodings.sort(function(a,b){return a.height<b.height?-1:a.height>b.height?1:0});return this.fire("new_video",this.config[this.index]),this},getCurrent:function(){return this.config[this.index]},getPlayList:function(){return this.config.slice()},next:function(){return this.index+1===this.config.length?this.config[this.index]:(++this.index,this.fire("new_video",this.config[this.index]),this.config[this.index])},previous:function(){return 0===this.index&&this.config.length>1?this.config.length-1:this.index<=0?this.index:(--this.index,this.fire("new_video",this.config[this.index]),this.config[this.index])},play:function(){this.videoElement.paused&&this.videoElement.play()},pause:function(){this.videoElement.paused||this.videoElement.pause()},seek:function(a){this.videoElement.seekable&&(this.videoElement.currentTime=a)},time:function(){return this.videoElement.currentTime},duration:function(){return this.videoElement.duration},set:function(a){return this.index=a<=this.config.length&&a>=0?a:this.index,this.fire("new_video",this.config[this.index]),this.config[this.index]},paused:function(){return this.videoElement.paused},playing:function(){return!this.videoElement.paused},readyState:function(){return this.videoElement.readyState},muted:function(){return this.videoElement.muted},mute:function(){this.videoElement.muted=!0},unmute:function(){this.videoElement.muted=!1;
},volume:function(){return this.videoElement.volume},setVolume:function(a){this.videoElement.volume=a},setByDimensions:function(a,b){console.log("setByDimensions",a,b)}};return a.EventDispatcher(e),e};a.VideoMedia=b}(Invodo.Hi5||window),function(a){var b=function(b,c){var d={type:"assets",server:b.server||Invodo.Hi5.cdn||void 0,version:b.version||Invodo.Hi5.version||void 0,init:function(){this.preload()},preload:function(){for(var a=b.preload||[],c=0;c<a.length;c++)"css"===a[c].type&&this.loadCSS(a[c].path),"js"===a[c].type&&this.loadJS(a[c].path)},loadJS:function(a){var b="";if(this.server&&("//"!==this.server.slice(0,2)&&(b="//"),b=b+this.server+"/"),this.version&&(b=b+this.version+"/"),b+=a,0===document.querySelectorAll('head script[src="'+b+'"]').length){var d=c.dom.createElement("script");return d.setAttribute("type","text/javascript"),d.setAttribute("src",b),c.dom.getElementsByTagName("head")[0].appendChild(d),d}},loadCSS:function(a){var b="";if(this.server&&("//"!==this.server.slice(0,2)&&(b="//"),b=b+this.server+"/"),this.version&&(b=b+this.version+"/"),b+=a,0===document.querySelectorAll('head link[href="'+b+'"]').length){var d=document.createElement("link");return d.setAttribute("rel","stylesheet"),d.setAttribute("type","text/css"),d.setAttribute("href",b),c.dom.getElementsByTagName("head")[0].appendChild(d),d}}};return a.EventDispatcher(d),d};a.Assets=b}(Invodo.Hi5||window),function(a){var b=function(a){var b=a;return b.seo&&b.ui.addDialog(b.seo,"seo_layer"),b.cta&&b.ui.addDialog(b.cta,"cta_layer"),b.controlbar&&b.ui.addDialog(b.controlbar,"control_layer"),b.titlebar&&b.ui.addDialog(b.titlebar,"control_layer"),b.endstate&&b.ui.addDialog(b.endstate,"end_layer"),b.sharing&&b.ui.addDialog(b.sharing,"sharing_layer"),b.ratingscomments&&b.ui.addDialog(b.ratingscomments,"ratingscomments_layer"),b.playbutton&&b.ui.addDialog(b.playbutton,"playpause_layer"),b.replaybutton&&b.ui.addDialog(b.replaybutton,"replay_layer"),b.playlist&&(b.ui.addDialog(b.titlebar,"replay_layer"),b.ui.addDialog(b.playlist,"control_layer"),b.ui.addDialog(b.playlist,"replay_layer"),b.playlist.on("playlist_item_clicked",function(){b.ui.hideLayer("replay_layer")}),b.controlbar.on("controlbar_playlist_icon_clicked",function(){b.playlist.fire("playlist_icon_clicked")})),b.media.on("video_ended",function(){function a(){b.replaybutton&&(b.ui.showLayer("replay_layer",!0),b.mouse.addEventListener(b.replaybutton.element,"click",function(){b.ui.hideLayer("replay_layer")}))}b.media.ended=!0,b.endstate?(b.ui.hideLayer("cta_layer"),b.ui.hideLayer("control_layer"),b.ui.showLayer("end_layer")):b.playlist?(b.playlist.willAutoPlayMultipleClips()?b.ui.on("playlist_ended",function(){a()}):a(),b.ui.fire("playlist_next_item")):(b.media.autoplay=!1,a()),b.display.element.load()}),b.media.on("video_playing",function(){b.media.ended=!1,b.ui.hideLayer("playpause_layer"),b.ui.hideLayer("end_layer"),b.ui.hideLayer("replay_layer"),b.playbutton&&(b.ui.showLayer("control_layer"),b.ui.showLayer("cta_layer"))}),b.media.on("video_pause",function(){b.controlbar||b.ui.showLayer("playpause_layer")}),b.media.once("video_loadeddata",function(){b.media.ended=!1,b.seo&&b.ui.showLayer("seo_layer"),!b.media.autoplay&&b.playbutton&&b.ui.showLayer("playpause_layer"),b.ui.showLayer("cta_layer"),b.playbutton||b.ui.showLayer("control_layer"),b.media.autoplay&&b.media.play()}),b.ui.on("titlebar_sharing_click",function(){b.media.ended&&b.playlist&&(b.ui.hideLayer("replay_layer"),b.ui.hideLayer("sharing_layer")),b.ui.showLayer("sharing_layer",!0)}),b.ui.on("titlebar_ratingscomments_click",function(){b.media.ended&&b.playlist&&(b.ui.hideLayer("replay_layer"),b.ui.hideLayer("ratingscomments_layer")),b.ui.showLayer("ratingscomments_layer",!0)}),b.ui.on("overlay_dialog_close",function(){b.ui.hideLayer("ratingscomments_layer"),b.ui.hideLayer("sharing_layer"),b.media.ended?b.playlist?b.ui.showLayer("replay_layer",!0):b.ui.showLayer("end_layer",!0):(b.ui.showLayer("cta_layer",!0),b.ui.showLayer("control_layer"))}),b};a.VideoPlayerDecorator=b}(Invodo.Hi5||window),function(a){var b=function(){var b={type:"configuration",init:function(){}};return b.set=function(a){this.config=a;try{for(var b in this.config)this.config.hasOwnProperty(b)&&this.fire(b,this.config[b])}catch(c){console.log("Error in configuration",c)}this.fire("complete")},b.update=function(a,b){for(var c in a){if(b&&c in this.config)break;this.config[c]=a[c],this.fire(c,a[c])}return this.config},b.getValue=function(a,b){var c;return this.config[a]&&(c=this.config[a]),c||b},a.EventDispatcher(b),b};a.Configuration=b}(Invodo.Hi5||window),function(a){var b=[],c=function(a){return b[a]=++b[a]||0,a+b[a]},d=function(){return{create:function(b){var d=!1,e=[],f={type:b.type,parentId:b.parentId,Media:[{type:"videomedia",autoplay:b.autoplay,config:b.playlist}],MediaDisplay:[{type:"videodisplay",controls:!1,skin:"default.videodisplay",mode:"embedded"}]},g={type:f.type,id:c("invodo-player--"+f.type+"-"),container:c("invodo-player--container-"),go:function(){d||this.init()}};a.EventDispatcher(g);for(var h in f)if("object"==typeof f[h])for(var i=0;i<f[h].length;i++)f[h][i].id=c("invodo-player--"+f[h][i].type+"-"),f[h][i].parentId=g.id,f[h][i].containerId=g.container;return f.Media[0].videodisplayId=f.MediaDisplay[0].id,g.mouse=a.Mouse,g.keyboard=a.Keyboard,g.configuration=a.Configuration(f),g.ui=a.UI(g.configuration,a.Template(),document,g.id),g.style=a.Style(b.Style[0],g.ui,g.media,g.mouse),g.ui.add(g.ui.template.render("default.playercontainer",{wrapperId:g.container,containerId:g.id,data:f.Media[0].config[0]}),"#"+f.parentId,g.id),g.media=a.VideoMedia(f.Media[0]),g.display=a.Display(f.MediaDisplay[0],g.ui,g.style,g.media,g.mouse),e.push(g.ui,g.style,g.display,g.media),g.configuration.on("complete",function(){g.fire("configuration_complete")}),g.init=function(){e.map(function(a){a.init()}),d=!0},g.configuration.set(f),g}}},e=function(){return{create:function(b){var d=!1,e=[],f={type:b.type,id:c("invodo-player--"+b.type+"-"),container:c("invodo-player--container-"),go:function(){d||this.init()}};a.EventDispatcher(f);for(var g in b)if("object"==typeof b[g])for(var h=0;h<b[g].length;h++)b[g][h].id=c("invodo-player--"+b[g][h].type+"-"),b[g][h].parentId=f.id,b[g][h].containerId=f.container;b.Media[0].videodisplayId=b.MediaDisplay[0].id;var i="#"+b.parentId,j=c("invodo-player--overlay-");if(f.mouse=a.Mouse,f.keyboard=a.Keyboard,f.configuration=a.Configuration(b),f.ui=a.UI(f.configuration,a.Template(),document,f.id),f.style=a.Style(b.Style[0],f.ui),"overlay"===b.MediaDisplay[0].mode&&(i=".js-invodo-mask",f.ui.add(f.ui.template.render("default.overlay",{id:j}),"body",f.id)),f.ui.add(f.ui.template.render("default.playercontainer",{wrapperId:f.container,containerId:f.id,data:b.Media[0].config[0]}),i,f.id),b.parentId){var k=document.getElementById("overlay"===b.MediaDisplay[0].mode?j:b.parentId);f.ui.observeMutation(k)}var l=a.Slider(f.ui),m=a.Slider(f.ui,a.ToolTip());if(f.assets=a.Assets(b.Assets[0],f.ui),f.media=a.VideoMedia(b.Media[0]),f.display=a.Display(b.MediaDisplay[0],f.ui,f.style,f.media,f.mouse),b.VideoControlbar&&b.VideoControlbar[0]&&(f.controlbar=a.VideoControlbar(b.VideoControlbar[0],f.ui,f.mouse,f.media,l,m),f.controlbar.on("videocontrolbar_fullscreen",function(){f.ui.fullscreen(f.id)}),e.push(f.controlbar)),b.Titlebar&&b.Titlebar[0]&&(f.titlebar=a.VideoTitlebar(b.Titlebar[0],f.ui,f.mouse,f.media),e.push(f.titlebar)),e.push(f.assets,f.ui,f.style,f.display),b.SEO&&b.SEO.length>0&&(f.seo=a.SEO(b.SEO[0],f.ui,f.media),e.push(f.seo)),b.RatingsComments&&b.RatingsComments.length>0&&(f.ratingscomments=a.RatingsComments(b.RatingsComments[0],f.ui,f.media,f.mouse,f.keyboard),e.push(f.ratingscomments)),b.Sharing&&b.Sharing.length>0&&(f.sharing=a.Sharing(b.Sharing[0],f.ui,f.media,f.mouse),e.push(f.sharing)),b.EndState&&b.EndState.length>0){var n=function(a){return"object"==typeof f[a]&&f[a].type&&f[f[a].type]?f[f[a].type]:void 0};b.EndState[0].dialogs=[],b.EndState[0].dialogNames.map(function(a){var c=n(a.toLowerCase());c&&b.EndState[0].dialogs.unshift(c)}),b.EndState[0].dialogs.length>0&&(f.endstate=a.EndState(b.EndState[0],f.ui,f.media,f.mouse),e.push(f.endstate))}return b.CTA&&b.CTA.length>0&&(f.cta=a.CTA(b.CTA[0],f.ui,f.media,f.mouse),e.push(f.cta)),b.PlayButton&&b.PlayButton.length>0&&(f.playbutton=a.PlayButton(b.PlayButton[0],f.ui,f.media,f.mouse),e.push(f.playbutton)),b.ReplayButton&&b.ReplayButton.length>0&&(f.replaybutton=a.ReplayButton(b.ReplayButton[0],f.ui,f.media,f.mouse),e.push(f.replaybutton)),b.Playlist&&b.Playlist.length>0&&(f.playlist=a.Playlist(b.Playlist[0],f.ui,f.media,f.mouse),e.push(f.playlist)),f.configuration.on("complete",function(){f.fire("configuration_complete")}),e.push(f.media),f.init=function(){e.map(function(a){a.init()}),d=!0},f.configuration.set(b),f}}},f=function(a){var b={};return"videoplayer"===a.type&&(b=(new e).create(a),Invodo.Hi5.VideoPlayerDecorator(b)),"simplevideo"===a.type&&(b=(new d).create(a)),b};a.VideoPlayerFactory=f}(Invodo.Hi5||window),function(a){var b={type:"keyboardcontroller",eventQueue:[],init:function(){},addEventListener:function(a,b,c){a.addEventListener(b,c),this.eventQueue.push({emitter:a,event:b,handler:c})},removeEventListener:function(a,b,c){a.removeEventListener(b,c);for(var d=0,e=this.eventQueue.length;e>d;d++)a===this.eventQueue[d].emitter&&this.eventQueue[d].keys===b&&this.eventQueue[d].callback===c&&this.eventQueue.unshift(this.eventQueue[d])}},c=a.Keyboard=b;return c}(Invodo.Hi5||window),function(a){var b={type:"mousecontroller",eventQueue:[],init:function(){},addEventListener:function(a,b,c){var d=function(a){c(a,this)};a.addEventListener(b,d),this.eventQueue.push({emitter:a,event:b,eventListener:d,callback:c})},removeEventListener:function(a,b,c){this.eventQueue=this.eventQueue.filter(function(d){return a===d.emitter&&d.event===b&&d.callback===c?(a.removeEventListener(d.event,d.eventListener),!1):!0})}},c=a.Mouse=b;return c}(Invodo.Hi5||window),function(a){var b=function(b,c){function d(){g={scrub:getComputedStyle(f.scrub),range:getComputedStyle(f.range),amount:getComputedStyle(f.amount)},e=f.range&&f.range.ownerDocument}var e,f={type:"slidercontroller",eventQueue:[],active:!1,scrub:{},range:{},amount:{},current:{x:null,y:null},last:{x:null,y:null},horizontal:{init:function(a,b){d(),i.init(a),"function"==typeof b&&b()},update:function(a,b){i.update(a),"function"==typeof b&&b(f.current.x)},get:function(){return d(),i.get()},set:function(a,b){d(),i.set(a),"function"==typeof b&&b(a)},toolTip:c},vertical:{init:function(a,b){d(),j.init(a),"function"==typeof b&&b()},update:function(a,b){j.update(a),"function"==typeof b&&b(f.current.y)},get:function(){return d(),j.get()},set:function(a,b){d(),j.set(a),"function"==typeof b&&b(a)}}},g={},h=b.getOffset,i={init:function(a){f.origin=h(f.range,e,e.documentElement).left,f.last.x=h(f.range,e,e.documentElement).left===h(f.scrub,e,e.documentElement).left?f.origin:a.pageX,g.scrub.offsetX=parseInt(g.scrub.width,10)/2,g.range.offsetX=h(f.range,e,e.documentElement).left},update:function(a){var b=parseInt(g.range.width,10)-(parseInt(g.range.width,10)+g.range.offsetX-a.pageX);a.pageX<g.range.offsetX?b=0:a.pageX>parseInt(parseInt(g.range.width,10)+g.range.offsetX,10)&&(b=parseInt(g.range.width,10)),f.last.x=a.pageX,f.current.x=b},get:function(){return parseInt(g.amount.width,10)/parseInt(g.range.width,10)},set:function(a){0>=a?f.amount.style.width=0:a>=1?f.amount.style.width=parseInt(g.range.width,10)+"px":f.amount.style.width=parseInt(g.range.width,10)*a+"px"}},j={init:function(a){f.origin=h(f.range,e,e.documentElement).top,f.last.y=h(f.range,e,e.documentElement).top===h(f.range,e,e.documentElement).top?f.origin:a.pageY,g.scrub.offsetY=parseInt(g.scrub.height,10)/2,g.range.offsetY=h(f.range,e,e.documentElement).top},update:function(a){var b=parseInt(g.range.height,10)+g.range.offsetY-a.pageY;f.scrub.style.top="0",a.pageY<g.range.offsetY?b=parseInt(g.range.height,10):a.pageY>parseInt(parseInt(g.range.height,10)+g.range.offsetY-parseInt(g.scrub.height,10),10)&&(b=0,f.scrub.style.top="-"+parseInt(g.scrub.height,10)+"px"),f.last.y=a.pageY,f.current.y=b},get:function(){return parseInt(g.amount.height,10)/parseInt(g.range.height,10)},set:function(a){0>=a?(f.amount.style.height=0,f.scrub.style.top="-"+parseInt(g.scrub.height,10)+"px"):a>=1?(f.amount.style.height=parseInt(g.range.height,10)+"px",f.scrub.style.top="0px"):f.amount.style.height=parseInt(g.range.height,10)*a+"px"}};return a.EventDispatcher(f),f};a.Slider=b}(Invodo.Hi5||window),function(a){var b=function(a,b,c,d){function e(){b.fire("cta_click"),c.playing()?c.pause():c.play()}var f={type:"cta",visible:!1,element:{},html:{},init:function(){f.createElement()},show:function(){f.visible||(b.add(f.html,"#"+a.parentId,a.id),f.element=b.dom.getElementById(a.id),d.addEventListener(f.element,"click",e),f.visible=!0)},hide:function(){f.visible&&(f.destroyElement(),f.visible=!1)},createElement:function(){f.html=b.template.render(a.skin,{elementId:a.id})},destroyElement:function(){return b.remove(f.element)}};return f};a.CTA=b}(Invodo.Hi5||window),function(a){var b=function(b,c,d,e){var f={type:"endstate",element:{},visible:!1,queue:b.dialogs,html:{},init:function(){f.parent=c.dom.getElementById(b.parentId),f.state=c.dom.querySelector("#"+b.parentId+" .js-invodo-state"),f.createElement()},createElement:function(){f.html=c.template.render(b.skin,{elementId:b.id})},destroyElement:function(){return f.state.classList.remove("invodo-player__overlay"),f.state.classList.remove("invodo-player-end"),f.state.classList.remove("player-pause-layer-bg-color"),f.parent.classList.remove("invodo-cta-is-inactive"),f.state.classList.remove("invodo-player-beta"),c.fire("overlay_dialog_close",this),f.visible=!1,c.empty(f.state)},show:function(){function a(){d.play()}if(!f.visible&&d.ended){f.parent.classList.add("invodo-cta-is-inactive"),c.add(f.html,"#"+b.parentId+" .js-invodo-state",b.id),"compound"===b.format&&(f.state.classList.add("invodo-player__overlay"),f.state.classList.add("invodo-player-end"),f.state.classList.add("player-pause-layer-bg-color"),f.state.classList.add("invodo-player-beta"),f.queue.map(function(a){a.standalone=!0,a.show(),c.on("titlebar_"+a.type+"_click",function(){a.standalone=!1,a.visible=!1,f.hide(),a.createElement(),a.show()})}),f.parent.classList.remove("invodo-cta-is-inactive"));var g=c.dom.querySelector("#"+b.parentId+" .js-endstate-replay-link");e.addEventListener(g,"click",a),e.addEventListener(g,"touchend",a),f.element=c.dom.getElementById(b.id),f.visible=!0,c.fire("overlay_dialog_open",this)}},hide:function(){return f.visible!==!1?(f.visible=!1,f.queue.map(function(a){a.standalone=!1,a.hide()}),this.destroyElement()):void 0}};return a.EventDispatcher(f),f};a.EndState=b}(Invodo.Hi5||window),function(a){var b=function(a,b,c,d){function e(){var c={elementId:a.id};a.skinParams&&Object.keys(a.skinParams).forEach(function(b){c[b]=a.skinParams[b]}),g.html=b.template.render(a.skin,c)}function f(){return b.remove(g.element)}var g={type:"playbutton",visible:!1,element:{},html:"",init:function(){e()},show:function(){function e(){c.playing()?c.pause():c.play()}b.add(g.html,"#"+a.parentId,a.id),g.visible=!0,g.element=b.dom.getElementById(a.id),d.addEventListener(g.element,"click",e)},hide:function(){g.visible&&(f(),g.visible=!1)}};return g};a.PlayButton=b}(Invodo.Hi5||window),function(a){var b=function(b,c,d,e){var f={type:"playlist",visible:!1,html:{},init:function(){f.createElement()},createElement:function(){var a={elementId:b.id,playListClips:d.config};b.skinParams&&Object.keys(b.skinParams).forEach(function(c){a[c]=b.skinParams[c]}),f.html=c.template.render(b.skin,a),d.on("video_playing",function(){null!==c.dom.querySelector("#"+b.parentId+" .invodo-playlist--item-is-next")&&c.dom.querySelector("#"+b.parentId+" .invodo-playlist--item-is-next").classList.remove("invodo-playlist--item-is-next"),c.dom.querySelector("#"+b.parentId).classList.remove("invodo-playlist--is-standalone"),c.dom.querySelector("#"+b.parentId+" .js-invodo-playlist-item:nth-child("+(d.index+1)+")").classList.add("invodo-playlist--item-is-playing")}),d.on("new_video",function(){null!==c.dom.querySelector("#"+b.parentId+" .invodo-playlist--item-is-playing")&&c.dom.querySelector("#"+b.parentId+" .invodo-playlist--item-is-playing").classList.remove("invodo-playlist--item-is-playing")}),d.on("video_ended",function(){c.dom.querySelector("#"+b.parentId+" .js-invodo-playlist-item:nth-child("+(d.index+1)+")").classList.add("invodo-playlist--item-is-next"),c.dom.querySelector("#"+b.parentId).classList.add("invodo-playlist--is-standalone")}),c.on("playlist_next_item",function(){d.index<d.config.length-1?(d.index++,p=!1,f.willAutoPlayMultipleClips()&&(d.autoplay=!0,d.set(d.index),setTimeout(function(){d.play()},0))):(d.index=0,p=!0,c.fire("playlist_ended")),d.set(d.index)}),c.on("playlist_ended",function(){f.willAutoPlayMultipleClips()&&(d.autoplay=!1)})},hide:function(){f.visible&&(f.destroyElement(),f.visible=!1)},show:function(){function a(){f.element.classList.toggle("invodo-player--tooltip-content-is-disabled"),f.parent.classList.toggle("invodo-playlist-is-active")}function p(a,b){if(a.classList.contains("is-disabled")===!1){var c=k.style.left,d=m[0].offsetWidth;""===c&&(c="0px"),c=parseInt(c,10);var e="left"===b?c-d:c+d;s(e),k.style.left=e+"px"}}function r(){var a=k.style.left;""===a&&(a="0px"),a=parseInt(a,10),s(a)}function s(a){a>=0?h.classList.add("is-disabled"):h.classList.remove("is-disabled"),parseInt(k.computedStyle.width,10)+a<=parseInt(l.computedStyle.width,10)?i.classList.add("is-disabled"):i.classList.remove("is-disabled")}function t(a){d.set(a),d.play(),f.fire("playlist_item_clicked")}function u(a){var b={hours:parseInt(a/3600,10)%24,minutes:parseInt(a/60,10)%60,seconds:Math.floor(a%60)};return{minutes:b.minutes,seconds:b.seconds<10?"0"+b.seconds:b.seconds}}c.add(f.html,"#"+b.parentId,b.id),f.visible=!0,f.element=c.dom.getElementById(b.id),f.parent=c.dom.getElementById(b.parentId),g=c.dom.querySelector("#"+b.parentId+" .js-invodo-playlist-menu"),h=c.dom.querySelector("#"+b.parentId+" .js-invodo-playlist-previous"),i=c.dom.querySelector("#"+b.parentId+" .js-invodo-playlist-next"),j=c.dom.querySelector("#"+b.parentId+" .js-invodo-playlist-close"),k=c.dom.querySelector("#"+b.parentId+" .js-invodo-playlist-scroller"),l=c.dom.querySelector("#"+b.parentId+" .js-invodo-playlist-spacer"),m=c.dom.querySelectorAll("#"+b.parentId+" .js-invodo-playlist-item"),n=c.dom.querySelectorAll("#"+b.parentId+" .js-invodo-playlist-cliptitle"),o=c.dom.querySelectorAll("#"+b.parentId+" .invodo-playlist--time"),k.computedStyle=getComputedStyle(k),l.computedStyle=getComputedStyle(l),q||f.parent.classList.add("invodo-playlist-is-active");for(var v=0;v<o.length;v++)if(""!==o[v].textContent){var w=u(o[v].textContent);o[v].textContent=w.minutes+":"+w.seconds}else o[v].textContent="";for(var x=0;x<m.length;x++)e.addEventListener(m[x],"click",function(a){var b=parseInt(a.currentTarget.getAttribute("data-clip"),10);t(b)}),n[x]&&e.addEventListener(n[x],"click",function(a){var b=parseInt(a.currentTarget.getAttribute("data-clip-title"),10);t(b)});return c.on("ui_responsive_resize",function(){r()}),e.addEventListener(h,"click",function(){p(h,"right")}),e.addEventListener(i,"click",function(){p(i,"left")}),f.on("playlist_icon_clicked",function(){a(),q=!q}),e.addEventListener(j,"click",function(){a(),q=!0}),e.addEventListener(g,"click",function(a){a.stopPropagation()}),r(),this.element},destroyElement:function(){return c.remove(this.element)},willAutoPlayMultipleClips:function(){return b.autoPlayMultipleClips?b.autoPlayMultipleClips:!1},hasPlaylistEnded:function(){return p}},g={},h={},i={},j={},k={},l={},m=[],n=[],o=[],p=!1,q=!1;return a.EventDispatcher(f),f};a.Playlist=b}(Invodo.Hi5||window),function(a){var b=function(b,c,d,e,f){var g={type:"ratingscomments",stars:0,comments:"",submitted:!1,visible:!1,commentslimit:b.commentslimit||140,element:{},standalone:!1,html:{},init:function(){g.createElement()},createElement:function(){g.html=c.template.render(b.skin,{elementId:b.id})},destroyElement:function(){return c.fire("overlay_dialog_close",this),c.dom.querySelector("#"+b.parentId+" .js-invodo-state").classList.remove("invodo-player__overlay"),c.dom.querySelector("#"+b.parentId+" .js-invodo-state").classList.remove("player-pause-layer-bg-color"),g.standalone=!1,c.remove(this.element)},show:function(){if(!g.visible){d.playing()&&(h=!0,d.pause()),g.standalone?c.add(g.html,"#"+b.parentId+" .js-endstate-wrapper",b.id):(c.dom.querySelector("#"+b.parentId+" .js-invodo-state").className="js-invodo-state",c.empty(c.dom.querySelector("#"+b.parentId+" .js-invodo-state"),function(){c.add(g.html,"#"+b.parentId+" .js-invodo-state",b.id),c.dom.querySelector("#"+b.parentId+" .js-invodo-state").classList.add("invodo-player__overlay"),c.dom.querySelector("#"+b.parentId+" .js-invodo-state").classList.add("player-pause-layer-bg-color")})),this.element=c.dom.getElementById(b.id),g.visible=!0,c.fire("overlay_dialog_open",this),n=this.element.getElementsByClassName("js-invodo-action-close");for(var a=0;a<n.length;a++)e.addEventListener(n[a],"click",function(){g.hide()});i=this.element.querySelectorAll("#"+b.parentId+" .js-invodo-action-comments")[0],j=this.element.querySelectorAll("#"+b.parentId+" .js-invodo-ratingscomments")[0],m=this.element.querySelectorAll("#"+b.parentId+" .js-invodo-validation-charmax")[0],k=c.dom.querySelectorAll("#"+b.parentId+" .js-invodo-toggle-initial")[0],l=c.dom.querySelectorAll("#"+b.parentId+" .js-invodo-toggle-complete")[0],o=this.element.querySelectorAll("#"+b.parentId+" .js-invodo-action-rating");for(var q=function(a,b){for(var c=0;c<o.length;c++)o[c].classList.remove(b.active),o[c].classList.add(b.inactive),parseInt(o[c].getAttribute("data-rating"),10)<=a&&(o[c].classList.remove(b.inactive),o[c].classList.add(b.active))},r={click:{active:"invodo-star-is-active",inactive:"invodo-star-is-inactive"},mouseover:{active:"invodo-star--hover-is-active",inactive:"invodo-star--hover-is-inactive"}},s=0;s<o.length;s++){var t=o.item(s);e.addEventListener(t,"click",function(a){g.submitted!==!0&&c.fire("ratingscomments_star_click",{rating:a.target.getAttribute("data-rating")})}),e.addEventListener(t,"mouseover",function(a){q(parseInt(a.target.getAttribute("data-rating"),10),r.mouseover)}),e.addEventListener(t,"mouseout",function(){for(var a=0;a<o.length;a++)o[a].classList.remove(r.mouseover.active)})}c.on("ratingscomments_star_click",function(a){a.rating>0&&(g.stars=parseInt(a.rating,10),q(parseInt(a.rating,10),r.click),p("sendable"))});var u=function(){return g.commentslimit-g.comments.length<0},v=function(){j.value=g.comments,m.innerHTML=g.commentslimit-g.comments.length,u()&&p("overcommentlimit"),p(0===g.stars?"norating":"sendable"),g.submitted&&p("notsendable");for(var a=0;a<g.stars;a++)o[a].className=o[a].className.replace(/\binvodo-star-is-inactive\b/,"invodo-star-is-active")};v(),f.addEventListener(j,"keyup",function(){g.comments=j.value,m.innerHTML=g.commentslimit-g.comments.length,u()?(m.classList.add("invodo-text-is-invalid"),p("notsendable")):(m.classList.remove("invodo-text-is-invalid"),p("sendable"))}),e.addEventListener(i,"click",function(){g.submitted||i.classList.contains("invodo-btn-is-disabled")||(g.comments=j.value,g.comments=g.comments.slice(0,g.commentslimit-1),g.stars=g.element.querySelectorAll("#"+b.parentId+" .invodo-star-is-active").length,c.fire("ratingscomments_sendbutton_click",{stars:g.stars,comments:g.comments}),g.submitted=!0,p("notsendable"))})}},hide:function(){return g.visible?(h&&(d.play(),h=!1),g.visible=!1,this.destroyElement()):void 0}},h=!1,i={},j={},k={},l={},m={},n=[],o=[],p=function(a){l.classList.add("invodo-rating-is-inactive"),g.element.classList.add("invodo-rating-is-rated"),"notsendable"===a&&(i.classList.add("invodo-btn-is-disabled"),g.submitted&&(j.setAttribute("disabled",!0),k.classList.add("invodo-rating-is-inactive"),l.classList.remove("invodo-rating-is-inactive"))),"overcommentlimit"===a&&(i.classList.add("invodo-btn-is-disabled"),m.classList.add("invodo-text-is-invalid")),"norating"===a&&(i.classList.add("invodo-btn-is-disabled"),j.setAttribute("disabled",!0),g.element.classList.remove("invodo-rating-is-rated"),k.classList.remove("invodo-rating-is-inactive")),"sendable"===a&&(i.classList.remove("invodo-btn-is-disabled"),j.removeAttribute("disabled"),j.focus(),g.element.querySelectorAll("#"+b.parentId+" .invodo-comment--container")[0].classList.remove("invodo-comment-is-inactive"))};return a.EventDispatcher(g),g};a.RatingsComments=b}(Invodo.Hi5||window),function(a){var b=function(a,b,c,d){function e(){var c={elementId:a.id};a.skinParams&&Object.keys(a.skinParams).forEach(function(b){c[b]=a.skinParams[b]}),g.html=b.template.render(a.skin,c)}function f(){return b.remove(g.parent)}var g={type:"replaybutton",visible:!1,element:{},html:"",init:function(){e()},show:function(){function e(){c.previous(),c.play()}b.add(g.html,"#"+a.parentId,a.id),g.visible=!0,g.parent=b.dom.querySelector("#"+a.id),g.element=b.dom.querySelector("#"+a.id+" .js-invodo-replay"),g.next=b.dom.querySelector("#"+a.id+" .js-invodo-play-next"),d.addEventListener(g.element,"click",e),null!==g.next&&d.addEventListener(g.next,"click",function(){c.play()})},hide:function(){g.visible&&(f(),g.visible=!1)}};return g};a.ReplayButton=b}(Invodo.Hi5||window),function(a){var b=function(a,b,c){function d(a){return{"@context":"http://schema.org","@type":"VideoObject",name:a.title,description:a.title,thumbnailUrl:a.poster,duration:a.duration,contentUrl:a.encodings[0].file}}var e={type:"seo",visible:!1,element:{},html:{},init:function(){e.createElement()},show:function(){e.visible||(b.add(e.html,"#"+a.parentId,a.id),e.element=b.dom.getElementById(a.id),e.visible=!0)},hide:function(){e.visible&&(e.destroyElement(),e.visible=!1)},createElement:function(){var f={elementId:a.id};a.skinParams?(Object.keys(a.skinParams).forEach(function(b){f[b]=a.skinParams[b]}),a.skinParams.data||(f.data=d(c.config[0]))):f.data=d(c.config[0]),e.html=b.template.render(a.skin,f)},destroyElement:function(){return b.remove(e.element)}};return e};a.SEO=b}(Invodo.Hi5||window),function(a){var b=function(b,c,d,e){var f,g={type:"sharing",element:{},visible:!1,standalone:!1,html:{},init:function(){g.createElement(),f=c.nav.getLocationHref()||"",f=encodeURIComponent(f)},createElement:function(){g.html=c.template.render(b.skin,{elementId:b.id})},destroyElement:function(){return c.fire("overlay_dialog_close",this),c.dom.querySelector("#"+b.parentId+" .js-invodo-state").classList.remove("invodo-player__overlay"),c.dom.querySelector("#"+b.parentId+" .js-invodo-state").classList.remove("player-pause-layer-bg-color"),g.standalone=!1,c.remove(this.element)},show:function(){if(!g.visible){d.playing()&&(h=!0,d.pause()),g.standalone?c.add(g.html,"#"+b.parentId+" .js-endstate-wrapper",b.id):(c.dom.querySelector("#"+b.parentId+" .js-invodo-state").className="js-invodo-state",c.empty(c.dom.querySelector("#"+b.parentId+" .js-invodo-state"),function(){c.add(g.html,"#"+b.parentId+" .js-invodo-state",b.id),c.dom.querySelector("#"+b.parentId+" .js-invodo-state").classList.add("invodo-player__overlay"),c.dom.querySelector("#"+b.parentId+" .js-invodo-state").classList.add("player-pause-layer-bg-color")})),this.element=c.dom.getElementById(b.id),g.visible=!0,c.fire("overlay_dialog_open",this);var a=this.element.querySelectorAll("#"+b.parentId+" .invodo-sharing--container");if(g.standalone===!1){i=this.element.querySelectorAll("#"+b.parentId+" .js-invodo-action-close");for(var j=0;j<i.length;j++)e.addEventListener(i[j],"click",function(){g.hide()})}for(var k in b.socialnetworks){var l=document.createElement("I");if(l.className="invodo-icon invodo-icon--"+k.toLowerCase()+" js-invodo-action-"+k.toLowerCase(),l.setAttribute("data-social-network-type",k),a[0].appendChild(l),2===a[0].childNodes.length){var m=document.createElement("br");m.className="invodo-sharing--spacer",a[0].appendChild(m)}e.addEventListener(l,"click",function(a){var d=a.target.getAttribute("data-social-network-type");window.open(b.socialnetworks[d]+f,"email"===d.toLowerCase()?"_self":"_blank"),c.fire("sharing_sendbutton_click",{socialnetwork:d})})}}},hide:function(){return g.visible?(h&&(d.play(),h=!1),g.visible=!1,this.destroyElement()):void 0}},h=!1,i=[];return a.EventDispatcher(g),g};a.Sharing=b}(Invodo.Hi5||window),function(a){var b=function(b,c,d,e){var f={type:"titlebar",visible:!1,init:function(){e.on("new_video",function(a){f.title=a.title,f.createElement()})},buttons:[],element:{},parent:{},html:{},createElement:function(){var a={elementId:b.id,clipTitle:"",image:""};if(b.skinParams){var d="";"clipTitle"in b.skinParams&&b.skinParams.clipTitle===!0&&(d=f.title),Object.keys(b.skinParams).forEach(function(c){a[c]=b.skinParams[c]}),a.clipTitle=d}f.html=c.template.render(b.skin,a)},hide:function(){f.visible&&(f.destroyElement(),f.visible=!1)},show:function(){return c.add(f.html,"#"+b.parentId,b.id),f.visible=!0,f.element=c.dom.getElementById(b.id),f.parent=c.dom.getElementById(b.parentId),b.buttons.forEach(function(a,e){c.add(c.template.render("default.titlebutton",a),"#"+b.parentId+" .js-invodo-titlebuttons",b.id);var g=c.dom.querySelectorAll("#"+b.parentId+" ."+a.cssclass)[0];if(g){f.buttons.push(g);var h=a.type.toLowerCase();d.addEventListener(g,"click",function(){c.fire("titlebar_"+h+"_click")}),b.buttons.length-1===e&&g.classList.add("invodo-tooltip--left")}}),this.element},destroyElement:function(){return c.remove(this.element)}};return a.EventDispatcher(f),f};a.VideoTitlebar=b}(Invodo.Hi5||window),function(a){var b=function(b,c,d,e,f,g){function h(){for(var a=e.getCurrent(),b=a.defaultEncoding,d=N.childNodes[0];d.hasChildNodes();)d.removeChild(d.lastChild);for(var f,g=!1,h=a.encodings.length-1;h>=0;--h)f=c.dom.createElement("li"),f.textContent=a.encodings[h].label,f.setAttribute("data-encoding",a.encodings[h].label),b&&a.encodings[h].id&&b===a.encodings[h].id&&(C=a.encodings[h].label),C===f.getAttribute("data-encoding")&&(f.className="invodo-menu--item-is-active",g=!0),N.childNodes[0].appendChild(f);g||d.childNodes[0].classList.add("invodo-menu--item-is-active")}function i(){f.vertical.set(e.volume(),n),l(),k(),e.playing()?(J.classList.remove("invodo-icon--play"),J.classList.add("invodo-icon--pause")):(J.classList.remove("invodo-icon--pause"),J.classList.add("invodo-icon--play")),f.value=e.volume(),h()}function j(a){var b={hours:parseInt(a/3600,10)%24,minutes:parseInt(a/60,10)%60,seconds:Math.floor(a%60)};return{minutes:b.minutes,seconds:b.seconds<10?"0"+b.seconds:b.seconds}}function k(){var a=e.time(),b=e.duration(),c=a/b*100;g.amount.style.width=c+"%"}function l(){var a=e.time(),b=j(a),c=j(e.duration());G.length>0&&(G[0].textContent=b.minutes+":"+b.seconds),H.length>0&&(H[0].textContent=c.minutes+":"+c.seconds)}function m(){K.classList.remove("invodo-icon--volume-low"),K.classList.remove("invodo-icon--volume"),K.classList.remove("invodo-icon--volume-high"),K.classList.remove("invodo-icon--mute"),K.classList.remove("invodo-icon--volume-off")}function n(a){return m(),e.muted()?(K.classList.add("invodo-icon--mute"),void f.vertical.set(0)):void(a>=.5?K.classList.add("invodo-icon--volume-high"):0===a?K.classList.add("invodo-icon--mute"):K.classList.add("invodo-icon--volume-low"))}function o(a){f.active=!1,P.classList.remove("invodo-menu-is-active"),e.setVolume(a),n(a)}function p(a){a.stopPropagation(),f.active&&c.fire("slider_volumechange",{volume:f.vertical.get()})}function q(a){f.active=!0,d.addEventListener(c.dom,"mousemove",x),d.addEventListener(c.dom,"mouseup",y),d.addEventListener(f.range.parentNode,"mouseup",p),d.addEventListener(f.range,"mouseup",p),d.addEventListener(f.scrub,"mouseup",p),d.addEventListener(c.dom,"touchmove",x),d.addEventListener(c.dom,"touchend",y),d.addEventListener(f.range.parentNode,"touchend",p),d.addEventListener(f.range,"touchend",p),d.addEventListener(f.scrub,"touchend",p),f.vertical.init(a,function(){
P.classList.add("invodo-menu-is-active")})}function r(a){var d=c.dom.querySelectorAll("#"+b.parentId+" .js-invodo-timeline")[0],f=d&&d.ownerDocument,h=c.getOffset(d,f,f.documentElement),i=a.clientX-parseInt(h.left,10),k=e.duration(),l=i/g.range.clientWidth*k,m=j(l),n=m.minutes+":"+m.seconds;g.horizontal.toolTip.setToolTipText(n);var o=0,p=g.range.clientWidth/2,q=Math.abs(p-i);return o=i>p?p+q+"px":p-q+"px"}function s(a){var b=getComputedStyle(g.scrub),d=getComputedStyle(g.range),e=(parseInt(r(a),10)-parseInt(b.width,10)/2)/parseInt(d.width,10);g.horizontal.set(e,function(){c.fire("slider_timeupdate")})}function t(a){var b=r(a);g.horizontal.toolTip.setToolTipLocation(b)}function u(){g.horizontal.toolTip.init(I),d.addEventListener(I,"mousemove",t),d.addEventListener(g.scrub,"mousemove",t),d.addEventListener(g.range,"mousemove",t),d.addEventListener(I,"touchmove",t),d.addEventListener(g.scrub,"touchmove",t),d.addEventListener(g.range,"touchmove",t)}function v(){d.removeEventListener(I,"mousemove",t),d.removeEventListener(g.scrub,"mousemove",t),d.removeEventListener(g.range,"mousemove",t),d.removeEventListener(I,"touchmove",t),d.removeEventListener(g.scrub,"touchmove",t),d.removeEventListener(g.range,"touchmove",t)}function w(a){e.off("video_timeupdate",A),g.active=!0,d.addEventListener(c.dom,"mousemove",x),d.addEventListener(c.dom,"mouseup",y),d.addEventListener(c.dom,"touchmove",x),d.addEventListener(c.dom,"touchend",y),g.horizontal.init(a,function(){c.dom.getElementById(b.parentId).classList.add("invodo-cta-is-active")})}function x(a){g.active===!0&&g.horizontal.update(a,function(a){g.amount.style.width=a+"px"}),f.active===!0&&f.vertical.update(a,function(a){f.amount.style.height=a+"px"})}function y(){(g.active||f.active)&&(c.dom.getElementById(b.parentId).classList.remove("invodo-cta-is-active"),g.active&&(c.fire("slider_timeupdate"),e.on("video_timeupdate",A)),f.active&&(c.fire("slider_volumechange",{volume:f.vertical.get()}),d.removeEventListener(f.range.parentNode,"mouseup",p),d.removeEventListener(f.range,"mouseup",p),d.removeEventListener(f.scrub,"mouseup",p),d.removeEventListener(f.range.parentNode,"touchend",p),d.removeEventListener(f.range,"touchend",p),d.removeEventListener(f.scrub,"touchend",p)),d.removeEventListener(c.dom,"mousemove",x),d.removeEventListener(c.dom,"mouseup",y),d.removeEventListener(c.dom,"touchmove",x),d.removeEventListener(c.dom,"touchend",y))}function z(){b.buttons&&b.buttons.forEach(function(a){c.add(c.template.render("default.controlbutton",a),"#"+b.parentId+" .js-invodo-controlbuttons",b.id)}),F=c.dom.querySelectorAll("#"+b.parentId+" .js-invodo-progress-buffer"),f.scrub=c.dom.querySelectorAll("#"+b.parentId+" .js-invodo-action-volume")[0],f.amount=c.dom.querySelectorAll("#"+b.parentId+" .js-invodo-volume-amount")[0],f.range=c.dom.querySelectorAll("#"+b.parentId+" .js-invodo-volume")[0],P=c.dom.querySelectorAll("#"+b.parentId+" .js-invodo-menu")[0],g.scrub=c.dom.querySelectorAll("#"+b.parentId+" .js-invodo-time-scrub")[0],g.amount=c.dom.querySelectorAll("#"+b.parentId+" .js-invodo-progress-play")[0],g.range=c.dom.querySelectorAll("#"+b.parentId+" .js-invodo-progress")[0],I=c.dom.querySelector("#"+b.parentId+" .js-invodo-timeline"),G=c.dom.querySelectorAll("#"+b.parentId+" .js-invodo-time-start"),H=c.dom.querySelectorAll("#"+b.parentId+" .js-invodo-time-end"),J=c.dom.querySelectorAll("#"+b.parentId+" .js-invodo-action-play")[0],K=c.dom.querySelectorAll("#"+b.parentId+" .js-invodo-btn-volume")[0],L=c.dom.querySelectorAll("#"+b.parentId+" .js-invodo-action-fullscreen")[0],M=c.dom.querySelectorAll("#"+b.parentId+" .js-invodo-action-fullscreen-close")[0],N=c.dom.querySelectorAll("#"+b.parentId+" .js-invodo-encoding-menu")[0],O=c.dom.querySelectorAll("#"+b.parentId+" .js-invodo-playlistButton")[0],c.on("video_fullscreen",function(a){var d=c.dom.querySelector("#"+b.parentId);d&&(a.isFullscreen?d.classList.add("invodo-fullscreen-is-active"):d.classList.remove("invodo-fullscreen-is-active"))}),d.addEventListener(g.scrub,"mousedown",w),d.addEventListener(f.scrub,"mousedown",q),d.addEventListener(I,"mouseout",v),d.addEventListener(I,"mouseover",u),d.addEventListener(I,"click",s),d.addEventListener(g.scrub,"touchstart",w),d.addEventListener(f.scrub,"touchstart",q),d.addEventListener(I,"touchstart",v),d.addEventListener(I,"touchend",u),d.addEventListener(K,"mouseup",function(){e.muted()?e.unmute():e.mute()}),d.addEventListener(J,"click",function(){e.paused()?e.play():e.pause()}),d.addEventListener(N,"click",function(a){a.stopPropagation(),N.classList.remove("invodo-menu-is-active"),a.target.textContent&&(null!==N.querySelector(".invodo-menu--item-is-active")&&N.querySelector(".invodo-menu--item-is-active").classList.remove("invodo-menu--item-is-active"),a.target.classList.add("invodo-menu--item-is-active"),N.parentNode.classList.remove("invodo-player--tooltip-content-is-disabled"),C=a.target.getAttribute("data-encoding"),c.fire("videocontrolbar_encodingmenuitem_clicked",{encodingLabel:a.target.textContent}))}),L&&d.addEventListener(L,"click",function(){D.fire("videocontrolbar_fullscreen")}),M&&d.addEventListener(M,"click",function(){D.fire("videocontrolbar_fullscreen")}),O&&d.addEventListener(O,"click",function(){D.fire("controlbar_playlist_icon_clicked")})}function A(){k(),l()}function B(){e.on("new_video",function(){i()}),e.on("video_durationchange",function(){l()}),e.on("video_playing",function(){E=!0}),e.on("video_timeupdate",A),e.on("video_loadeddata",function(){m();var a=e.muted()?0:e.volume();f.vertical.set(a,n)}),e.on("video_volumechange",function(a){m();var b=a.muted?0:a.volume;f.vertical.set(b,n)}),c.on("slider_volumechange",function(a){m(),f.vertical.set(a.volume,o)}),c.on("slider_timeupdate",function(){g.active=!1,e.seek(e.duration()*g.horizontal.get())}),e.on("video_playing",function(){J.classList.remove("invodo-icon--play"),J.classList.add("invodo-icon--pause")}),e.on("video_pause",function(){J.classList.remove("invodo-icon--pause"),J.classList.add("invodo-icon--play")})}var C,D={type:"videocontrolbar",html:{},visible:!1,init:function(){this.createElement()},show:function(){return c.add(D.html,"#"+b.parentId,b.id),this.element=c.dom.getElementById(b.id),D.visible=!0,z(),B(),i(),this.element},hide:function(){D.visible&&(D.destroyElement(),D.visible=!1)},createElement:function(){D.html=c.template.render(b.skin,{elementId:b.id})},destroyElement:function(){return c.remove(this.element)}},E=!1,F={},G={},H={},I={},J={},K={},L={},M={},N={},O={},P={};return a.EventDispatcher(D),D};a.VideoControlbar=b}(Invodo.Hi5||window),function(a){var b=a.Component();a.Media={type:"media",config:{},init:function(){},getPlayList:function(){},getCurrent:function(){},next:function(){},previous:function(){},set:function(){}},a.Media=b.extend(b,a.Media),a.MediaFactory=function(b){var c={};return"videomedia"===b.type&&(c=a.VideoMedia(b)),a.Media.extend(a.Media,c)}}(Invodo.Hi5||window),function(a){var b=function(b,c,d,e,f){function g(a){var b="",d=c.dom.createElement("video");return d.canPlayType&&(b=d.canPlayType(a)),b}function h(){c.add(c.template.render("default.html5videoLoad",b.skinParams),"#"+b.parentId+" .js-invodo-state","#"+b.parentId+" .js-invodo-state"),l=!0}function i(){if(l){var a=c.dom.querySelectorAll("#"+b.parentId+" .js-invodo-state")[0];a&&a.nodeName&&(c.empty(a),l=!1)}}function j(a){for(;k.element.hasChildNodes();)k.element.removeChild(k.element.firstChild);for(var b=!1,d=0;d<a.length;d++)if(g(a[d].type)){var e=c.dom.createElement("source");e.src=a[d].file,e.type=a[d].type,k.element.appendChild(e),b=!0}var f=c.dom.createElement("p");f.innerHTML="Your browser does not support the video tag!",k.element.appendChild(f),b||k.fire("video_error_noencodings"),k.element.load&&k.element.load()}var k={type:"html5video",id:b.id,createElement:function(){return c.add(c.template.render("default.html5videoStart",{elementId:this.id}),"#"+b.parentId,this.id),this.element=c.dom.getElementById(this.id),this.parent=c.dom.getElementById(b.parentId),b.controls&&(this.element.controls="true"),"overlay"===b.mode&&(this.parent.classList.add("invodo-overlay"),this.parent.classList.add("invodo-overlay-is-inactive"),c.add(c.template.render("default.overlayclose"),"#"+b.parentId,b.parentId),this.overlay=c.dom.querySelector(".js-invodo-mask"),this.overlayClose=c.dom.querySelector("#"+b.parentId+" .js-invodo-overlay--close"),f.addEventListener(this.overlay,"click",function(a){(a.target===k.overlay||a.target.offsetParent===k.overlay)&&c.fire("overlay_close")}),f.addEventListener(this.overlayClose,"click",function(){c.fire("overlay_close")})),this.element},destroyElement:function(){return c.remove(this.element)},init:function(){return this.createElement(),this},show:function(){},hide:function(){},setVideoMaxSize:function(a){a.width&&a.height&&d.addSelector("#"+b.parentId+".invodo-overlay:not(.invodo-fullscreen-is-active)",[{"max-width":a.width+"px"},{"max-height":a.height+"px"}])}},l=!1;return e.on("new_video",function(a){var c=a;k.element.poster=a.poster;var d=c.encodings.filter(function(a){return a.id===c.defaultEncoding});"overlay"===b.mode&&k.setVideoMaxSize(d[0]),j(d)}),e.on("video_playing",function(){i();var a=c.dom.querySelectorAll("#"+b.parentId+" .js-invodo-state")[0];a&&c.empty(c.dom.querySelectorAll("#"+b.parentId+" .js-invodo-state")[0])}),e.on("loadingstart",h),e.on("loadingstop",i),e.on("video_pause",i),c.on("videocontrolbar_encodingmenuitem_clicked",function(a){function c(){e.off("video_loadeddata",c),e.on("video_seeked",d),e.seek(f);var b=e.getCurrent().encodings.filter(function(b){return b.label===a.encodingLabel});k.fire("video_encoding_change",b.shift()||e.getCurrent().encodings[0])}function d(){e.off("video_seeked",d),l?e.play():i()}var f=e.time(),g=e.getCurrent(),l=e.playing(),m=g.encodings.filter(function(b){return b.label===a.encodingLabel});0!==m.length&&("overlay"===b.mode&&k.setVideoMaxSize(m[0]),h(),j(m),e.on("video_loadeddata",c))}),c.on("overlay_open",function(){document.body.style.overflow="hidden",k.parent.classList.add("invodo-overlay-is-active"),k.parent.classList.remove("invodo-overlay-is-inactive"),k.overlay.classList.add("invodo-mask-is-active"),e.on("video_play",function(){c.fire("ui_responsive_resize")})}),c.on("overlay_close",function(){document.body.style.overflow="auto",k.overlay.classList.remove("invodo-mask-is-active"),k.overlay.classList.add("invodo-mask-is-inactive"),k.parent.classList.remove("invodo-overlay-is-active"),k.parent.classList.add("invodo-overlay-is-inactive")}),a.EventDispatcher(k),k};a.Display=b}(Invodo.Hi5||window),function(a){var b=function(a){var b=[],c={},d=function(a,b){var d=/\W/.test(a)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+a.replace(/[\r\t\n]/g," ").split("<%").join("	").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("	").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):c[a]=c[a]||f.tmpl(document.getElementById(a).innerHTML);return b?d(b):d},e=a||d,f={type:"template",init:function(){},addTemplate:function(a,c){b[a]=e(c)},removeTemplate:function(a){delete b[a]},getTemplate:function(a){return b[a]||""},render:function(a,c){return c=c||{},b[a](c)}},g='<article class="invodo-icon--col"><i class="<%=icon%> <%=cssclass%>"><% if(typeof tooltip !== \'undefined\') { %><div class="invodo-tooltip__content player-controls-bg-color js-invodo-tooltip"><span><%=tooltip%></span></div><% } else { %><%=html%><% } %></i></article>';f.addTemplate("default.controlbutton",g);var h='<div class="invodo-player-end--wrapper js-endstate-wrapper"></div><div class="invodo-replay-link-wrapper font-size-4 js-endstate-replay-link">Replay</div>';f.addTemplate("default.endstate",h);var i='<% if(loadingView) { %><div class="invodo-loader--overlay font-size-4 layer-start-finish-layer-bg-color js-invodo-load-video-blur"><div class="invodo-loader"><span class="invodo-loader--wbar primary-color-as-background"></span> <span class="invodo-loader--wbar primary-color-as-background"></span> <span class="invodo-loader--wbar primary-color-as-background"></span> <span class="invodo-loader--wbar primary-color-as-background"></span> <span class="invodo-loader--wbar primary-color-as-background"></span></div></div><% } %>';f.addTemplate("default.html5videoLoad",i);var j='<section id="<%=elementId%>" class="invodo-player__overlay js-invodo-play"></section>';f.addTemplate("default.html5videoPlay",j);var k='<div class="js-invodo-state"></div><video id="<%=elementId%>" class="js-invodo-play"></video>';f.addTemplate("default.html5videoStart",k);var l='<div id="<%=id%>" class="invodo-mask player-overlay-bg-color js-invodo-mask"></div>';f.addTemplate("default.overlay",l);var m='<div class="icon-size-3"><i class="invodo-icon invodo-icon--close-thin invodo-overlay--close player-overlay-close-color js-invodo-overlay--close"></i></div>';f.addTemplate("default.overlayclose",m);var n='<div id="<%=elementId%>" class="invodo-play--wrapper player-start-finish-layer-bg-color"><section class="invodo-col-2 invodo-play--inner-wrapper js-cta-selector"><div class="js-invodo-playbutton"><svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 62.75 62.5" class="invodo-svg-play js-invodo-play"><path class="primary-color" style="fill-rule:evenodd;clip-rule:evenodd" d="M31.375,62.5C14.047,62.5,0,48.509,0,31.25S14.047,0,31.375,0S62.75,13.991,62.75,31.25S48.703,62.5,31.375,62.5z M23.753,20.256v22.488L43.256,31.5L23.753,20.256z"/></svg><h4 class="invodo-replay invodo-replay-is-hidden font-size-4 js-invodo-replaytext"></h4></div></section></div>';f.addTemplate("default.playButton",n);var o='<div id="<%=elementId%>" class="invodo-play--wrapper player-start-finish-layer-bg-color"><section class="invodo-col-2 invodo-play--inner-wrapper js-cta-selector"><div class="js-invodo-playbutton"><img src="<%=url%>" alt="Play" width="100%" class="js-invodo-play"></div></section></div>';f.addTemplate("default.playButtonImg",o);var p='<div id="invodo-player--css-id"><div id="<%=wrapperId%>" class="invodo-primary-font invodo-link-font invodo-player-id-wrapper"><div class="invodo-player__container primary-color"><section id="<%=containerId%>" class="invodo-player invodo-row"><script type="application/ld+json">{"@context":"http://schema.org", "@type":"VideoObject", "name":"<%= data.title %>", "description":"<%= data.title %>", "thumbnailUrl":"<%= data.poster %>", "duration":"<%= data.duration %>", "contentUrl":"<%= data.encodings[0].file %>"}</script></section></div></div></div>';f.addTemplate("default.playercontainer",p);var q='<article id="<%=elementId%>" class="invodo-playlist--wrapper"><div class="player-controls-bg-color invodo-playlist js-invodo-playlist-menu invodo-width100"><span class="invodo-playlist--previous js-invodo-playlist-previous"></span> <span class="invodo-playlist--next js-invodo-playlist-next"></span> <i class="invodo-icon invodo-icon--close invodo-playlist--close icon-size-1 js-invodo-playlist-close"></i><div class="invodo-playlist-spacer js-invodo-playlist-spacer"><div class="invodo-playlist-scroller js-invodo-playlist-scroller"><% for (var i = 0; i < playListClips.length; i++) { %><% if (clipTitle) { %><div data-clip="<%=i.toString()%>" class="invodo-row invodo-playlist--item js-invodo-playlist-item"><% } else { %><div data-clip="<%=i.toString()%>" class="invodo-row invodo-playlist--item js-invodo-playlist-item invodo-playlist--is-without-titles"><% } %><div class="invodo-col-6 invodo-playlist--image-wrapper"><div class="invodo-playlist--image-background" style="background-image: url(<%=playListClips[i].poster%>)"></div><img class="invodo-playlist--image" src="<%= playListClips[i].poster %>" width="128" height="72" alt="<%=playListClips[i].title%>"></div><% if (clipTitle) { %><div class="invodo-col-6 invodo-playlist--content font-size-1"><div class="invodo-playlist--title js-invodo-playlist-cliptitle"><%=playListClips[i].title %></div><div class="invodo-playlist--time"><%=playListClips[i].duration %></div></div><% } %></div><% } %></div></div></div></div></article>';f.addTemplate("default.playlist",q);var r='<div id="<%=elementId%>" class="invodo-rating"><div class="invodo-rating--wrapper"><article class="invodo-rating--container js-invodo-toggle-initial"><div class="invodo-rating--heading-container icon-size-3"><h2 class="invodo-rating--heading font-size-4">How helpful was this video?</h2><div class="invodo-rating--score__container"><i data-rating="1" class="invodo-icon invodo-icon--star invodo-star--hover-is-inactive invodo-star-is-inactive js-invodo-action-rating"></i> <i data-rating="2" class="invodo-icon invodo-icon--star invodo-star--hover-is-inactive invodo-star-is-inactive js-invodo-action-rating"></i> <i data-rating="3" class="invodo-icon invodo-icon--star invodo-star--hover-is-inactive invodo-star-is-inactive js-invodo-action-rating"></i> <i data-rating="4" class="invodo-icon invodo-icon--star invodo-star--hover-is-inactive invodo-star-is-inactive js-invodo-action-rating"></i> <i data-rating="5" class="invodo-icon invodo-icon--star invodo-star--hover-is-inactive invodo-star-is-inactive js-invodo-action-rating"></i></div></div><div class="invodo-comment--container invodo-comment-is-inactive"><div class="invodo-comment--gutter"><textarea class="invodo-width100 invodo-comment--text font-size-2 js-invodo-ratingscomments" placeholder="Tell us why..."></textarea><div class="invodo-comment--charmax js-invodo-validation-charmax">140</div></div><div class="invodo-btn invodo-btn--comment invodo-btn-is-disabled font-size-3 btn-color btn-background-color js-invodo-action-comments">Submit</div></div></article><article class="invodo-rating--completed js-invodo-toggle-complete"><div class="invodo-rating--heading-container"><h2 class="invodo-rating--heading">Your feedback has been submitted.</h2></div><div class="invodo-rating--completed__container"><div class="invodo-btn invodo-btn--comment font-size-3 secondary-color-as-background js-invodo-action-close">OK</div></div></article></div><div class="invodo-btn--close__container font-size-2 js-invodo-action-close"><span class="invodo-btn--close-text">Back to video</span> <i class="invodo-icon invodo-icon--close"></i></div></div>';f.addTemplate("default.ratingscomments",r);var s='<div id="<%=elementId%>" class="invodo-play--wrapper player-start-finish-layer-bg-color"><section class="invodo-col-2 invodo-play--inner-wrapper js-cta-selector"><div class="js-invodo-replay"><svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 62.75 62.5" class="invodo-svg-play"><path class="primary-color" style="fill-rule:evenodd;clip-rule:evenodd" d="M31.375,62.5C14.047,62.5,0,48.509,0,31.25S14.047,0,31.375,0S62.75,13.991,62.75,31.25S48.703,62.5,31.375,62.5z M23.753,20.256v22.488L43.256,31.5L23.753,20.256z"/></svg><h4 class="invodo-replay font-size-4">Replay</h4></div></section></div>';f.addTemplate("default.replayButton",s);var t='<div id="<%=elementId%>" class="invodo-play--wrapper player-start-finish-layer-bg-color"><section class="invodo-col-2 invodo-play--inner-wrapper js-cta-selector"><div class="js-invodo-replay"><img src="<%=url%>" alt="Play" width="100%"><h4 class="invodo-replay font-size-4">Replay</h4></div></section></div>';f.addTemplate("default.replayButtonImg",t);var u='<div id="<%=elementId%>" class="invodo-play--wrapper player-start-finish-layer-bg-color"><section class="invodo-col-2 invodo-play--inner-wrapper"><div class="js-invodo-play-next"><svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 62.75 62.5" class="invodo-svg-play"><path class="primary-color" style="fill-rule:evenodd;clip-rule:evenodd" d="M31.375,62.5C14.047,62.5,0,48.509,0,31.25S14.047,0,31.375,0S62.75,13.991,62.75,31.25S48.703,62.5,31.375,62.5z M23.753,20.256v22.488L43.256,31.5L23.753,20.256z"/></svg></div></section><h4 class="invodo-replay font-size-4 js-invodo-replay">Replay</h4></div>';f.addTemplate("default.replayPlaylist",u);var v='<script id="<%= elementId %>" type="application/ld+json"><%= JSON.stringify(data) %></script>';f.addTemplate("default.seo",v);var w='<div id="<%=elementId%>" class="invodo-sharing"><div class="invodo-sharing--wrapper"><h2 class="invodo-sharing--heading font-size-4">Share this video</h2><article class="invodo-sharing--container icon-size-4"></article></div><div class="invodo-btn--close__container font-size-2 icon-size-1 js-invodo-action-close"><span class="invodo-btn--close-text">Back to video</span> <i class="invodo-icon invodo-icon--close"></i></div></div>';f.addTemplate("default.sharing",w);var x='<style id="<%=elementId%>"></style>';f.addTemplate("default.style",x);var y="<% if (color.primary){ %><%=wrapperElement%>.primary-color,<%=wrapperElement%>.primary-color h1,<%=wrapperElement%>.primary-color h2,<%=wrapperElement%>.primary-color h3,<%=wrapperElement%>.primary-color h4,<%=wrapperElement%>.primary-color h5,<%=wrapperElement%>.primary-color h6,<%=wrapperElement%>.primary-color a{ color: rgb(<%=color.primary%>); fill: rgb(<%=color.primary%>); }<%=wrapperElement%>.invodo-playlist--previous { border-right-color: rgb(<%=color.primary%>); }<%=wrapperElement%>.invodo-playlist--next{ border-left-color: rgb(<%=color.primary%>); } @media screen and (-webkit-min-device-pixel-ratio:0) {<%=wrapperElement%>.invodo-player--title.invodo-text-effect-overflow-hidden .invodo-text-effect-nowrap-fade-light { background-image: linear-gradient(to left, rgba(<%=color.primary%>, 0) 0%, rgba(<%=color.primary%>, 0.25) 5%, rgb(<%=color.primary%>) 10%); } }<%=wrapperElement%>.primary-color-as-background{ background-color: rgb(<%=color.primary%>); }<%=wrapperElement%>.primary-color-as-background.opacity-1{ background-color: rgba(<%=color.primary%>,<%=opacity.primary1%>); }<%=wrapperElement%>.primary-color-as-background.opacity-2 { background-color: rgba(<%=color.primary%>,<%=opacity.primary2%>); }<% } %><% if (color.background){ %><%=wrapperElement%>.player-controls-bg-color { background: rgba(<%=color.background%>,<%=opacity.controls%>); }<%=wrapperElement%>.invodo-playlist-is-active .invodo-player--controlbar .invodo-menu__content.player-controls-bg-color { background-image: linear-gradient(to bottom, rgba(<%=color.background%>,0.8) 0%,rgba(<%=color.background%>,0.75) 60%, transparent 100%); }<%=wrapperElement%>.player-pause-layer-bg-color,<%=wrapperElement%>.invodo-playlist--is-standalone .invodo-playlist { background: rgba(<%=color.background%>,<%=opacity.pauseLayer%>); }<%=wrapperElement%>.player-start-finish-layer-bg-color { background: rgba(<%=color.background%>,<%=opacity.startFinishLayer%>); }<%=wrapperElement%>.invodo-tooltip--top .invodo-tooltip__content:before { border-top-color: rgba(<%=color.background%>,<%=opacity.controls%>); }<%=wrapperElement%>.invodo-tooltip--bottom .invodo-tooltip__content:before { border-bottom-color: rgba(<%=color.background%>,<%=opacity.controls%>); }<% } %><% if (color.secondary){ %><%=wrapperElement%>.secondary-color{ color: rgb(<%=color.secondary%>); }<%=wrapperElement%>.btn-background-color,<%=wrapperElement%>.secondary-color-as-background{ background-color: rgb(<%=color.secondary%>); }<% } %><% if (color.textOnSecondary){ %><%=wrapperElement%>.btn-color{ color: rgb(<%=color.textOnSecondary%>); }<% } %><% if (color.overlayClose){ %><%=wrapperElement%>.player-overlay-close-color{ color: rgb(<%=color.overlayClose%>); }<% } %><% if (color.overlay){ %><%=wrapperElement%>.player-overlay-bg-color{ background: rgba(<%=color.overlay%>,<%=opacity.overlay%>); }<% } %>";f.addTemplate("default.themeColor",y);var z="<% if (font.size){ %><%=wrapperElement%>.invodo-primary-font { font-size:<%=font.size%>px; }<% } %><% if (font.weight){ %><%=wrapperElement%>.invodo-primary-font * { font-weight:<%=font.weight%>; }<% } %><% if (font.family){ %><%=wrapperElement%>.invodo-primary-font * { font-family:<%=font.family%>; }<% } %><% if (font.size1){ %><%=wrapperElement%>.font-size-1 { font-size:<%=font.size1%>px; }<%=wrapperElement%>.invodo-xs .font-size-1 { font-size:<%=font.size1 - 2%>px; }<%=wrapperElement%>.invodo-sm .font-size-1 { font-size:<%=font.size1 - 2%>px; }<%=wrapperElement%>.invodo-md .font-size-1 { font-size:<%=font.size1 - 1%>px; }<% } %><% if (font.size2){ %><%=wrapperElement%>.font-size-2 { font-size:<%=font.size2%>px; }<%=wrapperElement%>.invodo-xs .font-size-2 { font-size:<%=font.size2 - 2%>px; }<%=wrapperElement%>.invodo-sm .font-size-2 { font-size:<%=font.size2 - 2%>px; }<%=wrapperElement%>.invodo-md .font-size-2 { font-size:<%=font.size2 - 1%>px; }<% } %><% if (font.size3){ %><%=wrapperElement%>.font-size-3 { font-size:<%=font.size3%>px; }<%=wrapperElement%>.invodo-xs .font-size-3 { font-size:<%=font.size3 - 3%>px; }<%=wrapperElement%>.invodo-sm .font-size-3 { font-size:<%=font.size3 - 3%>px; }<%=wrapperElement%>.invodo-md .font-size-3 { font-size:<%=font.size3 - 2%>px; }<% } %><% if (font.size4){ %><%=wrapperElement%>.font-size-4 { font-size:<%=font.size4%>px; }<%=wrapperElement%>.invodo-xs .font-size-4 { font-size:<%=font.size4 - 4%>px; }<%=wrapperElement%>.invodo-sm .font-size-4 { font-size:<%=font.size4 - 4%>px; }<%=wrapperElement%>.invodo-md .font-size-4 { font-size:<%=font.size4 - 2%>px; }<% } %><% if (font.iconSize1){ %><%=wrapperElement%>.icon-size-1 .invodo-icon:before { font-size:<%=font.iconSize1%>px; }<%=wrapperElement%>.invodo-xs .icon-size-1 .invodo-icon:before { font-size:<%=font.iconSize1 - 2%>px; }<%=wrapperElement%>.invodo-sm .icon-size-1 .invodo-icon:before { font-size:<%=font.iconSize1 - 2%>px; }<%=wrapperElement%>.invodo-md .icon-size-1 .invodo-icon:before { font-size:<%=font.iconSize1 - 1%>px; }<% } %><% if (font.iconSize1){ %><%=wrapperElement%>.icon-size-2 .invodo-icon:before { font-size:<%=font.iconSize1 + 2%>px; }<%=wrapperElement%>.invodo-xs .icon-size-2 .invodo-icon:before { font-size:<%=font.iconSize1%>px; }<%=wrapperElement%>.invodo-sm .icon-size-2 .invodo-icon:before { font-size:<%=font.iconSize1%>px; }<%=wrapperElement%>.invodo-md .icon-size-2 .invodo-icon:before { font-size:<%=font.iconSize1 + 1%>px; }<% } %><% if (font.iconSize3){ %><%=wrapperElement%>.icon-size-3 .invodo-icon:before { font-size:<%=font.iconSize3%>px; }<%=wrapperElement%>.invodo-xs .icon-size-3 .invodo-icon:before { font-size:<%=font.iconSize3 - 8%>px; }<%=wrapperElement%>.invodo-sm .icon-size-3 .invodo-icon:before { font-size:<%=font.iconSize3 - 6%>px; }<%=wrapperElement%>.invodo-md .icon-size-3 .invodo-icon:before { font-size:<%=font.iconSize3 - 3%>px; }<% } %><% if (font.iconSize4){ %><%=wrapperElement%>.icon-size-4 .invodo-icon:before { font-size:<%=font.iconSize4%>px; }<%=wrapperElement%>.invodo-xs .icon-size-4 .invodo-icon:before { font-size:<%=font.iconSize4 - 25%>px; }<%=wrapperElement%>.invodo-sm .icon-size-4 .invodo-icon:before { font-size:<%=font.iconSize4 - 20%>px; }<%=wrapperElement%>.invodo-md .icon-size-4 .invodo-icon:before { font-size:<%=font.iconSize4 - 15%>px; }<% } %>";f.addTemplate("default.themeTypography",z);var A='<header id="<%=elementId%>" class="invodo-player--controlbar invodo-player--titlebar player-controls-bg-color invodo-width100 invodo-row"><% if(image !== \'\') { %><aside class="invodo-player--control__left invodo-player--title__image-wrapper invodo-player--control-item"><img src="<%=image%>" class="invodo-player--title__image" width="25" height="25" alt=""></aside><% } %><aside class="invodo-player--control__right invodo-player--title__right js-invodo-titlebuttons icon-size-1 font-size-1"></aside><section class="invodo-player--title invodo-text-effect-overflow-hidden invodo-player--control-item font-size-2"><% if(clipTitle !== \'\') { %><article class="invodo-text-effect-nowrap-fade-light js-invodo-titletext"><%=clipTitle%></article><% } %></section></header>';f.addTemplate("default.titlebar",A);var B='<article class="invodo-icon--col"><i class="<%=cssclass%> <%=icon%> invodo-player--tooltip invodo-tooltip--bottom"><div class="invodo-tooltip__content player-controls-bg-color js-invodo-tooltip"><span><%=tooltip%></span></div></i></article>';f.addTemplate("default.titlebutton",B);var C='<footer id="<%=elementId%>" class="invodo-player--controlbar invodo-player--footer player-controls-bg-color invodo-row invodo-width100 font-size-1"><div class="invodo-col-12"><aside class="invodo-player--control__left invodo-player--control-item icon-size-2"><i class="invodo-icon invodo-icon--play js-invodo-action-play"></i></aside><aside class="invodo-player--control__right invodo-player--control-item js-invodo-controlbuttons icon-size-1"><article class="invodo-time invodo-player--control-item"><span class="invodo-time--start js-invodo-time-start">0:00</span> &nbsp;/&nbsp; <span class="invodo-time-finish js-invodo-time-end">0:00</span></article></aside><section class="invodo-player--control-item invodo-player--control"><div class="invodo-player--tooltip invodo-tooltip--top js-invodo-timeline"><div class="invodo-tooltip__content player-controls-bg-color js-invodo-tooltip"><span></span></div><article class="invodo-player--timeline"><div class="invodo-player--progress primary-color-as-background opacity-1 js-invodo-progress"><div class="invodo-progress primary-color-as-background js-invodo-progress-play"><div class="invodo-progress--scrub primary-color-as-background js-invodo-time-scrub">&nbsp;</div></div><div id="pbar-buffer" class="invodo-progress js-invodo-progress-buffer">&nbsp;</div></div></article></div></section></div></footer>';return f.addTemplate("default.videocontrolbar",C),f};a.Template=b}(Invodo.Hi5||window),function(a){var b=function(){var a={type:"tooltip",parentElement:"",init:function(b){a.parentElement=b},setToolTipText:function(b){var c=a.parentElement.querySelectorAll(".js-invodo-tooltip span")[0];c.textContent=b},setToolTipLocation:function(b){var c=a.parentElement.querySelectorAll(".js-invodo-tooltip")[0];c.style.left=b}};return a};a.ToolTip=b}(Invodo.Hi5||window),function(a){var b=function(b,c,d,e){var f={};return f.elements=[],f.layers=[],f.restoreLayers={},f.config=b,f.dom=d,f.template=c,f.nav={},f.type="DOMManager",f.eventBus={type:"EventBus"},f.elementQueryResize=function(){var a=f.dom.getElementById(e);if(a){var b=getComputedStyle(a),c=["invodo-xs","invodo-sm","invodo-md","invodo-lg","invodo-xl"],d=null;if(parseInt(b.width,10)<=320?d=c[0]:parseInt(b.width,10)>320&&parseInt(b.width,10)<596?d=c[1]:parseInt(b.width,10)>=596&&parseInt(b.width,10)<768?d=c[2]:parseInt(b.width,10)>=768&&parseInt(b.width,10)<992?d=c[3]:parseInt(b.width,10)>=992&&(d=c[4]),-1===a.className.indexOf(d)){for(var g=0;g<c.length;g++)a.className=a.className.replace(c[g],"").trim();f.fire("resize",{element:e,size:d}),a.className=a.className+" "+d}}},f.nav.getLocationHref=function(){return f.dom.location.href},f.nav.goToLocation=function(a){f.dom.location.href=a},f.init=function(){["webkitfullscreenchange","mozfullscreenchange","fullscreenchange"].forEach(function(a){d.addEventListener(a,function(a){a.isFullscreen=f.isFullscreen(),f.fire("video_fullscreen",a)})}),f.fire("ui_responsive_resize")},f.create=function(a,b){var c=this.dom.createElement(a);return c.id=b,c},f.add=function(a,b,c){this.elements.push(c);var d="querySelector",e=b.substring(1);return isNaN(e)||(d="getElementById",b=parseInt(e,10)),null===this.dom[d](b)?!1:(this.dom[d](b).insertAdjacentHTML("beforeend",a),!0)},f.getElement=function(a){return this.dom.getElementById(a)},f.getOffset=function(a,b,c,d){try{d=a.getBoundingClientRect()}catch(e){}var f=b.body,g=window.self,h=c.clientTop||f.clientTop||0,i=c.clientLeft||f.clientLeft||0,j=g.clientYOffset||c.scrollTop||f.scrollTop,k=g.clientXOffset||c.scrollLeft||f.scrollLeft,l=d.top+j-h,m=d.left+k-i;return{top:l,left:m}},f.remove=function(a){return a.parentNode&&a.parentNode.removeChild?a.parentNode.removeChild(a):!1},f.empty=function(a,b){for(;a.firstChild;)a.removeChild(a.firstChild);
return b&&"function"==typeof b?b():!0},f.getScreenCoordinates=function(a){var b={};return b.x=a.offsetLeft,b.y=a.offsetTop,b},f.isFullscreen=function(){var a=!1;return"undefined"!=typeof d.fullScreen?a=d.fullScreen:"undefined"!=typeof d.webkitIsFullScreen?a=d.webkitIsFullScreen:"undefined"!=typeof d.mozFullScreen&&(a=d.mozFullScreen),a},f.fullscreen=function(a){var b=function(a,b){if(b[a])b[a]();else for(var c=["webkit","moz","o","ms"],d=0;d<c.length;d++){var e=c[d]+a[0].toUpperCase()+a.slice(1);b[e]&&b[e]()}};if(f.isFullscreen())b("cancelFullScreen",d);else{var c=this.dom.getElementById(a);b("requestFullScreen",c)}},f.createLayer=function(a){for(var b=!1,c=0;c<f.layers.length;c++)f.layers[c].name===a&&(b=!0,c=f.layers.length);return b?f.layers.length:f.layers.push({name:a,dialogs:[],visible:!1})},f.getLayer=function(a){return f.layers.filter(function(b){return b.name===a}).pop()},f.hideLayer=function(a){var b=f.getLayer(a);b&&b.visible!==!1&&(b.dialogs.map(function(a){a.hide()}),b.visible=!1,f.fire("layerhide_"+a))},f.showLayer=function(a,b){var c=f.getLayer(a);c&&c.visible!==!0&&(b&&(f.restoreLayers[c.name]=[],f.layers.map(function(a){a.visible&&(f.hideLayer(a.name),f.restoreLayers[c.name].push(a))}),f.on("layerhide_"+a,function(){f.restoreLayers[a].map(function(a){f.showLayer(a.name)}),f.restoreLayers[a]=[]})),c.dialogs.map(function(a){a.show()}),c.visible=!0,f.fire("layershow_"+a),f.fire("ui_responsive_resize"))},f.observeMutation=function(a){function b(){f.fire("ui_responsive_resize")}var c=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver||!1;if(c!==!1){var d=new c(function(a){a.forEach(b)});d.observe(a,{attributes:!0,subtree:!1})}},f.addDialog=function(a,b){return f.getLayer(b)||f.createLayer(b),f.getLayer(b).dialogs.push(a)},a.EventDispatcher(f.eventBus),a.EventDispatcher(f),f.on("ui_responsive_resize",function(){f.elementQueryResize()}),window.addEventListener("resize",function(){f.fire("ui_responsive_resize")}),f};a.UI=b}(Invodo.Hi5||window),function(a){var b=function(a,b){var c={type:"html5video",id:a.id,styles:[{}],create:function(){if(a.id){var d="#"+a.containerId+" ";if(b.add(b.template.render("default.style",{elementId:a.id}),"head",a.id),a.color){a.opacity||(a.opacity={}),a.opacity.primary1="undefined"!==a.opacity.primary1?a.opacity.primary1:".3",a.opacity.primary2=a.opacity.primary2?a.opacity.primary2:".6",a.opacity.overlay=a.opacity.overlay?a.opacity.overlay:".4",a.opacity.controls=a.opacity.controls?a.opacity.controls:".4",a.opacity.pauseLayer=a.opacity.pauseLayer?a.opacity.pauseLayer:".85",a.opacity.startFinishLayer=a.opacity.startFinishLayer?a.opacity.startFinishLayer:".6";for(var e in a.color)c.isValidColor(a.color[e])?a.color[e]=c.formatColor(a.color[e]):a.color[e]=0;b.add(b.template.render("default.themeColor",{color:a.color,wrapperElement:d,opacity:a.opacity}),"#"+a.id,a.id)}a.font&&b.add(b.template.render("default.themeTypography",{font:a.font,wrapperElement:d}),"#"+a.id,a.id);var f="";return c.styles.forEach(function(a){var b=Object.keys(a)[0];a[b]&&a[b].length>0&&(f+=b+"{",a[b].forEach(function(a){for(var b=0;b<Object.keys(a).length;b++){var c=Object.keys(a)[b];f+=c+":"+a[c]+";"}}),f+="}")}),b.add(f,"#"+a.id,a.id),this.element=b.dom.getElementById(a.id),this.parent=b.dom.getElementById(a.parentId),this.element}},destroy:function(){return c.element?b.remove(c.element):void 0},init:function(){return a.id&&!b.dom.querySelector("#"+a.id)&&this.create(),this},show:function(){},hide:function(){},addSelector:function(a,b){"string"!=typeof a&&console.log(new Error("Style - addSelector param must be a string.")),"object"!=typeof b&&console.log(new Error("Style - addSelector param must be an object.")),c.styles.forEach(function(d,e){0===Object.keys(c.styles[e]).length&&(c.styles[0][a]=[{}]),b.forEach(function(b){c.addAttribute(a,b)})}),c.refresh()},removeSelector:function(a){"string"!=typeof a&&console.log(new Error("Style - removeSelector param must be a string.")),c.styles.forEach(function(b,d){return c.styles[d][a]?(delete c.styles[d][a],void delete c.styles[d]):void 0}),c.refresh()},addAttribute:function(a,b){c.styles.forEach(function(d,e){d[a]&&d[a].length>0&&d[a].forEach(function(d,f){var g=Object.keys(b)[0];c.styles[e][a][f][g]=b[g]})})},removeAttribute:function(a,b){c.styles.forEach(function(d,e){d[a]&&d[a].length>0&&d[a].forEach(function(d,f){var g=Object.keys(b)[0];return c.styles[e][a][f][g]?void delete c.styles[e][a][f][b]:void 0})})},formatRGB:function(a){return a.replace(/[rgb\(\)]+/gi,"")},hexToRGB:function(a){var b=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a);return parseInt(b[1],16)+","+parseInt(b[2],16)+","+parseInt(b[3],16)},isRGBColor:function(a){return/^(rgb)?\(?([01]?\d\d?|2[0-4]\d|25[0-5])(\W+)([01]?\d\d?|2[0-4]\d|25[0-5])\W+(([01]?\d\d?|2[0-4]\d|25[0-5])\)?)$/i.test(a)},isHexaColor:function(a){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(a)},isValidColor:function(a){return 0===a?!1:a.match("#")?c.isHexaColor(a):a.match(",")?c.isRGBColor(a):c.isHexaColor(a)},formatColor:function(a){return a.match("#")?c.hexToRGB(a):a.match(",")?c.formatRGB(a):c.hexToRGB(a)},refresh:function(){c.destroy(),c.create()}};return c};a.Style=b}(Invodo.Hi5||window),Invodo.Src.Widget.Astro=function(a){function b(a){if(!("parentDomId"in a||"widgetId"in a))throw new Error("Missing config options");F=[],x="Astro_"+a.widgetId,y=[],z=a.parentDomId,A="div",H="Astro",B=a.widgetId,t()}function c(){S=!1,T=!1,U=!0}function d(){S=!0,T=!1,U=!1}function e(){S=!1,T=!0,U=!1}function f(){S=!1,T=!1,U=!0}function g(b){function c(b){var c=Invodo.getAffiliateConfig();I.frames=b.config.frames,I.title=b.config.title,I.description=b.config.description,I.podId=b.config.podId,I.customData=b.config.customData,I.affiliateConfig=c,I.affiliateConfig.mode=a.mode,R=I.frames[0].durableId}function d(a){for(var b=a.frames,c=0;c<b.length;c++){var d={};d.title=b[c].title||"",d.duration=b[c].duration,d.poster=b[c].previewUrl.replace(/.*?:/g,"");for(var e=b[c].encodings,f=[],g=0;g<e.length;g++){var h={};h.id=e[g].id,h.type="video/mp4",h.height=e[g].height,h.width=e[g].width,h.label=e[g].label,h.bitrate=e[g].bitrate,h.file=e[g].http.replace(/.*?:/g,""),f.push(h)}d.defaultEncoding=b[c].defaultEncoding?b[c].defaultEncoding:e[e.length-1].id,d.encodings=f,A.push(d)}}function g(){function c(a){var b=!1;I.affiliateConfig.autoplaymultipleclips&&"true"===I.affiliateConfig.autoplaymultipleclips&&(b=!0);var c=[{type:"playlist",skin:"default.playlist",skinParams:{clipTitle:a},autoPlayMultipleClips:b}];f.Playlist=c,f.ReplayButton[0].skin="default.replayPlaylist"}function d(){return f.Media[0].config.length>1?!0:!1}function e(){return"false"!==I.affiliateConfig.playlist&&d()}var f={type:"videoplayer",parentId:z,Assets:[{type:"assets",preload:[{type:"css",path:"styles/hi5.css"}]}],MediaDisplay:[{type:"videodisplay",controls:!1,skin:"default.videodisplay",skinParams:{},mode:a.mode}],Media:[{type:"videomedia",autoplay:E,config:A}],CTA:[{type:"cta",skin:"default.html5videoPlay",playbutton:{show:!0}}],PlayButton:[{type:"playbutton",skin:"default.playButton",skinParams:{}}],ReplayButton:[{type:"replaybutton",skin:"default.replayButton",skinParams:{}}]};I.affiliateConfig.playbuttonpath&&""!==I.affiliateConfig.playbuttonpath&&(f.PlayButton[0].skin="default.playButtonImg",f.PlayButton[0].skinParams.url=I.affiliateConfig.playbuttonpath,f.ReplayButton[0].skin="default.replayButtonImg",f.ReplayButton[0].skinParams.url=I.affiliateConfig.playbuttonpath);var g=!0;I.affiliateConfig.showcliptitles&&"false"===I.affiliateConfig.showcliptitles&&(g=!1),e()&&c(g);var h=!0;I.affiliateConfig.loadingview&&"false"===I.affiliateConfig.loadingview&&(h=!1),f.MediaDisplay[0].skinParams.loadingView=h,I.affiliateConfig.showPlaybutton&&"false"===I.affiliateConfig.showPlaybutton&&delete f.PlayButton;var i=[{type:"theme",skin:"default.style",color:{}}];if(I.affiliateConfig.secondarycolor&&(i[0].color.secondary="#"+I.affiliateConfig.secondarycolor),f.Style=i,I.affiliateConfig.chromelessmode&&"false"===I.affiliateConfig.chromelessmode){var j=[{type:"videocontrolbar",skin:"default.videocontrolbar",buttons:[{type:"volume",cssclass:"js-invodo-btn-volume",icon:"invodo-icon invodo-icon--volume-high invodo-player-menu invodo-menu--top invodo-menu--hover-is-active ",html:'<div class="invodo-menu__content player-controls-bg-color invodo-volume__container js-invodo-menu"><div class="invodo-volume--range__container primary-color-as-background opacity-1 js-invodo-volume"><div class="invodo-volume--range primary-color-as-background opacity-2 js-invodo-volume-amount"><div class="invodo-volume--scrub primary-color-as-background js-invodo-action-volume">&nbsp;</div></div></div></div>'},{type:"encoding",cssclass:"js-invodo-encoding-selector",icon:"invodo-icon invodo-icon--cog invodo-player-menu invodo-menu--top invodo-menu--hover-is-active",html:'<div class="invodo-menu__content player-controls-bg-color js-invodo-encoding-menu"><ul></ul></div>'},{type:"fullscreenopen",cssclass:"js-invodo-action-fullscreen",icon:"invodo-icon invodo-icon--fullscreen invodo-player--tooltip invodo-tooltip--top invodo-tooltip--left",tooltip:"Full screen"}]}];if(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled)j[0].buttons.push({type:"fullscreenclose",cssclass:"js-invodo-action-fullscreen-close",icon:"invodo-icon invodo-icon--fullscreen-close invodo-player--tooltip invodo-tooltip--top invodo-tooltip--left",tooltip:"Close full screen"});else{var k=j[0].buttons[2];k.cssclass="",k.tooltip="Fullscreen is not supported in this browser",k.icon=k.icon+" invodo-icon-is-disabled"}if(e()){var l={type:"playlist",cssclass:"js-invodo-playlistButton",icon:"invodo-icon invodo-icon--playlist invodo-player--tooltip invodo-tooltip--top invodo-tooltip--left",tooltip:"More videos ("+I.frames.length+")"};j[0].buttons.splice(2,0,l)}var m=[{type:"titlebar",skin:"default.titlebar",skinParams:{clipTitle:g},buttons:[]}],n=[{type:"ratingscomments",skin:"default.ratingscomments",commentslimit:140}],o=[];if(I.affiliateConfig.affiliate)o.push({type:"sharing",skin:"default.sharing",socialnetworks:{Facebook:"//www.facebook.com/sharer.php?u=",Twitter:"//twitter.com/share?text=Check out this video at "+I.affiliateConfig.affiliate+" %7C "+encodeURIComponent(b.config.title)+"&url=",Pinterest:"//pinterest.com/pin/create/button/?description="+encodeURIComponent(b.config.title)+" %7C "+I.affiliateConfig.affiliate+"&media=http:"+A[0].poster+"&url=",Email:"mailto:?subject=Check out this video - "+encodeURIComponent(b.config.title)+"&body=Check out this video at "+I.affiliateConfig.affiliate+"%0D%0A%0D%0A"+encodeURIComponent(b.config.title)+"%0D%0A%0D%0A"+encodeURIComponent(b.config.description)+"%0D%0A%0D%0A"}});else{var p={};o.push(p)}var q=[{type:"endstate",format:"compound",skin:"default.endstate",dialogNames:[]}];f.VideoControlbar=j,f.Titlebar=m,f.RatingsComments=n,f.Sharing=o,f.EndState=q;var r={type:"ratingscomments",cssclass:"js-invodo-ratingbutton",icon:"invodo-icon invodo-icon--star",tooltip:"Rate this video"},s={type:"sharing",cssclass:"js-invodo-sharebutton",icon:"invodo-icon invodo-icon--share",tooltip:"Share"};I.affiliateConfig.ratingenabled&&"true"===I.affiliateConfig.ratingenabled&&(f.Titlebar[0].buttons.push(r),f.Playlist||f.EndState[0].dialogNames.push("RatingsComments")),I.affiliateConfig.share&&"true"===I.affiliateConfig.share&&(f.Titlebar[0].buttons.push(s),f.Playlist||f.EndState[0].dialogNames.push("Sharing"))}return f}function j(a){return Invodo.Hi5.VideoPlayerFactory(a)}function n(){D.go()}function o(){return D.media}function q(){Invodo.Lang.forEach(["video_play","video_timeupdate","video_ended","video_pause","new_video"],function(a,b){L.on(b,function(a){var c=i(a,b);if("video_play"===b&&k(c),"new_video"===b&&u("newVideo",c),"video_timeupdate"===b){var d=G.getTime();G.sendUpdate({data:d}),!V&&G.isPlaying()&&l(),u("timeUpdate",c)}"video_ended"===b&&(m(),f(),r("videoComplete",a),u("videoComplete",a),void 0===B.Playlist&&(r("podComplete",a),u("podComplete",a))),"video_pause"===b&&(m(),e(),p(),r("videoPause",a),u("videoPause",a))})}),L.once("video_play",function(b){"embedded"===a.mode&&r("ctaClick",b),u("ctaClick",b)})}function s(){return D.ui}function t(){return D.ratingscomments}function v(){return D.display}function w(){Invodo.Lang.forEach(["overlay_close","titlebar_ratingscomments_click","titlebar_sharing_click","sharing_sendbutton_click","ratingscomments_sendbutton_click","videocontrolbar_encodingbutton_clicked","playlist_ended"],function(a,b){M.on(b,function(a){"titlebar_ratingscomments_click"===b&&r("buttonRatingClicked"),"titlebar_sharing_click"===b&&r("buttonShareClicked"),"sharing_sendbutton_click"===b&&r("userClick",{playertype:"inplayer",clktype:"share",clktgt:a.socialnetwork}),"playlist_ended"===b&&(r("podComplete",a),u("podComplete",a)),"overlay_close"===b&&h(),"ratingscomments_sendbutton_click"===b&&(""===a.comments?r("rating",{score:a.stars}):r("rating",{score:a.stars,note:a.comments})),"videocontrolbar_encodingbutton_clicked"===b&&r("buttonBitrateClicked")})})}function x(){Invodo.Lang.forEach(["video_encoding_change"],function(a,b){N.on(b,function(a){"video_encoding_change"===b&&r("bitrateSelected",{h:a.height,w:a.width,br:a.bitrate})})})}function y(){if("embedded"===a.mode){var b=new Invodo.Dom("#"+z),c=b.elements[0].childNodes[0];if(c&&0!==c.clientHeight&&void 0!==c.clientHeight){var d=J||Invodo.Pod.getByMpd(K).pod,e={pn:Invodo.getPageName(),pod:d},f=Invodo.Pod.getExperimentData(d);f.experiment&&(e.ex=f.experiment+"/"+f.branch),e.vis=b.visibleInViewPort(),r("ctaView",e)}}}var A=[];c(b),d(I);var B=g();D=j(B),n(),L=o(),q(),M=s(),w(),N=v(),x(),O=t(),u("playerReady"),y()}function h(){if(W){var a=document.getElementsByClassName("js-invodo-mask");a&&a.length&&document.body.removeChild(a[0])}D=void 0,W=!1}function i(a,b){return a=a||{},a.pod=Q,a.fr=R,"tm"in a||(a.tm=L.time()),"type"in a||(a.type=b),a}function j(){W=!0,M.fire("overlay_open")}function k(a){G.isPaused()&&(r("videoUnpause",a),u("videoUnpause",a)),d(),r("videoStart",a),u("videoStart",a),n(),V||l()}function l(){V=window.setInterval(p,5e3)}function m(){clearInterval(V),V=void 0,G.fire("stoppedLogging",V)}function n(){X===!1&&(X=!0,o())}function o(){var a=Invodo.Pod.getExperimentData(J||Invodo.Pod.getByMpd(K).pod),b=a.branch;u("podStart");var c=Invodo.Module.get("logger");c.log(B,"podStart",{pod:b})}function p(){var a=G.getTime(),b={};b.tm=a;var c=i(b);r("timePlayed",c),u("timePlayed",c),G.sendUpdate({eventData:a})}function q(b){C=Invodo.Lang.mix({},b),G.onpodload&&setTimeout(function(){G.onpodload(b.pod)},0),"overlay"!==a.mode&&g(C)}function r(a,b){var c=Invodo.Pod.getExperimentData(J||Invodo.Pod.getByMpd(K).pod);b||(b={}),b.mark&&(b.tm=b.mark,delete b.mark),b.method&&(b.vc=b.method,delete b.method),"ctaClick"===a&&c&&(b.ex=c.experiment+"/"+c.branch),c&&"branch"in c&&(b.pod=c.branch);var d=Invodo.Module.get("logger"),e=Invodo.Src.Widget.Astro.EventTranslator(G),f=e.translate(a,b,G,{videoId:R}),g=d.log(B,a,f);return g}function s(a){var b=document.getElementById(a);b&&b.innerHTML&&(b.innerHTML="")}function t(){var b;"listensTo"in a&&(b=a.listensTo,y="string"==typeof b?b.split(","):b)}function u(a,b){w(a);for(var c=0;c<F.length;c++)v(a,b,F,c)}function v(a,b,c,d){c[d].eventName===a&&!function(b,d){var e=d||{};setTimeout(function(){e.widgetId=B,e.eventName=a,c[b].callback(e)},5)}(d,b)}function w(a){switch(a){case"videoComplete":f()}}Invodo.Src.Widget.Astro.version="0.22.0",Invodo.Src.Widget.Astro.cdn="d2xza854ebzm5d.cloudfront.net/assets/astro";var x,y,z,A,B,C,D,E,F=[],G=this,H=a.type,I={},J=a.podId,K=a.mpd,L={},M={},N={},O={};"autoplay"in a?E=a.autoplay:("embedded"===a.mode&&(E=!1),"overlay"===a.mode&&(E=!0)),(J||K)&&Invodo.Pod.load({pod:J,mpd:K},function(a){q(a)});var P=J||Invodo.Pod.getByMpd(K).pod,Q=Invodo.Pod.getExperimentData(P).branch,R="";b(a),Invodo.Src.Widget.Mixin.call(this,{widgetId:B,parentDomId:z,type:H}),Invodo.Video.Interface.call(this),Invodo.EventDispatcher(this);var S,T,U,V=null;c(),G.getTime=function(){return L.time()||0},G.getDuration=function(){return L.duration()||0},G.isPaused=function(){return T},G.isPlaying=function(){return S},G.stop=function(){L.pause(),L.seek(0),f()},G.isStopped=function(){return U},G.mute=function(){return G.muteToggle()},G.muteToggle=function(){var a=L.muted();return a?L.unmute():L.mute(),!a},G.pause=function(){L.pause()},G.pauseVideo=function(){G.pause()},G.play=function(){L.play()};var W=!1;G.remove=function(){"embedded"===G.getMode()&&s(G.getParentDomId()),"overlay"===G.getMode()&&h()},G.replay=function(){L.set(0),L.play()},G.setTime=function(a){L.seek(a)},G.reset=function(){L.set(0),f()};var X=!1;G.loadVideo=function(){L.set(0),L.play()},G.getAutoplay=function(){return E},G.playButtonClick=function(){G.play()},G.ratingButtonClick=function(){O.show(),r("buttonRatingClicked")},G.getMode=function(){return a.mode},G.getStyle=function(a,b){var c=document.getElementById(a);return c.style[b]},G.setStyle=function(a,b){var c=document.getElementById(z);c.style[a]=b},G.setParentDomId=function(a){z=a},G.getId=function(){return B},G.getInfo=function(){return!1},G.getListensTo=function(){return y},G.getMpd=function(){return K},G.getParentDomId=function(){return z},G.getPodId=function(){return J},G.getType=function(){return H},G.sendUpdate=function(a){a.widgetId=B,Invodo.Widget.update(a)},G.receiveUpdate=function(a){for(var b in y){var c=y[b];a.widgetId===c&&"show"===a.data&&G.show(),G.fire("receivedUpdate",a)}},G.show=function(){"overlay"===a.mode&&(void 0===D&&g(C),j(),G.play())},G.registerEventListener=function(a,b){return F.push({eventName:a,callback:b}),G.fire("eventRegistered",F),G},G.unregisterEventListener=function(a,b){for(var c=0;c<F.length;c++)F[c].eventName===a&&F[c].callback===b&&F.splice(c,1);return G.fire("eventUnregistered",F),G}},Invodo.Src.Widget.Astro.EventTranslator=function(){var a={};a.translate=function(a,c,d,e){var f;switch(a){case"ctaClick":f=b.clone(c),f.et="ctaClick",delete f.type,delete f.ex,f.position=d.getTime().toFixed(3),f.duration=d.getDuration().toFixed(3);break;case"videoStart":f=b.clone(c),f.et="videoStart",delete f.type,delete f.ex,f.vc="http",f.position=d.getTime().toFixed(3),f.duration=d.getDuration().toFixed(3);break;case"videoComplete":f=b.clone(c),f.vc="http",f.position=f.tm=d.getTime().toFixed(3),f.duration=d.getDuration().toFixed(3),f.fr=e.videoId,f.et="videoComplete";break;case"videoPause":f=b.clone(c),f.position=f.tm=d.getTime().toFixed(3),f.duration=d.getDuration().toFixed(3),f.fr=e&&"videoId"in e?e.videoId:"";break;case"podComplete":f=b.clone(c),f.position=f.tm=d.getTime().toFixed(3),f.duration=d.getDuration().toFixed(3),f.fr=e.videoId,f.et="podComplete";break;case"videoUnpause":f=b.clone(c),f.et="videoUnpause",delete f.type,delete f.ex,f.position=d.getTime().toFixed(3),f.duration=d.getDuration().toFixed(3),f.tm=f.tm.toFixed(3).toString();break;case"timePlayed":f=b.clone(c),delete f.type;break;default:f=c}return f};var b={add:function(a,c){var d,e=typeof a;switch(e){case"object":d=b.clone(a);var f;for(f in c)d[f]=c[f];break;case"string":case"number":case"boolean":d=a+c;break;default:d=a}return d},clone:function(a){return JSON.parse(JSON.stringify(a))}};return a};
//# sourceMappingURL=invodo.js.map